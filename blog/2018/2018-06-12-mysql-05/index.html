<!DOCTYPE html>

<html lang="zh-cn"><head>
  <meta charset="utf-8">
  <title>MYSQL日志 | Louis Blog</title>

  <!-- mobile responsive meta -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="有技术 有温度 有情怀">
  
  <meta name="author" content="Louis ">
  <meta name="generator" content="Hugo 0.73.0" />

  <!-- plugins -->
  
  <link rel="stylesheet" href="/plugins/bootstrap/bootstrap.min.css">
  
  <link rel="stylesheet" href="/plugins/slick/slick.css">
  
  <link rel="stylesheet" href="/plugins/fontawesome/font-awesome.min.css">
  
  <link rel="stylesheet" href="/plugins/animate/animate.css">
  
  <link rel="stylesheet" href="/plugins/venobox/venobox.css">
  

  <!-- Main Stylesheet -->
  
  <link rel="stylesheet" href="/scss/style.min.css" media="screen">

  <!--Favicon-->
  <link rel="shortcut icon" href="/images/images/favicon.png " type="image/x-icon">
  <link rel="icon" href="/images/images/favicon.png " type="image/x-icon">

  <!--Algolia-->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2.6.3/dist/cdn/docsearch.min.css">
</head>
<body>
<!-- header -->
<header>
  

  <!-- navigation -->
  <div class="navigation bg-white position-relative">
    <div class="container">
      <nav class="navbar navbar-expand-lg navbar-light bg-white">
        <a class="navbar-brand" href="/"><img class="img-fluid pb-lg-3" src="/images/images/logo.png" width="189px" alt="Louis Blog"></a>
        <button class="navbar-toggler border-0" type="button" data-toggle="collapse" data-target="#navigation"
          aria-controls="navigation" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse text-center" id="navigation">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item">
              <a class="nav-link" href="/"></a>
            </li>
            
            
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-haspopup="true"
                aria-expanded="false">
                博客
              </a>
              <div class="dropdown-menu" >
                
                <a class="dropdown-item" href="/categories/kubernetes">Kubernetes</a>
                
                <a class="dropdown-item" href="/categories/sealos">sealos</a>
                
                <a class="dropdown-item" href="/categories/ops">运维相关</a>
                
                <a class="dropdown-item" href="/categories/golang">golang</a>
                
                <a class="dropdown-item" href="/categories/algorithm">algorithm</a>
                
                <a class="dropdown-item" href="/categories/tools">tools</a>
                
                <a class="dropdown-item" href="/blog">全部</a>
                
              </div>
            </li>
            
            
            
            <li class="nav-item">
              <a class="nav-link" href="/team">友情链接</a>
            </li>
            
            
            
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-haspopup="true"
                aria-expanded="false">
                关于我
              </a>
              <div class="dropdown-menu" >
                
                <a class="dropdown-item" href="/contact">about</a>
                
                <a class="dropdown-item" href="https://github.com/oldthreefeng">github</a>
                
              </div>
            </li>
            
            
          </ul>

          
          

          
          <!-- search -->
          <div class="search px-4">
            <button id="searchOpen" class="search-btn"><i class="fa fa-search text-dark"></i></button>
            <div class="search-wrapper">
              <form action="/search">
                <input class="search-box form-control" id="js-algolia-btn" name="s" type="search" placeholder="输入搜索词">
              </form>
              <button id="searchClose" class="search-close"><i class="fa fa-close text-dark"></i></button>
            </div>
          </div>
          
          
          <!-- get start btn -->
          <a href="/contact" class="btn btn-primary hover-ripple">联系我</a>
          
        </div>
      </nav>
    </div>
  </div>
  <!-- /navigation -->
</header>
<!-- /header -->


<!-- page title -->
<section class="section bg-cover overlay" style="background-image: url('/'),url('/'),url('/images/images/backgrounds/page-title.jpg');">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <h2 class="text-white mb-3">MYSQL日志</h2>
        <!-- breadcrumb -->
        
        <p class="text-white"></p>
      </div>
    </div>
  </div>
</section>
<!-- /page title -->


<!-- blog details -->
<section class="section">
  <div class="container blog">
    <div class="row">
      <div class="col-lg-8">
        <!-- post thumb -->
        <div class="position-relative mb-5">
          <img src="/"  onerror="this.src='https:\/\/pic.fenghong.tech\/proto\/neck-1211231__340.jpg'" alt="post thumb" class="img-fluid w-100">
           <div class="card-type">Mysql</div>
        </div>
        <div class="card-meta text-uppercase mb-2">作者  <strong class="text-dark"><a href="https://www.fenghong.tech">Louis</a></strong>
          
            发表于 <strong class="text-dark">2018年6月11日</strong></div>
        <hr>
        <div class="content">
          <p>摘要：MYSQL的日志，事务日志，错误日志，通用日志，慢查询日志，二进制日志的学习过程,其中的相关变量均<a href="https://dev.mysql.com/doc/refman/5.7/en/innodb-parameters.html#sysvar_innodb_log_file_size">可以参考官网配置</a></p>
<h1 id="日志">日志</h1>
<p><strong>日志分类：</strong></p>
<ul>
<li>事务日志：  <code>transaction log</code></li>
<li>中继日志：  <code>reley log</code></li>
<li>错误日志：  <code>error log</code></li>
<li>通用日志：  <code>general log</code></li>
<li>慢查询日志： <code>slow query log</code></li>
<li>二进制日志： <code>binary log</code></li>
</ul>
<p>命令日志：<code>]#cat .mysql.history</code>,当前终端的命令日志不会保存，退出后自动保存至改文件</p>
<h2 id="事务日志">事务日志</h2>
<ul>
<li>
<p>事务日志：<code>transaction log</code></p>
</li>
<li>
<p>事务型存储引擎自行管理和使用，建议和数据文件分开存放</p>
</li>
</ul>
<p><code>redo log</code>   已经做的事务日志
<code>undo log</code>  未做的事务日志</p>
<h3 id="innodb事务日志相关配置">Innodb事务日志相关配置：</h3>
<p><code>innodb_log_file_size</code>是一个<code>global,</code>但不是<code>dynamic</code>的变量，要想生效，必须写入配置文件中。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">show</span> variables <span style="color:#66d9ef">like</span> <span style="color:#e6db74">&#39;%innodb_log%&#39;</span>;
innodb_log_file_size <span style="color:#ae81ff">5242880</span> <span style="color:#75715e">-- 每个日志文件大小,/var/lib/mysql/ib_logfile
</span><span style="color:#75715e"></span>innodb_log_files_in_group <span style="color:#ae81ff">2</span>  <span style="color:#75715e">-- 日志组成员个数，建议调大
</span><span style="color:#75715e"></span>innodb_log_group_home_dir .<span style="color:#f92672">/</span> <span style="color:#75715e">-- 事务文件路径
</span></code></pre></div><p>调大日志文件,事务日志文件路径,（建议单独存放）</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ mkdir -pv /data/mysqllogs/
$ chmod mysql.mysql /data/mysqllogs/ 
$ vim /etc/my.cnf
<span style="color:#f92672">[</span>mysqld<span style="color:#f92672">]</span>
innodb_log_files_in_group<span style="color:#f92672">=</span><span style="color:#ae81ff">5</span>  <span style="color:#75715e">#仅修改日志数会导致服务起不来</span>
innodb_log_group_home_dir<span style="color:#f92672">=</span>/data/mysqllogs/
$ systemctl restart mariadb
</code></pre></div><ul>
<li>中继日志：<code>relay log</code></li>
</ul>
<p>主从复制架构中，从服务器用于保存从主服务器的二进制日志中读取到的事件</p>
<h2 id="错误日志">错误日志</h2>
<p><strong>错误日志：</strong></p>
<ul>
<li><code>mysqld</code>启动和关闭过程中输出的事件信息</li>
<li><code>mysqld</code>运行中产生的错误信息</li>
<li><code>event scheduler</code>运行一个<code>event</code>时产生的日志信息</li>
<li>在主从复制架构中的从服务器上启动从服务器线程时产生的信息</li>
</ul>
<p><strong>错误日志相关配置</strong>：<code>SHOW GLOBAL VARIABLES LIKE 'log_error'；</code></p>
<ul>
<li>错误文件路径，配置文件位置：<code>/etc/my.cnf</code></li>
</ul>
<p><code>log_error=/PATH/TO/LOG_ERROR_FILE</code></p>
<ul>
<li>是否记录警告信息至错误日志文件</li>
</ul>
<p><code>log_warnings=1|0 默认值1</code></p>
<h2 id="通用日志">通用日志</h2>
<p>**通用日志：**记录对数据库的通用操作，包括错误的SQL语句</p>
<ul>
<li>文件：<code>file</code>，默认值</li>
<li>表：<code>table</code></li>
<li><code>general_log: OFF</code>，默认值，全局变量，<code>global，</code>，<code>dynamic</code></li>
<li><code>log_output: FILE</code>，默认值</li>
</ul>
<p><strong>通用日志相关设置</strong>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">show</span> variables <span style="color:#66d9ef">like</span> <span style="color:#e6db74">&#39;general_log%&#39;</span>;
<span style="color:#f92672">+------------------+---------------+</span>
<span style="color:#f92672">|</span> Variable_name    <span style="color:#f92672">|</span> Value         <span style="color:#f92672">|</span>
<span style="color:#f92672">+------------------+---------------+</span>
<span style="color:#f92672">|</span> general_log      <span style="color:#f92672">|</span> OFF           <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> general_log_file <span style="color:#f92672">|</span> localhost.log <span style="color:#f92672">|</span>
<span style="color:#f92672">+------------------+---------------+</span>
<span style="color:#66d9ef">set</span> global general_log<span style="color:#f92672">=</span><span style="color:#66d9ef">on</span>;
<span style="color:#66d9ef">show</span> variables <span style="color:#66d9ef">like</span> <span style="color:#e6db74">&#39;log_output&#39;</span>;
<span style="color:#f92672">+---------------+-------+</span>
<span style="color:#f92672">|</span> Variable_name <span style="color:#f92672">|</span> Value <span style="color:#f92672">|</span>
<span style="color:#f92672">+---------------+-------+</span>
<span style="color:#f92672">|</span> log_output    <span style="color:#f92672">|</span> FILE  <span style="color:#f92672">|</span>	 <span style="color:#75715e">-- TABLE|FILE|NONE
</span><span style="color:#75715e"></span><span style="color:#f92672">+---------------+-------+</span>
<span style="color:#66d9ef">set</span> global log_output<span style="color:#f92672">=</span><span style="color:#66d9ef">table</span>;
</code></pre></div><h2 id="实验">实验</h2>
<p><strong>目标</strong>：生成大文件的事务日志文件，了解事务日志的原理，及相应的特殊性</p>
<h3 id="准备工作">准备工作</h3>
<p>每个表单独使用一个表空间存储表的数据和索引,在配置文件<code>/etc/my.cnf</code>中，加入<code>innodb_file_per_table=ON</code>，便于日志的观察</p>
<pre><code>$ vim /etc/my.cnf
[mysqld]
innodb_file_per_table=ON
</code></pre><h3 id="生成大文件脚本">生成大文件脚本</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">use</span> testdb
<span style="color:#75715e">-- 脚本内容
</span><span style="color:#75715e"></span><span style="color:#66d9ef">create</span> <span style="color:#66d9ef">table</span> <span style="color:#a6e22e">testlog</span> (id <span style="color:#66d9ef">int</span> <span style="color:#66d9ef">auto_increment</span> <span style="color:#66d9ef">primary</span> <span style="color:#66d9ef">key</span>,name <span style="color:#66d9ef">char</span>(<span style="color:#ae81ff">10</span>),age <span style="color:#66d9ef">int</span> <span style="color:#66d9ef">default</span> <span style="color:#ae81ff">20</span>);
delimiter <span style="color:#960050;background-color:#1e0010">$$</span>
<span style="color:#66d9ef">create</span> <span style="color:#66d9ef">procedure</span> <span style="color:#a6e22e">pro_testlog</span>()
begin
<span style="color:#66d9ef">declare</span> i <span style="color:#66d9ef">int</span>;
<span style="color:#66d9ef">set</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;
<span style="color:#66d9ef">while</span> i <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">100000</span>
do <span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> <span style="color:#a6e22e">testlog</span>(name,age) <span style="color:#66d9ef">values</span>(<span style="color:#a6e22e">concat</span>(<span style="color:#e6db74">&#39;wang&#39;</span>,i),i) ;
<span style="color:#66d9ef">set</span> i <span style="color:#f92672">=</span> i <span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>;
end <span style="color:#66d9ef">while</span>;
end<span style="color:#960050;background-color:#1e0010">$$</span>

delimiter ;
</code></pre></div><h3 id="使用相关脚本实验">使用相关脚本实验</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">start transaction;
<span style="color:#75715e">-- 生成大数据事务
</span><span style="color:#75715e"></span><span style="color:#66d9ef">call</span> pro_testlog; 
<span style="color:#66d9ef">call</span> pro_testlog; 
<span style="color:#66d9ef">call</span> pro_testlog; 
<span style="color:#75715e">-- 查询数据
</span><span style="color:#75715e"></span><span style="color:#66d9ef">select</span> <span style="color:#a6e22e">count</span>(<span style="color:#f92672">*</span>) <span style="color:#66d9ef">from</span> testlog; 
<span style="color:#960050;background-color:#1e0010">\</span><span style="color:#f92672">!</span> ls <span style="color:#f92672">-</span>lh <span style="color:#f92672">/</span>var<span style="color:#f92672">/</span>lib<span style="color:#f92672">/</span>mysql<span style="color:#f92672">/</span>testdb<span style="color:#f92672">/</span>testlog.ibd
<span style="color:#75715e">-- 数据直接写入数据文件，超过了事务日志的大小。
</span><span style="color:#75715e"></span>truncate testlog;
<span style="color:#75715e">-- 删除数据库
</span><span style="color:#75715e"></span><span style="color:#66d9ef">delete</span> <span style="color:#66d9ef">from</span> testlog;
<span style="color:#75715e">-- 用delete删除大文件，查询数据文件没有减少,需要optimize进行清除。
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">\</span><span style="color:#f92672">!</span> ls <span style="color:#f92672">/</span>var<span style="color:#f92672">/</span>lib<span style="color:#f92672">/</span>mysql<span style="color:#f92672">/</span>testdb<span style="color:#f92672">/</span>testlog.ibd <span style="color:#f92672">-</span>h 
<span style="color:#66d9ef">optimize</span> <span style="color:#66d9ef">table</span> testlog;
</code></pre></div><h3 id="实验总结">实验总结：</h3>
<pre><code>超过了事务日志的大小的数据文件，事务的操作直接写入数据文件，该操作由于事务日志文件太小导致，建议加大，增加安全；删除大文件的是，有两种方法`truncate testlog;`或者`delete from testlog;`和`optimize table testlog;`进行删除。
</code></pre>
<h2 id="慢查询日志">慢查询日志</h2>
<p><code>slow_query_log</code>，是一个<code>global,sesion,dynamic</code>的变量，支持动态修改</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">show</span> variables <span style="color:#66d9ef">like</span> <span style="color:#e6db74">&#39;slow%&#39;</span>;
<span style="color:#f92672">+---------------------+--------------------+</span>
<span style="color:#f92672">|</span> Variable_name       <span style="color:#f92672">|</span> Value              <span style="color:#f92672">|</span>
<span style="color:#f92672">+---------------------+--------------------+</span>
<span style="color:#f92672">|</span> slow_launch_time    <span style="color:#f92672">|</span> <span style="color:#ae81ff">2</span>                  <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> slow_query_log      <span style="color:#f92672">|</span> OFF                <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> slow_query_log_file <span style="color:#f92672">|</span> localhost<span style="color:#f92672">-</span>slow.log <span style="color:#f92672">|</span>
<span style="color:#f92672">+---------------------+--------------------+</span>
<span style="color:#66d9ef">set</span> global slow_query_log<span style="color:#f92672">=</span><span style="color:#66d9ef">ON</span>;
<span style="color:#75715e">-- ll /var/lib/mysql/hellodb/
</span><span style="color:#75715e"></span><span style="color:#66d9ef">select</span> <span style="color:#a6e22e">sleep</span>(<span style="color:#ae81ff">1</span>),name <span style="color:#66d9ef">from</span> students;
<span style="color:#75715e">-- 查询谁在占用
</span><span style="color:#75715e"></span><span style="color:#66d9ef">show</span> processlist;
</code></pre></div><p>和慢查询相关的设置</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">use</span> hellodb
<span style="color:#75715e">-- 查询时间不少于10s，或者不使用索引，系统自动默认OFF
</span><span style="color:#75715e">-- log_queries_not_using_indexes=OFF
</span><span style="color:#75715e"></span><span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> students;
<span style="color:#75715e">-- 系统自动优化sql语句，可能使用索引或不使用
</span><span style="color:#75715e"></span><span style="color:#66d9ef">explain</span> <span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> students <span style="color:#66d9ef">where</span> name <span style="color:#66d9ef">like</span> <span style="color:#e6db74">&#39;x%&#39;</span><span style="color:#960050;background-color:#1e0010">\</span>G;
<span style="color:#66d9ef">explain</span> <span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> students <span style="color:#66d9ef">where</span> name <span style="color:#66d9ef">like</span> <span style="color:#e6db74">&#39;s%&#39;</span><span style="color:#960050;background-color:#1e0010">\</span>G;
</code></pre></div><p><code>profiling:global,sesion,dynamic</code>,全局，会话，可动态修改的变量，可以根据<code>show profiles</code>，来慢查询一些相对耗时的<code>sql</code>语句,进行优化</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">set</span> profiling<span style="color:#f92672">=</span><span style="color:#66d9ef">ON</span>;
<span style="color:#66d9ef">show</span> variables <span style="color:#66d9ef">like</span> <span style="color:#e6db74">&#39;prof%&#39;</span>;
<span style="color:#f92672">+------------------------+-------+</span>
<span style="color:#f92672">|</span> Variable_name          <span style="color:#f92672">|</span> Value <span style="color:#f92672">|</span>
<span style="color:#f92672">+------------------------+-------+</span>
<span style="color:#f92672">|</span> profiling              <span style="color:#f92672">|</span> <span style="color:#66d9ef">ON</span>    <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> profiling_history_size <span style="color:#f92672">|</span> <span style="color:#ae81ff">15</span>    <span style="color:#f92672">|</span>
<span style="color:#f92672">+------------------------+-------+</span>
<span style="color:#66d9ef">show</span> profiles;
<span style="color:#f92672">+----------+------------+------------------------+</span>
<span style="color:#f92672">|</span> Query_ID <span style="color:#f92672">|</span> Duration   <span style="color:#f92672">|</span> Query                  <span style="color:#f92672">|</span>
<span style="color:#f92672">+----------+------------+------------------------+</span>
<span style="color:#f92672">|</span>        <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span> <span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00041210</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">select</span> <span style="color:#f92672">@@</span>profiling     <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span>        <span style="color:#ae81ff">2</span> <span style="color:#f92672">|</span> <span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">09205547</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> students <span style="color:#f92672">|</span>
<span style="color:#f92672">+----------+------------+------------------------+</span>
<span style="color:#66d9ef">show</span> profile <span style="color:#66d9ef">for</span> query <span style="color:#ae81ff">2</span>;
<span style="color:#f92672">+--------------------------------+----------+</span>
<span style="color:#f92672">|</span> Status                         <span style="color:#f92672">|</span> Duration <span style="color:#f92672">|</span>
<span style="color:#f92672">+--------------------------------+----------+</span>
<span style="color:#f92672">|</span> <span style="color:#66d9ef">starting</span>                       <span style="color:#f92672">|</span> <span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">000016</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> Waiting <span style="color:#66d9ef">for</span> query cache <span style="color:#66d9ef">lock</span>   <span style="color:#f92672">|</span> <span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">000003</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> init                           <span style="color:#f92672">|</span> <span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">000002</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> checking query cache <span style="color:#66d9ef">for</span> query <span style="color:#f92672">|</span> <span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">000144</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> checking permissions           <span style="color:#f92672">|</span> <span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">000010</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> Opening <span style="color:#66d9ef">tables</span>                 <span style="color:#f92672">|</span> <span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">090296</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> After opening <span style="color:#66d9ef">tables</span>           <span style="color:#f92672">|</span> <span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">000014</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> System <span style="color:#66d9ef">lock</span>                    <span style="color:#f92672">|</span> <span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">000045</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#66d9ef">Table</span> <span style="color:#66d9ef">lock</span>                     <span style="color:#f92672">|</span> <span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">000013</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> Waiting <span style="color:#66d9ef">for</span> query cache <span style="color:#66d9ef">lock</span>   <span style="color:#f92672">|</span> <span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">000168</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> init                           <span style="color:#f92672">|</span> <span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">000176</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> optimizing                     <span style="color:#f92672">|</span> <span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">000012</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> statistics                     <span style="color:#f92672">|</span> <span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">000016</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> preparing                      <span style="color:#f92672">|</span> <span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">000019</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> executing                      <span style="color:#f92672">|</span> <span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">000003</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> Sending data                   <span style="color:#f92672">|</span> <span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">000599</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> end                            <span style="color:#f92672">|</span> <span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">000010</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> query end                      <span style="color:#f92672">|</span> <span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">000007</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> closing <span style="color:#66d9ef">tables</span>                 <span style="color:#f92672">|</span> <span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">000004</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> Unlocking <span style="color:#66d9ef">tables</span>               <span style="color:#f92672">|</span> <span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">000015</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> freeing items                  <span style="color:#f92672">|</span> <span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">000007</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> updating status                <span style="color:#f92672">|</span> <span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">000005</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> Waiting <span style="color:#66d9ef">for</span> query cache <span style="color:#66d9ef">lock</span>   <span style="color:#f92672">|</span> <span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">000003</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> updating status                <span style="color:#f92672">|</span> <span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">000419</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> Waiting <span style="color:#66d9ef">for</span> query cache <span style="color:#66d9ef">lock</span>   <span style="color:#f92672">|</span> <span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">000008</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> updating status                <span style="color:#f92672">|</span> <span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">000003</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> storing result <span style="color:#66d9ef">in</span> query cache  <span style="color:#f92672">|</span> <span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">000008</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> cleaning up                    <span style="color:#f92672">|</span> <span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">000034</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">+--------------------------------+----------+</span>
</code></pre></div><h1 id="二进制日志">二进制日志</h1>
<p><strong>记录所有的增删改</strong></p>
<ul>
<li>记录导致数据改变或潜在导致数据改变的SQL语句</li>
<li>记录已提交的日志</li>
<li>不依赖于存储引擎类型</li>
<li>功能：通过“重放”日志文件中的事件来生成数据副本</li>
<li><strong>注意：建议二进制日志和数据文件分开存放</strong></li>
</ul>
<h2 id="二进制日志记录格式">二进制日志记录格式</h2>
<p><strong>二进制日志记录三种格式</strong></p>
<ul>
<li>基于“语句”记录：<code>statement</code>，记录语句，默认模式</li>
<li>基于“行”记录：<code>row</code>，记录数据，日志量较大，<strong>建议使用这个模式</strong></li>
<li>混合模式：<code>mixed</code>, 让系统自行判定该基于哪种方式进行</li>
</ul>
<p><strong>格式查看</strong>：<code>show variables like '%binlog_format%';</code></p>
<p><strong>二进制日志文件的构成</strong></p>
<ul>
<li>
<p>日志文件：<code>mysql|mariadb-bin.文件名后缀</code>，二进制格式</p>
</li>
<li>
<p>索引文件：<code>mysql|mariadb-bin.index</code>，文本格式</p>
</li>
</ul>
<h2 id="二进制日志相关的服务器变量"><strong>二进制日志相关的服务器变量：</strong></h2>
<p><strong>mariadb-10.2.15</strong>:</p>
<p><code>sql_log_bin</code>：<code>global</code>,<code>dynamic</code>，可以动态开启关闭</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">sql_log_bin<span style="color:#f92672">=</span><span style="color:#66d9ef">ON</span><span style="color:#f92672">|</span>OFF<span style="color:#960050;background-color:#1e0010">：</span>
<span style="color:#75715e">-- 是否记录二进制日志，默认ON
</span><span style="color:#75715e"></span>log_bin<span style="color:#f92672">=/</span>PATH<span style="color:#f92672">/</span>BIN_LOG_FILE<span style="color:#960050;background-color:#1e0010">：</span>
<span style="color:#75715e">-- 指定文件位置；默认ON，表示不启用二进制日志功能，上述两项都为ON才可
</span><span style="color:#75715e"></span>max_binlog_size<span style="color:#f92672">=</span><span style="color:#ae81ff">1073741824</span><span style="color:#960050;background-color:#1e0010">：</span>
<span style="color:#75715e">-- 单个二进制日志文件的最大体积，到达最大值会自动滚动，默认为1G
</span><span style="color:#75715e"></span>sync_binlog<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span><span style="color:#f92672">|</span><span style="color:#ae81ff">0</span><span style="color:#960050;background-color:#1e0010">：</span>
<span style="color:#75715e">-- 设定是否启动二进制日志即时同步磁盘功能，默认0，由操作系统负责同步日志到磁盘
</span><span style="color:#75715e"></span>expire_logs_days<span style="color:#f92672">=</span>N<span style="color:#960050;background-color:#1e0010">：</span>
<span style="color:#75715e">-- 二进制日志可以自动删除的天数。 默认为0，即不自动删除
</span><span style="color:#75715e"></span>
</code></pre></div><h2 id="二进制日志相关配置">二进制日志相关配置</h2>
<p><strong>配置相关</strong>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">show</span> master logs;
<span style="color:#66d9ef">show</span> <span style="color:#66d9ef">binary</span> logs;
<span style="color:#75715e">-- 查询二进制的日志文件
</span><span style="color:#75715e"></span><span style="color:#66d9ef">show</span> master status;
<span style="color:#66d9ef">update</span> students <span style="color:#66d9ef">set</span> name<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;xyz&#39;</span> <span style="color:#66d9ef">where</span> stuid<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>;
<span style="color:#66d9ef">show</span> binlog events <span style="color:#66d9ef">in</span> <span style="color:#e6db74">&#39;mysql-bin.000003&#39;</span> <span style="color:#66d9ef">from</span> <span style="color:#ae81ff">1577</span>;
<span style="color:#75715e">-- 重新生成二进制日志文件
</span><span style="color:#75715e"></span><span style="color:#66d9ef">flush</span> logs;
<span style="color:#66d9ef">show</span> master status;
</code></pre></div><h2 id="日志-1">日志</h2>
<p><strong>mysqlbinlog</strong>：二进制日志的客户端命令工具</p>
<p><strong>命令格式：</strong></p>
<pre><code>mysqlbinlog [OPTIONS] log_file…
--start-position=# 指定开始位置
--stop-position=#
--start-datetime= 
--stop-datetime=
</code></pre><p><strong>时间格式</strong>：<code>YYYY-MM-DD hh:mm:ss</code>，<code>--base64-output[=name]</code></p>
<p>查询<code>mysqlbinlog --help</code> 来帮助自己更好理解此命令</p>
<p><strong>示例：</strong></p>
<pre><code>$ mysqlbinlog --start-position=6787 --stop-position=7527 /var/lib/mysql/mariadb-bin.000003
$ mysqlbinlog --start-datetime=&quot;2018-01-30 20:30:10&quot; --stop-datetime=&quot;2018-01-30 20:35:22&quot; mariadb-bin.000003;
</code></pre><h2 id="二进制日志格式">二进制日志格式</h2>
<p><code>mysqlbinlog</code>查询的日志格式如下：</p>
<pre><code>BEGIN
/*!*/;
# at 1619
#180611 14:24:50 server id 1  end_log_pos 1734 CRC32 0x7c5b65fe     
Query	thread_id=15	exec_time=0	error_code=0
SET TIMESTAMP=1528698290/*!*/;
update students set name='xyz' where stuid=10
/*!*/;
# at 1734
事件发生的日期和时间：180611 14:24:50 
事件发生的服务器标识：server id 1
事件的结束位置：end_log_pos 1734
事件的类型：Query
事件发生时所在服务器执行此事件的线程的ID：thread_id=1
语句的时间戳与将其写入二进制文件中的时间差：exec_time=0
错误代码：error_code=0
执行的操作：update students set name='xyz' where stuid=10
</code></pre><h2 id="清除指定二进制日志">清除指定二进制日志</h2>
<p><strong>PURGE:</strong></p>
<ul>
<li>清除指定二进制日志：</li>
</ul>
<pre><code>PURGE { BINARY | MASTER } LOGS
{ TO 'log_name' | BEFORE datetime_expr }
</code></pre><ul>
<li>示例：</li>
</ul>
<pre><code>PURGE BINARY LOGS BEFORE '2018-01-23';
PURGE BINARY LOGS BEFORE '2018-05-22 09:25:30';
</code></pre><ul>
<li>删除所有二进制日志，<code>index</code>文件重新记数</li>
</ul>
<p><code>RESET MASTER [TO #];</code> 日志文件从#开始记数，默认从1开始，一般是<code>master</code>第一次启动时执行，MariaDB10.1.6开始支持<code>TO #</code></p>
<ul>
<li>切换日志文件：<code>FLUSH LOGS</code>，后续备份的<code>mysqldump -F</code>,就是切换日志文件进行备份</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#75715e">-- 清楚000002之前的二进制文件，
</span><span style="color:#75715e"></span>pruge <span style="color:#66d9ef">binary</span> logs <span style="color:#66d9ef">to</span> <span style="color:#e6db74">&#34;mysql-bin.000002&#34;</span>;
<span style="color:#66d9ef">show</span> master logs;
<span style="color:#f92672">+------------------+-----------+</span>
<span style="color:#f92672">|</span> Log_name         <span style="color:#f92672">|</span> File_size <span style="color:#f92672">|</span>
<span style="color:#f92672">+------------------+-----------+</span>
<span style="color:#f92672">|</span> mysql<span style="color:#f92672">-</span>bin.<span style="color:#ae81ff">000002</span> <span style="color:#f92672">|</span>     <span style="color:#ae81ff">10042</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> mysql<span style="color:#f92672">-</span>bin.<span style="color:#ae81ff">000003</span> <span style="color:#f92672">|</span>      <span style="color:#ae81ff">1812</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> mysql<span style="color:#f92672">-</span>bin.<span style="color:#ae81ff">000004</span> <span style="color:#f92672">|</span>       <span style="color:#ae81ff">385</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">+------------------+-----------+</span>
<span style="color:#75715e">-- 删除至000001的二进制文件
</span><span style="color:#75715e"></span>reset master <span style="color:#66d9ef">to</span> <span style="color:#ae81ff">1</span>
</code></pre></div><h1 id="备份和恢复">备份和恢复</h1>
<p><strong>为什么要备份</strong></p>
<ul>
<li>灾难恢复：硬件故障、软件故障、自然灾害、黑客攻击、误操作测试等数据</li>
</ul>
<p><strong>丢失场景</strong></p>
<blockquote>
<p>备份注意要点
能容忍最多丢失多少数据
恢复数据需要在多长时间内完成
需要恢复哪些数据
还原要点
做还原测试，用于测试备份的可用性
还原演练</p>
</blockquote>
<h2 id="备份类型">备份类型：</h2>
<p><strong>完全备份，部分备份</strong></p>
<ul>
<li>完全备份：整个数据集</li>
<li>部分备份：只备份数据子集，如部分库或表</li>
</ul>
<p><strong>完全备份、增量备份、差异备份</strong></p>
<ul>
<li>增量备份：仅备份最近一次完全备份或增量备份（如果存在增量）以来变化的数据，备份较快，还原复杂</li>
<li>差异备份：仅备份最近一次完全备份以来变化的数据，备份较慢，还原简单</li>
</ul>
<p>**注意：**二进制日志文件不应该与数据文件放在同一磁盘</p>
<p><strong>冷、温、热备份</strong></p>
<ul>
<li>冷备：读写操作均不可进行</li>
<li>温备：读操作可执行；但写操作不可执行</li>
<li>热备：读写操作均可执行</li>
</ul>
<blockquote>
<p>MyISAM：温备，不支持热备
InnoDB: 都支持</p>
</blockquote>
<p><strong>物理和逻辑备份</strong></p>
<ul>
<li>
<p>物理备份：直接复制数据文件进行备份，与存储引擎有关，占用较多的空间，速度快</p>
</li>
<li>
<p>逻辑备份：从数据库中“导出”数据另存而进行的备份，与存储引擎无关，占用空间少，速度慢，可能丢失精度</p>
</li>
</ul>
<p><strong>备份时需要考虑的因素</strong></p>
<blockquote>
<p>温备的持锁多久
备份产生的负载
备份过程的时长
恢复过程的时长</p>
</blockquote>
<p><strong>备份什么</strong></p>
<blockquote>
<p>数据
二进制日志、InnoDB的事务日志
程序代码（存储过程、存储函数、触发器、事件调度器）
服务器的配置文件</p>
</blockquote>
<h3 id="冷备份"><strong>冷备份:</strong></h3>
<p>服务器可以停机的情况下,备份加还原</p>
<pre><code>$ systemctl stop mariadb
$ ll /var/lib/mysql/
$ tar -Jcvf /data/all.tar.xz /var/lib/mysql/
$ rm -fr /var/lib/mysql/
$ tar -xf /data/all.tar.xz /var/lib/mysql/
$ mv /var/lib/mysql/var/lib/mysql/* /var/lib/mysql/
$ rm -rf /var/lib/mysql/var
$ systemctl start mariadb
</code></pre><p>未完待续</p>

        </div>
        <!-- tags -->
        <div class="mb-3">
          <h5 class="d-inline-block mr-3">Tags:</h5>
          <ul class="list-inline d-inline-block">
            <a>
            <li class="list-inline-item"><a class="text-color" href="/tags/linux"> 
            Linux</a>
            <a>
            <li class="list-inline-item"><a class="text-color" href="/tags/binlog"> , 
            Binlog</a>
            
          </ul>
        </div>
        <!-- previous -->
        <div class="mb-3 link-article">
    <div class="pre-article">
        
            <div><i class="fa fa-arrow-left"></i> 上一篇</div>
            <a href="https://www.fenghong.tech/blog/2018/2018-06-10-mysql-04/">MYSQL并发控制</a>
        
    </div>
    <div class="next-article">
        
            <div>下一篇 <i class="fa fa-arrow-right"></i></div>
            <a href="https://www.fenghong.tech/blog/2018/2018-06-13-mysql-06/">MYSQL备份</a>
        
    </div>
</div>
        <!-- previous -->

        <!-- recommend -->
        

<div class="mb-3">
  <h2>文章推荐</h2>
  <ul class="related">
  
    <li><a href="/blog/2018/2018-06-10-mysql-04/">MYSQL并发控制</a></li>
  
    <li><a href="/blog/2018/2018-06-10-mysql-03/">MYSQL数据引擎</a></li>
  
    <li><a href="/blog/2018/2018-06-10-mysql-02/">MYSQL数据库原理及操作</a></li>
  
    <li><a href="/blog/2018/2018-06-10-mysql-01/">MYSQL安装及多实例</a></li>
  
    <li><a href="/blog/2018/2018-04-20-linux_router/">Linux下路由配置梳理</a></li>
  
  </ul>
</div>


        <!-- comments -->

        
        <div id="gitalk-container"></div>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
        <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
        <script>
          window.onload = function() {
              const gitalk = new Gitalk({
              clientID: 'a0a546df858aafb5300e',
              clientSecret: '67d7b40de25c072fc38840ffb9c06ceab7ef5080',
              repo: 'oldthreefeng.github.io',
              owner: 'oldthreefeng',
              admin: ['oldthreefeng'],
              id: hex_md5(hex_md5(window.location.pathname + window.location.hash)), 
              distractionFreeMode: false 
            });
            (function() {
              if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
                document.getElementById('gitalk-container').innerHTML = 'Gitalk comments not available by default when the website is previewed locally.';
                return;
              }
              gitalk.render('gitalk-container');
            })();
          }
        </script>
        
      </div>
      <!-- sidebar -->
<aside class="col-lg-4 order-1 order-lg-2">
  <!-- tags -->
  <div class="bg-white px-4 py-5 box-shadow mb-5 word-cloud">
    <h4 class="mb-4">标签</h4>
    
      
      
      
      
      
      
      
      
      
      
      
      <div id="tag-cloud" style="padding: 5px 15px">
      
        
          
          
          
          <a href="/tags/acme" style="font-size:1.0188679245283019rem">acme</a>
        
      
        
          
          
          &middot;
          <a href="/tags/acmetiny" style="font-size:1.0188679245283019rem">acmetiny</a>
        
      
        
          
          
          &middot;
          <a href="/tags/alertmanager" style="font-size:1rem">alertmanager</a>
        
      
        
          
          
          &middot;
          <a href="/tags/algorithm" style="font-size:1.1132075471698113rem">algorithm</a>
        
      
        
          
          
          &middot;
          <a href="/tags/aliyun" style="font-size:1rem">aliyun</a>
        
      
        
          
          
          &middot;
          <a href="/tags/ansible" style="font-size:1.0754716981132075rem">ansible</a>
        
      
        
          
          
          &middot;
          <a href="/tags/apisix" style="font-size:1rem">apisix</a>
        
      
        
          
          
          &middot;
          <a href="/tags/arm64" style="font-size:1.0188679245283019rem">arm64</a>
        
      
        
          
          
          &middot;
          <a href="/tags/authorization" style="font-size:1rem">authorization</a>
        
      
        
          
          
          &middot;
          <a href="/tags/backup" style="font-size:1.0377358490566038rem">backup</a>
        
      
        
          
          
          &middot;
          <a href="/tags/binarysearch" style="font-size:1.0188679245283019rem">binarysearch</a>
        
      
        
          
          
          &middot;
          <a href="/tags/binlog" style="font-size:1rem">binlog</a>
        
      
        
          
          
          &middot;
          <a href="/tags/bit" style="font-size:1.0188679245283019rem">bit</a>
        
      
        
          
          
          &middot;
          <a href="/tags/bug" style="font-size:1.0188679245283019rem">bug</a>
        
      
        
          
          
          &middot;
          <a href="/tags/cache" style="font-size:1rem">cache</a>
        
      
        
          
          
          &middot;
          <a href="/tags/certbot" style="font-size:1rem">certbot</a>
        
      
        
          
          
          &middot;
          <a href="/tags/channel" style="font-size:1rem">channel</a>
        
      
        
          
          
          &middot;
          <a href="/tags/chrome" style="font-size:1.0188679245283019rem">chrome</a>
        
      
        
          
          
          &middot;
          <a href="/tags/ci" style="font-size:1rem">ci</a>
        
      
        
          
          
          &middot;
          <a href="/tags/cluster" style="font-size:1.1132075471698113rem">cluster</a>
        
      
        
          
          
          &middot;
          <a href="/tags/cobra" style="font-size:1rem">cobra</a>
        
      
        
          
          
          &middot;
          <a href="/tags/coco" style="font-size:1.0377358490566038rem">coco</a>
        
      
        
          
          
          &middot;
          <a href="/tags/coding" style="font-size:1rem">coding</a>
        
      
        
          
          
          &middot;
          <a href="/tags/computer" style="font-size:1rem">computer</a>
        
      
        
          
          
          &middot;
          <a href="/tags/consul" style="font-size:1rem">consul</a>
        
      
        
          
          
          &middot;
          <a href="/tags/containerd" style="font-size:1.0188679245283019rem">containerd</a>
        
      
        
          
          
          &middot;
          <a href="/tags/coredns" style="font-size:1rem">coredns</a>
        
      
        
          
          
          &middot;
          <a href="/tags/cors" style="font-size:1rem">cors</a>
        
      
        
          
          
          &middot;
          <a href="/tags/crypto" style="font-size:1rem">crypto</a>
        
      
        
          
          
          &middot;
          <a href="/tags/curl" style="font-size:1rem">curl</a>
        
      
        
          
          
          &middot;
          <a href="/tags/dashboard" style="font-size:1rem">dashboard</a>
        
      
        
          
          
          &middot;
          <a href="/tags/dcdn" style="font-size:1rem">dcdn</a>
        
      
        
          
          
          &middot;
          <a href="/tags/debt" style="font-size:1rem">debt</a>
        
      
        
          
          
          &middot;
          <a href="/tags/devops" style="font-size:1.0188679245283019rem">devops</a>
        
      
        
          
          
          &middot;
          <a href="/tags/dingding" style="font-size:1rem">dingding</a>
        
      
        
          
          
          &middot;
          <a href="/tags/disk" style="font-size:1rem">disk</a>
        
      
        
          
          
          &middot;
          <a href="/tags/dmesg" style="font-size:1rem">dmesg</a>
        
      
        
          
          
          &middot;
          <a href="/tags/dns" style="font-size:1rem">dns</a>
        
      
        
          
          
          &middot;
          <a href="/tags/docker" style="font-size:1.2264150943396226rem">docker</a>
        
      
        
          
          
          &middot;
          <a href="/tags/doublylinkedlist" style="font-size:1rem">doublylinkedlist</a>
        
      
        
          
          
          &middot;
          <a href="/tags/elk" style="font-size:1rem">elk</a>
        
      
        
          
          
          &middot;
          <a href="/tags/error" style="font-size:1rem">error</a>
        
      
        
          
          
          &middot;
          <a href="/tags/etcd" style="font-size:1.0377358490566038rem">etcd</a>
        
      
        
          
          
          &middot;
          <a href="/tags/exec" style="font-size:1.0188679245283019rem">exec</a>
        
      
        
          
          
          &middot;
          <a href="/tags/exp" style="font-size:1rem">exp</a>
        
      
        
          
          
          &middot;
          <a href="/tags/federated" style="font-size:1rem">federated</a>
        
      
        
          
          
          &middot;
          <a href="/tags/filecoin" style="font-size:1rem">filecoin</a>
        
      
        
          
          
          &middot;
          <a href="/tags/find" style="font-size:1rem">find</a>
        
      
        
          
          
          &middot;
          <a href="/tags/firewalld" style="font-size:1rem">firewalld</a>
        
      
        
          
          
          &middot;
          <a href="/tags/fix" style="font-size:1.0377358490566038rem">fix</a>
        
      
        
          
          
          &middot;
          <a href="/tags/flag" style="font-size:1.0188679245283019rem">flag</a>
        
      
        
          
          
          &middot;
          <a href="/tags/flannel" style="font-size:1rem">flannel</a>
        
      
        
          
          
          &middot;
          <a href="/tags/food" style="font-size:1.0188679245283019rem">food</a>
        
      
        
          
          
          &middot;
          <a href="/tags/frp" style="font-size:1.0377358490566038rem">frp</a>
        
      
        
          
          
          &middot;
          <a href="/tags/ftp" style="font-size:1.0188679245283019rem">ftp</a>
        
      
        
          
          
          &middot;
          <a href="/tags/games" style="font-size:1rem">games</a>
        
      
        
          
          
          &middot;
          <a href="/tags/gin" style="font-size:1.0188679245283019rem">gin</a>
        
      
        
          
          
          &middot;
          <a href="/tags/git" style="font-size:1.2075471698113207rem">git</a>
        
      
        
          
          
          &middot;
          <a href="/tags/github" style="font-size:1.0188679245283019rem">github</a>
        
      
        
          
          
          &middot;
          <a href="/tags/gitlab" style="font-size:1rem">gitlab</a>
        
      
        
          
          
          &middot;
          <a href="/tags/go" style="font-size:1.320754716981132rem">go</a>
        
      
        
          
          
          &middot;
          <a href="/tags/go-vim" style="font-size:1rem">go-vim</a>
        
      
        
          
          
          &middot;
          <a href="/tags/gogs" style="font-size:1.0566037735849056rem">gogs</a>
        
      
        
          
          
          &middot;
          <a href="/tags/goland" style="font-size:1.0188679245283019rem">goland</a>
        
      
        
          
          
          &middot;
          <a href="/tags/golang" style="font-size:1.0377358490566038rem">golang</a>
        
      
        
          
          
          &middot;
          <a href="/tags/gorequest" style="font-size:1rem">gorequest</a>
        
      
        
          
          
          &middot;
          <a href="/tags/grafana" style="font-size:1.0188679245283019rem">grafana</a>
        
      
        
          
          
          &middot;
          <a href="/tags/grub" style="font-size:1rem">grub</a>
        
      
        
          
          
          &middot;
          <a href="/tags/hack" style="font-size:1.0188679245283019rem">hack</a>
        
      
        
          
          
          &middot;
          <a href="/tags/haproxy" style="font-size:1.0377358490566038rem">haproxy</a>
        
      
        
          
          
          &middot;
          <a href="/tags/harbor" style="font-size:1.0188679245283019rem">harbor</a>
        
      
        
          
          
          &middot;
          <a href="/tags/hash" style="font-size:1.0188679245283019rem">hash</a>
        
      
        
          
          
          &middot;
          <a href="/tags/hashmap" style="font-size:1rem">hashmap</a>
        
      
        
          
          
          &middot;
          <a href="/tags/helm" style="font-size:1.0188679245283019rem">helm</a>
        
      
        
          
          
          &middot;
          <a href="/tags/hexo" style="font-size:1.0377358490566038rem">hexo</a>
        
      
        
          
          
          &middot;
          <a href="/tags/http" style="font-size:1.0754716981132075rem">http</a>
        
      
        
          
          
          &middot;
          <a href="/tags/https" style="font-size:1rem">https</a>
        
      
        
          
          
          &middot;
          <a href="/tags/index" style="font-size:1rem">index</a>
        
      
        
          
          
          &middot;
          <a href="/tags/ingress" style="font-size:1.0377358490566038rem">ingress</a>
        
      
        
          
          
          &middot;
          <a href="/tags/inotify" style="font-size:1rem">inotify</a>
        
      
        
          
          
          &middot;
          <a href="/tags/internet" style="font-size:1.169811320754717rem">internet</a>
        
      
        
          
          
          &middot;
          <a href="/tags/interview" style="font-size:1rem">interview</a>
        
      
        
          
          
          &middot;
          <a href="/tags/iptables" style="font-size:1.0377358490566038rem">iptables</a>
        
      
        
          
          
          &middot;
          <a href="/tags/ipvs" style="font-size:1.0188679245283019rem">ipvs</a>
        
      
        
          
          
          &middot;
          <a href="/tags/java" style="font-size:1.0754716981132075rem">java</a>
        
      
        
          
          
          &middot;
          <a href="/tags/jeju" style="font-size:1rem">jeju</a>
        
      
        
          
          
          &middot;
          <a href="/tags/jenkins" style="font-size:1.0943396226415094rem">jenkins</a>
        
      
        
          
          
          &middot;
          <a href="/tags/jetbrains" style="font-size:1rem">jetbrains</a>
        
      
        
          
          
          &middot;
          <a href="/tags/jumpserver" style="font-size:1.0566037735849056rem">jumpserver</a>
        
      
        
          
          
          &middot;
          <a href="/tags/jvm" style="font-size:1rem">jvm</a>
        
      
        
          
          
          &middot;
          <a href="/tags/keepalived" style="font-size:1rem">keepalived</a>
        
      
        
          
          
          &middot;
          <a href="/tags/kernel" style="font-size:1rem">kernel</a>
        
      
        
          
          
          &middot;
          <a href="/tags/knowledge" style="font-size:1rem">knowledge</a>
        
      
        
          
          
          &middot;
          <a href="/tags/kube-proxy" style="font-size:1.0188679245283019rem">kube-proxy</a>
        
      
        
          
          
          &middot;
          <a href="/tags/kubernetes" style="font-size:1.3962264150943395rem">kubernetes</a>
        
      
        
          
          
          &middot;
          <a href="/tags/kubernetesrbac" style="font-size:1rem">kubernetesrbac</a>
        
      
        
          
          
          &middot;
          <a href="/tags/kubernetesssl" style="font-size:1.0188679245283019rem">kubernetesssl</a>
        
      
        
          
          
          &middot;
          <a href="/tags/kuboard" style="font-size:1.0566037735849056rem">kuboard</a>
        
      
        
          
          
          &middot;
          <a href="/tags/lb" style="font-size:1rem">lb</a>
        
      
        
          
          
          &middot;
          <a href="/tags/learning" style="font-size:1.0566037735849056rem">learning</a>
        
      
        
          
          
          &middot;
          <a href="/tags/leetcode" style="font-size:1.0188679245283019rem">leetcode</a>
        
      
        
          
          
          &middot;
          <a href="/tags/libcurl" style="font-size:1rem">libcurl</a>
        
      
        
          
          
          &middot;
          <a href="/tags/libssh2" style="font-size:1rem">libssh2</a>
        
      
        
          
          
          &middot;
          <a href="/tags/link" style="font-size:1rem">link</a>
        
      
        
          
          
          &middot;
          <a href="/tags/linux" style="font-size:1.9811320754716981rem">linux</a>
        
      
        
          
          
          &middot;
          <a href="/tags/living" style="font-size:1rem">living</a>
        
      
        
          
          
          &middot;
          <a href="/tags/lnux" style="font-size:1rem">lnux</a>
        
      
        
          
          
          &middot;
          <a href="/tags/log" style="font-size:1.0566037735849056rem">log</a>
        
      
        
          
          
          &middot;
          <a href="/tags/logrus" style="font-size:1rem">logrus</a>
        
      
        
          
          
          &middot;
          <a href="/tags/logs" style="font-size:1rem">logs</a>
        
      
        
          
          
          &middot;
          <a href="/tags/logstash" style="font-size:1rem">logstash</a>
        
      
        
          
          
          &middot;
          <a href="/tags/loki" style="font-size:1rem">loki</a>
        
      
        
          
          
          &middot;
          <a href="/tags/lru" style="font-size:1rem">lru</a>
        
      
        
          
          
          &middot;
          <a href="/tags/luna" style="font-size:1rem">luna</a>
        
      
        
          
          
          &middot;
          <a href="/tags/lvm" style="font-size:1rem">lvm</a>
        
      
        
          
          
          &middot;
          <a href="/tags/lvs" style="font-size:1rem">lvs</a>
        
      
        
          
          
          &middot;
          <a href="/tags/mac" style="font-size:1rem">mac</a>
        
      
        
          
          
          &middot;
          <a href="/tags/malaysia" style="font-size:1rem">malaysia</a>
        
      
        
          
          
          &middot;
          <a href="/tags/manage" style="font-size:1rem">manage</a>
        
      
        
          
          
          &middot;
          <a href="/tags/map" style="font-size:1rem">map</a>
        
      
        
          
          
          &middot;
          <a href="/tags/mariadb" style="font-size:1.0377358490566038rem">mariadb</a>
        
      
        
          
          
          &middot;
          <a href="/tags/markdown" style="font-size:1.0188679245283019rem">markdown</a>
        
      
        
          
          
          &middot;
          <a href="/tags/mfa" style="font-size:1rem">mfa</a>
        
      
        
          
          
          &middot;
          <a href="/tags/mha" style="font-size:1rem">mha</a>
        
      
        
          
          
          &middot;
          <a href="/tags/mode" style="font-size:1rem">mode</a>
        
      
        
          
          
          &middot;
          <a href="/tags/module" style="font-size:1rem">module</a>
        
      
        
          
          
          &middot;
          <a href="/tags/mount" style="font-size:1rem">mount</a>
        
      
        
          
          
          &middot;
          <a href="/tags/mysql" style="font-size:1.2452830188679245rem">mysql</a>
        
      
        
          
          
          &middot;
          <a href="/tags/navicat" style="font-size:1rem">navicat</a>
        
      
        
          
          
          &middot;
          <a href="/tags/network" style="font-size:1rem">network</a>
        
      
        
          
          
          &middot;
          <a href="/tags/nfs" style="font-size:1.0754716981132075rem">nfs</a>
        
      
        
          
          
          &middot;
          <a href="/tags/nginx" style="font-size:1.2264150943396226rem">nginx</a>
        
      
        
          
          
          &middot;
          <a href="/tags/nginxingress" style="font-size:1.0566037735849056rem">nginxingress</a>
        
      
        
          
          
          &middot;
          <a href="/tags/node_exporter" style="font-size:1.0188679245283019rem">node_exporter</a>
        
      
        
          
          
          &middot;
          <a href="/tags/numpy" style="font-size:1rem">numpy</a>
        
      
        
          
          
          &middot;
          <a href="/tags/ops" style="font-size:1.2452830188679245rem">ops</a>
        
      
        
          
          
          &middot;
          <a href="/tags/owncloud" style="font-size:1rem">owncloud</a>
        
      
        
          
          
          &middot;
          <a href="/tags/password" style="font-size:1rem">password</a>
        
      
        
          
          
          &middot;
          <a href="/tags/paxos" style="font-size:1.0188679245283019rem">paxos</a>
        
      
        
          
          
          &middot;
          <a href="/tags/php" style="font-size:1rem">php</a>
        
      
        
          
          
          &middot;
          <a href="/tags/pipeline" style="font-size:1rem">pipeline</a>
        
      
        
          
          
          &middot;
          <a href="/tags/polynomial" style="font-size:1rem">polynomial</a>
        
      
        
          
          
          &middot;
          <a href="/tags/problem" style="font-size:1rem">problem</a>
        
      
        
          
          
          &middot;
          <a href="/tags/prometheus" style="font-size:1.0943396226415094rem">prometheus</a>
        
      
        
          
          
          &middot;
          <a href="/tags/pv" style="font-size:1.0754716981132075rem">pv</a>
        
      
        
          
          
          &middot;
          <a href="/tags/pvc" style="font-size:1.0754716981132075rem">pvc</a>
        
      
        
          
          
          &middot;
          <a href="/tags/python" style="font-size:1.0943396226415094rem">python</a>
        
      
        
          
          
          &middot;
          <a href="/tags/queue" style="font-size:1rem">queue</a>
        
      
        
          
          
          &middot;
          <a href="/tags/qw3xt" style="font-size:1rem">qw3xt</a>
        
      
        
          
          
          &middot;
          <a href="/tags/rabbitmq" style="font-size:1.0188679245283019rem">rabbitmq</a>
        
      
        
          
          
          &middot;
          <a href="/tags/raft" style="font-size:1rem">raft</a>
        
      
        
          
          
          &middot;
          <a href="/tags/rebase" style="font-size:1rem">rebase</a>
        
      
        
          
          
          &middot;
          <a href="/tags/redis" style="font-size:1.0377358490566038rem">redis</a>
        
      
        
          
          
          &middot;
          <a href="/tags/resources" style="font-size:1.0188679245283019rem">resources</a>
        
      
        
          
          
          &middot;
          <a href="/tags/rsa" style="font-size:1rem">rsa</a>
        
      
        
          
          
          &middot;
          <a href="/tags/rsync" style="font-size:1.0188679245283019rem">rsync</a>
        
      
        
          
          
          &middot;
          <a href="/tags/safe" style="font-size:1.0754716981132075rem">safe</a>
        
      
        
          
          
          &middot;
          <a href="/tags/samba" style="font-size:1rem">samba</a>
        
      
        
          
          
          &middot;
          <a href="/tags/sealos" style="font-size:1rem">sealos</a>
        
      
        
          
          
          &middot;
          <a href="/tags/secure" style="font-size:1rem">secure</a>
        
      
        
          
          
          &middot;
          <a href="/tags/sed" style="font-size:1rem">sed</a>
        
      
        
          
          
          &middot;
          <a href="/tags/server" style="font-size:1.2075471698113207rem">server</a>
        
      
        
          
          
          &middot;
          <a href="/tags/sftp" style="font-size:1rem">sftp</a>
        
      
        
          
          
          &middot;
          <a href="/tags/shadowsocks" style="font-size:1.0188679245283019rem">shadowsocks</a>
        
      
        
          
          
          &middot;
          <a href="/tags/shell" style="font-size:1.0188679245283019rem">shell</a>
        
      
        
          
          
          &middot;
          <a href="/tags/slap" style="font-size:1rem">slap</a>
        
      
        
          
          
          &middot;
          <a href="/tags/slave" style="font-size:1rem">slave</a>
        
      
        
          
          
          &middot;
          <a href="/tags/slb" style="font-size:1rem">slb</a>
        
      
        
          
          
          &middot;
          <a href="/tags/slowquery" style="font-size:1rem">slowquery</a>
        
      
        
          
          
          &middot;
          <a href="/tags/sonar" style="font-size:1.0377358490566038rem">sonar</a>
        
      
        
          
          
          &middot;
          <a href="/tags/sourcetree" style="font-size:1.0188679245283019rem">sourcetree</a>
        
      
        
          
          
          &middot;
          <a href="/tags/sql" style="font-size:1.0188679245283019rem">sql</a>
        
      
        
          
          
          &middot;
          <a href="/tags/ss" style="font-size:1rem">ss</a>
        
      
        
          
          
          &middot;
          <a href="/tags/ssh" style="font-size:1.0754716981132075rem">ssh</a>
        
      
        
          
          
          &middot;
          <a href="/tags/ssl" style="font-size:1.1132075471698113rem">ssl</a>
        
      
        
          
          
          &middot;
          <a href="/tags/stack" style="font-size:1rem">stack</a>
        
      
        
          
          
          &middot;
          <a href="/tags/stress" style="font-size:1rem">stress</a>
        
      
        
          
          
          &middot;
          <a href="/tags/style" style="font-size:1rem">style</a>
        
      
        
          
          
          &middot;
          <a href="/tags/switchyomega" style="font-size:1rem">switchyomega</a>
        
      
        
          
          
          &middot;
          <a href="/tags/syncd" style="font-size:1rem">syncd</a>
        
      
        
          
          
          &middot;
          <a href="/tags/taint" style="font-size:1rem">taint</a>
        
      
        
          
          
          &middot;
          <a href="/tags/tar" style="font-size:1rem">tar</a>
        
      
        
          
          
          &middot;
          <a href="/tags/tcp" style="font-size:1.0188679245283019rem">tcp</a>
        
      
        
          
          
          &middot;
          <a href="/tags/testing" style="font-size:1rem">testing</a>
        
      
        
          
          
          &middot;
          <a href="/tags/tomcat" style="font-size:1rem">tomcat</a>
        
      
        
          
          
          &middot;
          <a href="/tags/tour" style="font-size:1.0188679245283019rem">tour</a>
        
      
        
          
          
          &middot;
          <a href="/tags/trojan" style="font-size:1rem">trojan</a>
        
      
        
          
          
          &middot;
          <a href="/tags/ubuntu" style="font-size:1.0566037735849056rem">ubuntu</a>
        
      
        
          
          
          &middot;
          <a href="/tags/udp" style="font-size:1rem">udp</a>
        
      
        
          
          
          &middot;
          <a href="/tags/uk8s" style="font-size:1rem">uk8s</a>
        
      
        
          
          
          &middot;
          <a href="/tags/unauthorized" style="font-size:1rem">unauthorized</a>
        
      
        
          
          
          &middot;
          <a href="/tags/unblockneteasemusic" style="font-size:1rem">unblockneteasemusic</a>
        
      
        
          
          
          &middot;
          <a href="/tags/upgrade" style="font-size:1.0188679245283019rem">upgrade</a>
        
      
        
          
          
          &middot;
          <a href="/tags/upstream" style="font-size:1rem">upstream</a>
        
      
        
          
          
          &middot;
          <a href="/tags/v1.18.3" style="font-size:1rem">v1.18.3</a>
        
      
        
          
          
          &middot;
          <a href="/tags/vim" style="font-size:1rem">vim</a>
        
      
        
          
          
          &middot;
          <a href="/tags/virtul" style="font-size:1rem">virtul</a>
        
      
        
          
          
          &middot;
          <a href="/tags/vpn" style="font-size:1.0754716981132075rem">vpn</a>
        
      
        
          
          
          &middot;
          <a href="/tags/vscode" style="font-size:1rem">vscode</a>
        
      
        
          
          
          &middot;
          <a href="/tags/websocket" style="font-size:1rem">websocket</a>
        
      
        
          
          
          &middot;
          <a href="/tags/wifi" style="font-size:1rem">wifi</a>
        
      
        
          
          
          &middot;
          <a href="/tags/xshell" style="font-size:1rem">xshell</a>
        
      
        
          
          
          &middot;
          <a href="/tags/xtrabackup" style="font-size:1rem">xtrabackup</a>
        
      
        
          
          
          &middot;
          <a href="/tags/yum" style="font-size:1rem">yum</a>
        
      
        
          
          
          &middot;
          <a href="/tags/zabbix" style="font-size:1rem">zabbix</a>
        
      
        
          
          
          &middot;
          <a href="/tags/%e6%95%b0%e6%8d%ae%e5%ba%93%e5%8e%9f%e7%90%86" style="font-size:1rem">数据库原理</a>
        
      
        
          
          
          &middot;
          <a href="/tags/%e8%b4%aa%e5%bf%83%e7%ae%97%e6%b3%95" style="font-size:1rem">贪心算法</a>
        
      
      </div>
    
  </div>

  <!-- profile -->
  <!-- toc -->
  
  <div class="bg-white px-4 py-5 box-shadow mb-5 sticky-top">
    <h4 class="mb-4">目录</h4>
    <nav id="TableOfContents">
  <ul>
    <li><a href="#事务日志">事务日志</a>
      <ul>
        <li><a href="#innodb事务日志相关配置">Innodb事务日志相关配置：</a></li>
      </ul>
    </li>
    <li><a href="#错误日志">错误日志</a></li>
    <li><a href="#通用日志">通用日志</a></li>
    <li><a href="#实验">实验</a>
      <ul>
        <li><a href="#准备工作">准备工作</a></li>
        <li><a href="#生成大文件脚本">生成大文件脚本</a></li>
        <li><a href="#使用相关脚本实验">使用相关脚本实验</a></li>
        <li><a href="#实验总结">实验总结：</a></li>
      </ul>
    </li>
    <li><a href="#慢查询日志">慢查询日志</a></li>
  </ul>

  <ul>
    <li><a href="#二进制日志记录格式">二进制日志记录格式</a></li>
    <li><a href="#二进制日志相关的服务器变量"><strong>二进制日志相关的服务器变量：</strong></a></li>
    <li><a href="#二进制日志相关配置">二进制日志相关配置</a></li>
    <li><a href="#日志-1">日志</a></li>
    <li><a href="#二进制日志格式">二进制日志格式</a></li>
    <li><a href="#清除指定二进制日志">清除指定二进制日志</a></li>
  </ul>

  <ul>
    <li><a href="#备份类型">备份类型：</a>
      <ul>
        <li><a href="#冷备份"><strong>冷备份:</strong></a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>

</aside>
<!-- /sidebar -->

    </div>
  </div>
</section>
<!-- /blog details -->



<footer>
	
	<div class="section bg-secondary">
		<div class="container">
			<div class="row justify-content-between">
				
				<div class="col-lg-5 mb-5 mb-lg-0">
					
					<a class="mb-4 d-inline-block" href="/"><img class="img-fluid"
																								src="/images/images/logo-alt.png" alt="Louis Blog" width="60%"></a>
					<p class="text-light mb-5">每一个不曾起舞的日子都是对生命的辜负.</p>
					<h4 class="text-white mb-4">关注我</h4>
					
					<ul class="list-inline social-icon-alt">
						
						<li class="list-inline-item">
							<a class="hover-ripple" href="https://twitter.com/louishong17"><i class="fa fa-twitter"></i></a>
						</li>
						
						<li class="list-inline-item">
							<a class="hover-ripple" href="https://github.com/oldthreefeng"><i class="fa fa-github"></i></a>
						</li>
						
						<li class="list-inline-item">
							<a class="hover-ripple" href="/contact"><i class="fa fa-wechat"></i></a>
						</li>
						
						<li class="list-inline-item">
							<a class="hover-ripple" href="mailto:992165098@qq.com"><i class="fa fa-envelope"></i></a>
						</li>
						
						<li class="list-inline-item">
							<a class="hover-ripple" href="https://www.fenghong.tech/blog/index.xml"><i class="fa fa-rss"></i></a>
						</li>
						
					</ul>
				</div>
				<div class="col-lg-5 mb-5 mb-lg-0">
					
					
					
					
					
					<div class="mb-5">
						<h4 class="text-white mb-4">联系信息</h4>
						<p class="text-light mb-3">上海 · 浦东新区</p>
						<p class="text-light mb-3"></p>
						<p class="text-light mb-3">微信联系方式</p>
						<p class="text-light mb-3"><img src="/images/images/wechat-qrcode.png" width="356px"></p>
					</div>
					
					
				</div>
			</div>
		</div>
	</div>
	
	<div class="bg-secondary-darken py-4">
		<div class="container">
			<div class="row">
				<div class="col-md-6 text-center text-md-left mb-3 mb-md-0">
					<p class="mb-0 text-white">Copyright © 2020 Louis</p>
				</div>
				<div class="col-md-6 text-center text-md-right">
					<ul class="list-inline">
						
						<li class="list-inline-item mx-0"><a class="d-inline-block px-3 text-white" href="https://beian.miit.gov.cn/"
																									class="text-white">鄂ICP备18027870号-1</a></li>
						<p class="list-inline-item mx-0 text-white">本网站由</p>
						<a target="_blank" rel="nofollow noopener" href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral"><img src="https://pic.fenghong.tech/images/180803_logo30.png" style="margin-bottom:5px;height: 25px;"></a>
						<p class="list-inline-item mx-0 text-white">提供CDN加速/云存储服务</p>
						
					</ul>
				</div>
			</div>
		</div>
	</div>
</footer>



<script>
	var indexURL = "/index.json"
</script>


<!-- JS Plugins -->

<script src="/plugins/jQuery/jquery.min.js"></script>

<script src="/plugins/bootstrap/bootstrap.min.js"></script>

<script src="/plugins/slick/slick.min.js"></script>

<script src="/plugins/google-map/gmap.js"></script>

<script src="/plugins/venobox/venobox.min.js"></script>

<script src="/plugins/filterizr/jquery.filterizr.min.js"></script>

<script src="/plugins/search/fuse.min.js"></script>

<script src="/plugins/search/mark.js"></script>

<script src="/plugins/search/search.js"></script>

<script src="/plugins/bigPicture/bigPicture.js"></script>

<script src="/plugins/hex_md5/hex_md5.js"></script>


<!-- Main Script -->

<script src="/js/script.min.js"></script>

<!-- Algolia -->
<script src="https://cdn.jsdelivr.net/npm/docsearch.js@2.6.3/dist/cdn/docsearch.min.js"></script>
<script>
	docsearch({
		apiKey: 'b4d47f0c039a84d4035305be829404dd',
		indexName: 'DocSearch',
		appId: 'CTH4P282IZ',
		inputSelector: '#js-algolia-btn',
		debug: false,
	});
</script>

<!-- google analitycs -->

<script>
	(function (i, s, o, g, r, a, m) {
		i['GoogleAnalyticsObject'] = r;
		i[r] = i[r] || function () {
			(i[r].q = i[r].q || []).push(arguments)
		}, i[r].l = 1 * new Date();
		a = s.createElement(o),
			m = s.getElementsByTagName(o)[0];
		a.async = 1;
		a.src = g;
		m.parentNode.insertBefore(a, m)
	})(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
ga('create', 'UA-130595069-1', 'auto');
ga('send', 'pageview');
</script>


<script>
	(function(){
		var bp = document.createElement('script');
		var curProtocol = window.location.protocol.split(':')[0];
		if (curProtocol === 'https'){
			bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
		}
		else{
			bp.src = 'http://push.zhanzhang.baidu.com/push.js';
		}
		var s = document.getElementsByTagName("script")[0];
		s.parentNode.insertBefore(bp, s);
	})();
</script>
</body>

</html>