<!DOCTYPE html>

<html lang="zh-cn"><head>
  <meta charset="utf-8">
  <title>Http(Apache2) | Louis Blog</title>

  <!-- mobile responsive meta -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="æœ‰æŠ€æœ¯ æœ‰æ¸©åº¦ æœ‰æƒ…æ€€">
  
  <meta name="author" content="Louis ">
  <meta name="generator" content="Hugo 0.73.0" />

  <!-- plugins -->
  
  <link rel="stylesheet" href="/plugins/bootstrap/bootstrap.min.css">
  
  <link rel="stylesheet" href="/plugins/slick/slick.css">
  
  <link rel="stylesheet" href="/plugins/fontawesome/font-awesome.min.css">
  
  <link rel="stylesheet" href="/plugins/animate/animate.css">
  
  <link rel="stylesheet" href="/plugins/venobox/venobox.css">
  

  <!-- Main Stylesheet -->
  
  <link rel="stylesheet" href="/scss/style.min.css" media="screen">

  <!--Favicon-->
  <link rel="shortcut icon" href="/images/images/favicon.png " type="image/x-icon">
  <link rel="icon" href="/images/images/favicon.png " type="image/x-icon">

  <!--Algolia-->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2.6.3/dist/cdn/docsearch.min.css">
</head>
<body>
<!-- header -->
<header>
  

  <!-- navigation -->
  <div class="navigation bg-white position-relative">
    <div class="container">
      <nav class="navbar navbar-expand-lg navbar-light bg-white">
        <a class="navbar-brand" href="/"><img class="img-fluid pb-lg-3" src="/images/images/logo.png" width="189px" alt="Louis Blog"></a>
        <button class="navbar-toggler border-0" type="button" data-toggle="collapse" data-target="#navigation"
          aria-controls="navigation" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse text-center" id="navigation">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item">
              <a class="nav-link" href="/"></a>
            </li>
            
            
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-haspopup="true"
                aria-expanded="false">
                åšå®¢
              </a>
              <div class="dropdown-menu" >
                
                <a class="dropdown-item" href="/categories/kubernetes">Kubernetes</a>
                
                <a class="dropdown-item" href="/categories/sealos">sealos</a>
                
                <a class="dropdown-item" href="/categories/ops">è¿ç»´ç›¸å…³</a>
                
                <a class="dropdown-item" href="/categories/golang">golang</a>
                
                <a class="dropdown-item" href="/categories/algorithm">algorithm</a>
                
                <a class="dropdown-item" href="/categories/tools">tools</a>
                
                <a class="dropdown-item" href="/blog">å…¨éƒ¨</a>
                
              </div>
            </li>
            
            
            
            <li class="nav-item">
              <a class="nav-link" href="/team">å‹æƒ…é“¾æ¥</a>
            </li>
            
            
            
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-haspopup="true"
                aria-expanded="false">
                å…³äºæˆ‘
              </a>
              <div class="dropdown-menu" >
                
                <a class="dropdown-item" href="/contact">about</a>
                
                <a class="dropdown-item" href="https://github.com/oldthreefeng">github</a>
                
              </div>
            </li>
            
            
          </ul>

          
          

          
          <!-- search -->
          <div class="search px-4">
            <button id="searchOpen" class="search-btn"><i class="fa fa-search text-dark"></i></button>
            <div class="search-wrapper">
              <form action="/search">
                <input class="search-box form-control" id="js-algolia-btn" name="s" type="search" placeholder="è¾“å…¥æœç´¢è¯">
              </form>
              <button id="searchClose" class="search-close"><i class="fa fa-close text-dark"></i></button>
            </div>
          </div>
          
          
          <!-- get start btn -->
          <a href="/contact" class="btn btn-primary hover-ripple">è”ç³»æˆ‘</a>
          
        </div>
      </nav>
    </div>
  </div>
  <!-- /navigation -->
</header>
<!-- /header -->


<!-- page title -->
<section class="section bg-cover overlay" style="background-image: url('/'),url('/'),url('/images/images/backgrounds/page-title.jpg');">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <h2 class="text-white mb-3">Http(Apache2)</h2>
        <!-- breadcrumb -->
        
        <p class="text-white"></p>
      </div>
    </div>
  </div>
</section>
<!-- /page title -->


<!-- blog details -->
<section class="section">
  <div class="container blog">
    <div class="row">
      <div class="col-lg-8">
        <!-- post thumb -->
        <div class="position-relative mb-5">
          <img src="/"  onerror="this.src='https:\/\/pic.fenghong.tech\/proto\/fox-275958__340.jpg'" alt="post thumb" class="img-fluid w-100">
           <div class="card-type">Http</div>
        </div>
        <div class="card-meta text-uppercase mb-2">ä½œè€…  <strong class="text-dark"><a href="https://www.fenghong.tech">Louis</a></strong>
          
            å‘è¡¨äº <strong class="text-dark">2018å¹´6æœˆ21æ—¥</strong></div>
        <hr>
        <div class="content">
          <p>æ‘˜è¦ï¼šå‹åŠ›æµ‹è¯•å·¥å…·abï¼Œè®¿é—®å·¥å…·curlï¼ŒhttpçŠ¶æ€ç ï¼Œhttpsçš„å®ç°è¿‡ç¨‹</p>
<h1 id="å‹åŠ›æµ‹è¯•å·¥å…·ab">å‹åŠ›æµ‹è¯•å·¥å…·<code>ab</code></h1>
<p>â€‹	httpdçš„å‹åŠ›æµ‹è¯•å·¥å…·ï¼Œè¿™é‡Œä¸»è¦ä»‹ç»<code>ab</code></p>
<p><code>ab [OPTIONS] URL</code>ï¼Œæ¥è‡ª<code>httpd-tools</code>åŒ…</p>
<p><code>optionsï¼š</code></p>
<blockquote>
<p>-nï¼šæ€»è¯·æ±‚æ•°
-cï¼šæ¨¡æ‹Ÿçš„å¹¶è¡Œæ•°
-kï¼šä»¥æŒä¹…è¿æ¥æ¨¡å¼æµ‹è¯•
ulimit â€“n # è°ƒæ•´èƒ½æ‰“å¼€çš„æ–‡ä»¶æ•°</p>
</blockquote>
<pre><code>$ ab -c 100 -n 2000 http://192.168.1.8/huge.txt
Server Software:        Apache
Server Hostname:        172.20.114.173
Server Port:            80
Document Path:          /index.html
Document Length:        27 bytes
Concurrency Level:      100
Time taken for tests:   0.582 seconds
Complete requests:      1000
Failed requests:        0
Write errors:           0
Total transferred:      272000 bytes
HTML transferred:       27000 bytes
Requests per second:    1718.83 [#/sec] (mean)
Time per request:       58.179 [ms] (mean)
Time per request:       0.582 [ms] (mean, across all concurrent requests)
Transfer rate:          456.57 [Kbytes/sec] received
Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:        0    6  27.6      3     361
Processing:     5   50 105.8     17     387
Waiting:        1   49 105.4     17     387
Total:         12   56 108.6     22     393
Percentage of the requests served within a certain time (ms)
  50%     22
  66%     23
  75%     24
  80%     24
  90%     29
  95%    384
  98%    389
  99%    390
 100%    393 (longest request)
</code></pre><p>abå‘½ä»¤åœ¨ä¸€èˆ¬ç³»ç»Ÿä¸Šé¢åšæµ‹è¯•æ—¶å€™ï¼Œä¸€èˆ¬å¹¶å‘ä¸èƒ½è¶…è¿‡1024ä¸ªï¼Œå…¶å®æ˜¯å› ä¸ºå› ä¸ºç³»ç»Ÿé™åˆ¶æ¯ä¸ªè¿›ç¨‹æ‰“å¼€çš„æœ€å¤§æ–‡ä»¶æ•°ä¸º1024ï¼Œå¯ä»¥ç”¨ulimit -aæ¥æŸ¥çœ‹</p>
<h1 id="curl">curl</h1>
<p>â€‹	curlæ˜¯åŸºäºURLè¯­æ³•åœ¨å‘½ä»¤è¡Œæ–¹å¼ä¸‹å·¥ä½œçš„æ–‡ä»¶ä¼ è¾“å·¥å…·ï¼Œå®ƒæ”¯æŒFTP, FTPS,HTTP, HTTPS, GOPHER, TELNET, DICT, FILEåŠLDAPç­‰åè®®ã€‚curlæ”¯æŒHTTPSè®¤è¯ï¼Œå¹¶ä¸”æ”¯æŒHTTPçš„POSTã€PUTç­‰æ–¹æ³•ï¼Œ FTPä¸Šä¼ ï¼Œ <code>kerberos</code>è®¤è¯ï¼ŒHTTPä¸Šä¼ ï¼Œä»£ç†æœåŠ¡å™¨ï¼Œcookiesï¼Œç”¨æˆ·å/å¯†ç è®¤è¯ï¼Œ ä¸‹è½½æ–‡ä»¶æ–­ç‚¹ç»­ä¼ ï¼Œä¸Šè½½æ–‡ä»¶æ–­ç‚¹ç»­ä¼ , httpä»£ç†æœåŠ¡å™¨ç®¡é“ï¼ˆ <code>proxy tunneling</code>ï¼‰ï¼Œè¿˜æ”¯æŒIPv6ï¼Œsocks5ä»£ç†æœåŠ¡å™¨ï¼Œé€šè¿‡httpä»£ç†æœåŠ¡å™¨ä¸Šä¼ æ–‡ä»¶åˆ°FTPæœåŠ¡å™¨ç­‰ï¼ŒåŠŸèƒ½ååˆ†å¼ºå¤§.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ curl -I 192.168.1.8
$ curl -v 192.168.1.8
$ curl -A <span style="color:#e6db74">&#34;ie20&#34;</span> 192.168.1.8
$ curl -e <span style="color:#e6db74">&#34;www.baidu.com&#34;</span> 192.168.1.8
$ curl http://192.168.1.8/f1.sh -O
$ curl http://192.168.1.8/f1.sh -o f11.sh
$ curl http://192.168.1.8/f1.sh |bash
$ curl -c cookie.txt 192.168.1.8/setcookie.php 
$ cat cookie.txt 
<span style="color:#75715e"># Netscape HTTP Cookie File</span>
<span style="color:#75715e"># http://curl.haxx.se/docs/http-cookies.html</span>
<span style="color:#75715e"># This file was generated by libcurl! Edit at your own risk.</span>
192.168.1.8	FALSE	/	FALSE	0	title	ceo
192.168.1.8	FALSE	/	FALSE	1529553543	name	wang
</code></pre></div><h1 id="httpåè®®ç›¸å…³">HTTPåè®®ç›¸å…³</h1>
<p>â€‹	httpè¯·æ±‚æŠ¥æ–‡çš„æ¨¡æ‹ŸçŠ¶æ€</p>
<pre><code>$telnet 192.168.1.8 80
Trying 192.168.1.8...
Connected to 192.168.1.8.
Escape character is '^]'.
GET /index.html HTTP/1.1
host: 2.2.2.2      //éœ€è¦enterä¸¤ä¸‹ï¼Œæäº¤æŠ¥æ–‡

HTTP/1.1 200 OK
Date: Thu, 21 Jun 2018 06:37:23 GMT
Server: Apache
Last-Modified: Thu, 21 Jun 2018 06:28:49 GMT
ETag: &quot;11-56f210742b912&quot;
Accept-Ranges: bytes
Content-Length: 17
Content-Type: text/html; charset=UTF-8

welcome to hong~
</code></pre><p><img src="https://pic.fenghong.tech/others/1529463184589.png" alt="1529463184589"></p>
<p>â€‹	httpå“åº”æŠ¥æ–‡çŠ¶æ€çš„è·å–æŸ¥çœ‹ï¼Œåˆ©ç”¨<code>curl -I URL</code></p>
<pre><code>$curl -I 192.168.1.8
HTTP/1.1 200 OK
Date: Thu, 21 Jun 2018 06:19:20 GMT
Server: Apache
Last-Modified: Wed, 20 Jun 2018 15:29:42 GMT
ETag: &quot;e-56f1477b8b86d&quot;
Accept-Ranges: bytes
Content-Length: 14
Content-Type: text/html; charset=UTF-8
</code></pre><p><img src="https://pic.fenghong.tech/others/1529560348043.png" alt="1529560348043"></p>
<p>åè®®æŸ¥çœ‹æˆ–åˆ†æçš„å·¥å…·ï¼š<code>tcpdump</code>, <code>wireshark</code>,<code>tshark</code></p>
<h2 id="httpçŠ¶æ€ç ">httpçŠ¶æ€ç </h2>
<p>â€‹	å¸¸è§ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code>1xxï¼š100-101  ä¿¡æ¯æç¤º
2xxï¼š200-206  æˆåŠŸ
3xxï¼š300-305  é‡å®šå‘
4xxï¼š400-415  é”™è¯¯ç±»ä¿¡æ¯ï¼Œå®¢æˆ·ç«¯é”™è¯¯
5xxï¼š500-505  é”™è¯¯ç±»ä¿¡æ¯ï¼ŒæœåŠ¡å™¨ç«¯é”™è¯¯
</code></pre><p>â€‹	è¯¦ç»†çŠ¶æ€ç å¦‚ä¸‹ï¼š</p>
<pre><code>200ï¼š æˆåŠŸï¼Œè¯·æ±‚æ•°æ®é€šè¿‡å“åº”æŠ¥æ–‡çš„entity-bodyéƒ¨åˆ†å‘é€;OK
301ï¼š è¯·æ±‚çš„URLæŒ‡å‘çš„èµ„æºå·²ç»è¢«åˆ é™¤ï¼›ä½†åœ¨å“åº”æŠ¥æ–‡ä¸­é€šè¿‡é¦–éƒ¨LocationæŒ‡æ˜äº†èµ„æºç°åœ¨æ‰€å¤„çš„æ–°ä½ç½®ï¼›Moved Permanently
302ï¼š å“åº”æŠ¥æ–‡LocationæŒ‡æ˜èµ„æºä¸´æ—¶æ–°ä½ç½® Moved Temporarily
304ï¼š å®¢æˆ·ç«¯å‘å‡ºäº†æ¡ä»¶å¼è¯·æ±‚ï¼Œä½†æœåŠ¡å™¨ä¸Šçš„èµ„æºæœªæ›¾å‘ç”Ÿæ”¹å˜ï¼Œåˆ™é€šè¿‡å“åº”æ­¤å“åº”çŠ¶æ€ç é€šçŸ¥å®¢æˆ·ç«¯ï¼›Not Modified
401ï¼š éœ€è¦è¾“å…¥è´¦å·å’Œå¯†ç è®¤è¯æ–¹èƒ½è®¿é—®èµ„æºï¼›Unauthorized
403ï¼š è¯·æ±‚è¢«ç¦æ­¢ï¼›Forbidden
404ï¼š æœåŠ¡å™¨æ— æ³•æ‰¾åˆ°å®¢æˆ·ç«¯è¯·æ±‚çš„èµ„æºï¼›Not Found
500ï¼š æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ï¼›Internal Server Error
502ï¼š ä»£ç†æœåŠ¡å™¨ä»åç«¯æœåŠ¡å™¨æ”¶åˆ°äº†ä¸€æ¡ä¼ªå“åº”ï¼Œå¦‚æ— æ³•è¿æ¥åˆ°ç½‘å…³ï¼›BadGateway
503:   æœåŠ¡ä¸å¯ç”¨ï¼Œä¸´æ—¶æœåŠ¡å™¨ç»´æŠ¤æˆ–è¿‡è½½ï¼ŒæœåŠ¡å™¨æ— æ³•å¤„ç†è¯·æ±‚
504:   ç½‘å…³è¶…æ—¶
</code></pre><h1 id="cookie">Cookie</h1>
<p>â€‹	HTTP æ˜¯ä¸€ç§æ— çŠ¶æ€åè®®ã€‚åè®®è‡ªèº«ä¸å¯¹è¯·æ±‚å’Œå“åº”ä¹‹é—´çš„é€šä¿¡çŠ¶æ€è¿›è¡Œä¿å­˜ã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨ HTTP è¿™ä¸ªçº§åˆ«ï¼Œåè®®å¯¹äºå‘é€è¿‡çš„è¯·æ±‚æˆ–å“åº”éƒ½ä¸åšæŒä¹…åŒ–å¤„ç†ã€‚è¿™æ˜¯ä¸ºäº†æ›´å¿«åœ°å¤„ç†å¤§é‡äº‹åŠ¡ï¼Œç¡®ä¿åè®®çš„å¯ä¼¸ç¼©æ€§ï¼Œè€Œç‰¹æ„æŠŠ HTTP åè®®è®¾è®¡æˆå¦‚æ­¤ç®€å•çš„ã€‚å¯æ˜¯éšç€ Web çš„ä¸æ–­å‘å±•ï¼Œå¾ˆå¤šä¸šåŠ¡éƒ½éœ€è¦å¯¹é€šä¿¡çŠ¶æ€è¿›è¡Œä¿å­˜ã€‚äºæ˜¯å¼•å…¥äº† Cookie æŠ€æœ¯ã€‚ä½¿ç”¨ Cookie çš„çŠ¶æ€ç®¡ç†Cookie æŠ€æœ¯é€šè¿‡åœ¨è¯·æ±‚å’Œå“åº”æŠ¥æ–‡ä¸­å†™å…¥ Cookie ä¿¡æ¯æ¥æ§åˆ¶å®¢æˆ·ç«¯çš„çŠ¶æ€ã€‚Cookie ä¼šæ ¹æ®ä»æœåŠ¡å™¨ç«¯å‘é€çš„å“åº”æŠ¥æ–‡å†…çš„ä¸€ä¸ªå«åš <code>Set-Cookie</code> çš„é¦–éƒ¨å­—æ®µä¿¡æ¯ï¼Œé€šçŸ¥å®¢æˆ·ç«¯ä¿å­˜Cookieã€‚å½“ä¸‹æ¬¡å®¢æˆ·ç«¯å†å¾€è¯¥æœåŠ¡å™¨å‘é€è¯·æ±‚æ—¶ï¼Œå®¢æˆ·ç«¯ä¼šè‡ªåŠ¨åœ¨è¯·æ±‚æŠ¥æ–‡ä¸­åŠ å…¥ Cookie å€¼åå‘é€å‡ºå»ã€‚æœåŠ¡å™¨ç«¯å‘ç°å®¢æˆ·ç«¯å‘é€è¿‡æ¥çš„ Cookie åï¼Œä¼šå»æ£€æŸ¥ç©¶ç«Ÿæ˜¯ä»å“ªä¸€ä¸ªå®¢æˆ·ç«¯å‘æ¥çš„è¿æ¥è¯·æ±‚ï¼Œç„¶åå¯¹æ¯”æœåŠ¡å™¨ä¸Šçš„è®°å½•ï¼Œæœ€åå¾—åˆ°ä¹‹å‰çš„çŠ¶æ€ä¿¡æ¯ã€‚</p>
<p><img src="https://pic.fenghong.tech/others/1529477372443.png" alt="1529477372443"></p>
<pre><code>$ yum install php
$ cd /var/www/html
$ vim setcookie.php
&lt;?php&gt;
setcookie(&quot;title&quot;,'ceo');
setcookie(&quot;name&quot;,'wang',time()+86400);
?&gt;
$ systemctl restart httpd
$ curl -v 192.168.1.8/setcookie.php
* About to connect() to 192.168.1.8 port 80 (#0)
*   Trying 192.168.1.8...
* Connected to 192.168.1.8 (192.168.1.8) port 80 (#0)
&gt; GET /setcookie.php HTTP/1.1
&gt; User-Agent: curl/7.29.0
&gt; Host: 192.168.1.8
&gt; Accept: */*
&gt; 
&lt; HTTP/1.1 200 OK
&lt; Date: Thu, 21 Jun 2018 06:40:31 GMT
&lt; Server: Apache
&lt; X-Powered-By: PHP/5.4.16
&lt; Set-Cookie: title=ceo
&lt; Set-Cookie: name=wang; expires=Fri, 22-Jun-2018 06:40:32 GMT
&lt; Content-Length: 0
&lt; Content-Type: text/html; charset=UTF-8
&lt; 
* Connection #0 to host 192.168.1.8 left intact
</code></pre><h1 id="https">HTTPS</h1>
<ul>
<li>httpsï¼š<code>http over ssl</code></li>
<li>SSLä¼šè¯çš„ç®€åŒ–è¿‡ç¨‹</li>
</ul>
<blockquote>
<ol>
<li>
<p>å®¢æˆ·ç«¯å‘é€å¯ä¾›é€‰æ‹©çš„åŠ å¯†æ–¹å¼ï¼Œå¹¶å‘æœåŠ¡å™¨è¯·æ±‚è¯ä¹¦</p>
</li>
<li>
<p>æœåŠ¡å™¨ç«¯å‘é€è¯ä¹¦ä»¥åŠé€‰å®šçš„åŠ å¯†æ–¹å¼ç»™å®¢æˆ·ç«¯</p>
</li>
<li>
<p>å®¢æˆ·ç«¯å–å¾—è¯ä¹¦å¹¶è¿›è¡Œè¯ä¹¦éªŒè¯,å¦‚æœä¿¡ä»»ç»™å…¶å‘è¯ä¹¦çš„CA:
éªŒè¯è¯ä¹¦æ¥æºçš„åˆæ³•æ€§ï¼›ç”¨CAçš„å…¬é’¥è§£å¯†è¯ä¹¦ä¸Šæ•°å­—ç­¾å
éªŒè¯è¯ä¹¦çš„å†…å®¹çš„åˆæ³•æ€§ï¼šå®Œæ•´æ€§éªŒè¯
æ£€æŸ¥è¯ä¹¦çš„æœ‰æ•ˆæœŸé™
æ£€æŸ¥è¯ä¹¦æ˜¯å¦è¢«åŠé”€
è¯ä¹¦ä¸­æ‹¥æœ‰è€…çš„åå­—ï¼Œä¸è®¿é—®çš„ç›®æ ‡ä¸»æœºè¦ä¸€è‡´</p>
</li>
<li>
<p>å®¢æˆ·ç«¯ç”Ÿæˆä¸´æ—¶ä¼šè¯å¯†é’¥ï¼ˆå¯¹ç§°å¯†é’¥ï¼‰ï¼Œå¹¶ä½¿ç”¨æœåŠ¡å™¨ç«¯çš„å…¬é’¥åŠ å¯†æ­¤æ•°æ®å‘é€ç»™æœåŠ¡å™¨,å®Œæˆå¯†é’¥äº¤æ¢</p>
</li>
<li>
<p>æœåŠ¡ç”¨æ­¤å¯†é’¥åŠ å¯†ç”¨æˆ·è¯·æ±‚çš„èµ„æºï¼Œå“åº”ç»™å®¢æˆ·ç«¯</p>
</li>
</ol>
</blockquote>
<ul>
<li>æ³¨æ„ï¼šSSLæ˜¯åŸºäºIPåœ°å€å®ç°,å•IPçš„ä¸»æœºä»…å¯ä»¥ä½¿ç”¨ä¸€ä¸ªhttpsè™šæ‹Ÿä¸»æœº</li>
</ul>
<h2 id="å®éªŒæ¨¡æ‹Ÿhttpsçš„å®ç°è¿‡ç¨‹">å®éªŒï¼šæ¨¡æ‹Ÿhttpsçš„å®ç°è¿‡ç¨‹</h2>
<p>â€‹	httpsæœåŠ¡å™¨çš„å®ç°è¿‡ç¨‹ï¼Œç”Ÿæˆsslæ–‡ä»¶å¤¹ï¼Œæ”¾ç½®è¯ä¹¦ç›¸å…³æ–‡ä»¶ï¼Œç„¶åå‘é€ç”³è¯·æ–‡ä»¶ï¼Œç­‰å¾…CAå‘é€<code>httpd.cert</code>è¯ä¹¦ã€‚</p>
<pre><code>$ mkdir /etc/httpd/conf.d/ssl
$ cd /etc/httpd/conf.d/ssl
$ (umask 077;openssl genrsa -out httpd.key 1024)
Generating RSA private key, 1024 bit long modulus
.....................................................++++++
...........................++++++
e is 65537 (0x10001)
$openssl req -new -key httpd.key  -out httpd.csr
Country Name (2 letter code) [XX]:CN
State or Province Name (full name) []:beijing
Locality Name (eg, city) [Default City]:beijing
Organization Name (eg, company) [Default Company Ltd]:httpd
Organizational Unit Name (eg, section) []:opt
Common Name (eg, your name or your server's hostname) []:www.httpd.com
Email Address []:
Please enter the following 'extra' attributes
to be sent with your certificate request
A challenge password []:
An optional company name []:
ssl]#scp httpd.csr 192.168.1.11:/etc/pki/CA/
The authenticity of host '192.168.1.11 (192.168.1.11)' can't be established.
ECDSA key fingerprint is SHA256:rwE9SvvRx3QSIGMK/vhD6ta3/HdDO4BykxP4Mumjs00.
ECDSA key fingerprint is MD5:31:d3:62:71:12:6a:f6:88:69:a4:95:4e:15:57:48:0a.
Are you sure you want to continue connecting (yes/no)? yes
Warning: Permanently added '192.168.1.11' (ECDSA) to the list of known hosts.
root@192.168.1.11's password: 
httpd.csr                                     100%  651   435.0KB/s   00:00
</code></pre><p>â€‹	CAé¢å‘è¯ä¹¦è¿‡ç¨‹ï¼Œå…ˆè‡ªç­¾åè¯ä¹¦ï¼Œcsrç”³è¯·çš„ä¿¡æ¯å¿…é¡»ä¸<code>rootca</code>å‰é¢çš„ä¿¡æ¯ä¸€è‡´ã€‚</p>
<pre><code>$ cd /etc/pki/CA/
$ (umask 077;openssl genrsa -out private/cakey.pem 2048)
Generating RSA private key, 2048 bit long modulus
.+++
.....................................................+++
e is 65537 (0x10001)
$openssl req -new -x509 -key private/cakey.pem -out cacert.pem -days 3650
Country Name (2 letter code) [XX]:CN
State or Province Name (full name) []:beijing
Locality Name (eg, city) [Default City]:beijing
Organization Name (eg, company) [Default Company Ltd]:httpd
Organizational Unit Name (eg, section) []:opt
Common Name (eg, your name or your server's hostname) []:ca.httpd.com
Email Address []:
</code></pre><p>â€‹	ç„¶å<code>rootCA</code>ç­¾ç½²<code>httpd.csr</code>,ç”Ÿæˆ<code>httpd.crt</code>ï¼Œå†å‘é€åˆ°httpsæœåŠ¡å™¨</p>
<pre><code>$ touch index.txt
$ echo 01 &gt; serial
$openssl ca -in httpd.csr -out certs/http.crt -days 720
Using configuration from /etc/pki/tls/openssl.cnf
Check that the request matches the signature
Signature ok
$tree
.
â”œâ”€â”€ cacert.pem
â”œâ”€â”€ certs
â”‚Â Â  â””â”€â”€ http.crt
â”œâ”€â”€ crl
â”œâ”€â”€ httpd.csr
â”œâ”€â”€ index.txt
â”œâ”€â”€ index.txt.attr
â”œâ”€â”€ index.txt.old
â”œâ”€â”€ newcerts
â”‚Â Â  â””â”€â”€ 01.pem
â”œâ”€â”€ private
â”‚Â Â  â””â”€â”€ cakey.pem
â”œâ”€â”€ serial
â””â”€â”€ serial.old
$scp certs/http.crt 192.168.1.8:/etc/httpd/conf.d/ssl/
root@192.168.1.8's password: 
http.crt                                      100% 3699     2.2MB/s   00:00
</code></pre><p>â€‹      <code>https</code>æœåŠ¡å™¨æ”¶åˆ°è¯ä¹¦åï¼Œå®‰è£…<code>install mod_ssl</code>,ä¿®æ”¹ç›¸å…³çš„é…ç½®æ–‡ä»¶ï¼Œå¼€å¯<code>https</code>æœåŠ¡</p>
<pre><code>$ yum install mod_ssl
$ vim /etc/httpd/conf.d/ssl.conf
SSLCertificateFile /etc/httpd/conf.d/ssl/httpd.crt
SSLCertificateKeyFile /etc/httpd/conf.d/ssl/httpd.key
SSLCACertificateFile /etc/httpd/conf.d/ssl/cacert.pem
$ systemctl restart httpd
</code></pre><p>â€‹	å®éªŒéªŒè¯,åœ¨å›¾å½¢ç•Œé¢ä¸‹è®¿é—®,ç®€å•çš„æ·»åŠ <code>hosts</code>æ–‡ä»¶ï¼Œå®ç°å…<code>dns</code>è§£æã€‚</p>
<pre><code>$ vim /etc/hosts/
192.168.1.8 www.httpd.com
$ firefox https://www.httpd.com
</code></pre><p>â€‹	å¯èƒ½è¿™é‡Œåœ¨æµè§ˆå™¨é‡Œï¼Œå¤§å®¶çœ‹åˆ°çš„æç¤ºä¾æ—§ä¸å®‰å…¨ï¼Œè¿™æ˜¯å› ä¸ºè¯ä¹¦æ²¡æœ‰å¯¼å…¥çš„ä¿¡ä»»çš„ç¼˜æ•…ã€‚å¯¼å…¥è¯ä¹¦å³å¯å˜ç»¿åŠ ğŸ”’</p>
<p><img src="https://pic.fenghong.tech/others/1529567635757.png" alt="1529567635757"></p>
<h2 id="http-é‡å®šå‘åˆ°-https">http é‡å®šå‘åˆ° https</h2>
<p>â€‹	å°†httpè¯·æ±‚è½¬å‘è‡³<code>https</code>çš„URL</p>
<p>â€‹	<code>Redirect [status] URL-path URL</code></p>
<pre><code>$ vim /etc/httpd/conf.d/test.conf
redirect Permanent / https://www.httpd.com/
$ systemctl restart httpd
</code></pre><p>åˆ©ç”¨curlå‘½ä»¤éªŒè¯ä¸€ä¸‹,çš„ç¡®è¿›è¡Œäº†è·³è½¬ã€‚</p>
<pre><code>$curl -I http://192.168.1.8/
HTTP/1.1 301 Moved Permanently
Date: Thu, 21 Jun 2018 08:22:49 GMT
Server: Apache
Location: https://www.httpd.com/
Content-Type: text/html; charset=iso-8859-1
</code></pre><h2 id="hsts">HSTS</h2>
<ul>
<li>
<p>HSTS:<code>HTTP Strict Transport Security</code></p>
<p>æœåŠ¡å™¨ç«¯é…ç½®æ”¯æŒHSTSåï¼Œä¼šåœ¨ç»™æµè§ˆå™¨è¿”å›çš„HTTPé¦–éƒ¨ä¸­æºå¸¦HSTSå­—æ®µã€‚æµè§ˆå™¨è·å–åˆ°è¯¥ä¿¡æ¯åï¼Œä¼šå°†æ‰€æœ‰HTTPè®¿é—®è¯·æ±‚åœ¨å†…éƒ¨åš307è·³è½¬åˆ°HTTPSã€‚è€Œæ— éœ€ä»»ä½•ç½‘ç»œè¿‡ç¨‹</p>
</li>
<li>
<p>HSTS preload list</p>
<p>æ˜¯Chromeæµè§ˆå™¨ä¸­çš„HSTSé¢„è½½å…¥åˆ—è¡¨ï¼Œåœ¨è¯¥åˆ—è¡¨ä¸­çš„ç½‘ç«™ï¼Œä½¿ç”¨Chromeæµè§ˆå™¨è®¿é—®æ—¶ï¼Œä¼šè‡ªåŠ¨è½¬æ¢æˆHTTPSã€‚<code>Firefoxã€Safariã€Edge</code>æµè§ˆå™¨ä¹Ÿä¼šé‡‡ç”¨è¿™ä¸ªåˆ—è¡¨</p>
</li>
</ul>
<pre><code>$ vim /etc/httpd/conf.d/test.conf
Header always set Strict-Transport-Security &quot;max-age=31536000&quot;
RewriteEngine on
RewriteRule ^(/.*)$ https://%{HTTP_HOST}$1 [redirect=302]
$ systemctl restart httpd
</code></pre><p>â€‹	å®éªŒéªŒè¯ä¸€ä¸‹ï¼Œçš„ç¡®è¿›è¡Œäº†è·³è½¬ã€‚</p>
<pre><code>$curl -I http://192.168.1.8/
HTTP/1.1 302 Found
Date: Thu, 21 Jun 2018 08:19:20 GMT
Server: Apache
Strict-Transport-Security: max-age=31536000
Location: https://192.168.1.8/
Content-Type: text/html; charset=iso-8859-1
</code></pre>
        </div>
        <!-- tags -->
        <div class="mb-3">
          <h5 class="d-inline-block mr-3">Tags:</h5>
          <ul class="list-inline d-inline-block">
            <a>
            <li class="list-inline-item"><a class="text-color" href="/tags/linux"> 
            Linux</a>
            
          </ul>
        </div>
        <!-- previous -->
        <div class="mb-3 link-article">
    <div class="pre-article">
        
            <div><i class="fa fa-arrow-left"></i> ä¸Šä¸€ç¯‡</div>
            <a href="https://www.fenghong.tech/blog/2018/2018-06-19-http_apache1/">Http(Apache1)</a>
        
    </div>
    <div class="next-article">
        
            <div>ä¸‹ä¸€ç¯‡ <i class="fa fa-arrow-right"></i></div>
            <a href="https://www.fenghong.tech/blog/2018/2018-06-21-lamp/">LAMP1</a>
        
    </div>
</div>
        <!-- previous -->

        <!-- recommend -->
        

<div class="mb-3">
  <h2>æ–‡ç« æ¨è</h2>
  <ul class="related">
  
    <li><a href="/blog/2018/2018-06-19-http_apache1/">Http(Apache1)</a></li>
  
    <li><a href="/blog/2018/2018-06-19-http_apache0/">Http(Apache)</a></li>
  
    <li><a href="/blog/2018/2018-06-14-mysql-08/">MYSQLä¸»ä»å¤åˆ¶</a></li>
  
    <li><a href="/blog/2018/2018-06-13-mysql-07/">MYSQLä¹‹xtrabackup</a></li>
  
    <li><a href="/blog/2018/2018-06-13-mysql-06/">MYSQLå¤‡ä»½</a></li>
  
  </ul>
</div>


        <!-- comments -->

        
        <div id="gitalk-container"></div>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
        <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
        <script>
          window.onload = function() {
              const gitalk = new Gitalk({
              clientID: 'a0a546df858aafb5300e',
              clientSecret: '67d7b40de25c072fc38840ffb9c06ceab7ef5080',
              repo: 'oldthreefeng.github.io',
              owner: 'oldthreefeng',
              admin: ['oldthreefeng'],
              id: hex_md5(hex_md5(window.location.pathname + window.location.hash)), 
              distractionFreeMode: false 
            });
            (function() {
              if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
                document.getElementById('gitalk-container').innerHTML = 'Gitalk comments not available by default when the website is previewed locally.';
                return;
              }
              gitalk.render('gitalk-container');
            })();
          }
        </script>
        
      </div>
      <!-- sidebar -->
<aside class="col-lg-4 order-1 order-lg-2">
  <!-- tags -->
  <div class="bg-white px-4 py-5 box-shadow mb-5 word-cloud">
    <h4 class="mb-4">æ ‡ç­¾</h4>
    
      
      
      
      
      
      
      
      
      
      
      
      <div id="tag-cloud" style="padding: 5px 15px">
      
        
          
          
          
          <a href="/tags/acme" style="font-size:1.0188679245283019rem">acme</a>
        
      
        
          
          
          &middot;
          <a href="/tags/acmetiny" style="font-size:1.0188679245283019rem">acmetiny</a>
        
      
        
          
          
          &middot;
          <a href="/tags/alertmanager" style="font-size:1rem">alertmanager</a>
        
      
        
          
          
          &middot;
          <a href="/tags/algorithm" style="font-size:1.1132075471698113rem">algorithm</a>
        
      
        
          
          
          &middot;
          <a href="/tags/aliyun" style="font-size:1rem">aliyun</a>
        
      
        
          
          
          &middot;
          <a href="/tags/ansible" style="font-size:1.0754716981132075rem">ansible</a>
        
      
        
          
          
          &middot;
          <a href="/tags/apisix" style="font-size:1rem">apisix</a>
        
      
        
          
          
          &middot;
          <a href="/tags/arm64" style="font-size:1.0188679245283019rem">arm64</a>
        
      
        
          
          
          &middot;
          <a href="/tags/authorization" style="font-size:1rem">authorization</a>
        
      
        
          
          
          &middot;
          <a href="/tags/backup" style="font-size:1.0377358490566038rem">backup</a>
        
      
        
          
          
          &middot;
          <a href="/tags/binarysearch" style="font-size:1.0188679245283019rem">binarysearch</a>
        
      
        
          
          
          &middot;
          <a href="/tags/binlog" style="font-size:1rem">binlog</a>
        
      
        
          
          
          &middot;
          <a href="/tags/bit" style="font-size:1.0188679245283019rem">bit</a>
        
      
        
          
          
          &middot;
          <a href="/tags/bug" style="font-size:1.0188679245283019rem">bug</a>
        
      
        
          
          
          &middot;
          <a href="/tags/cache" style="font-size:1rem">cache</a>
        
      
        
          
          
          &middot;
          <a href="/tags/certbot" style="font-size:1rem">certbot</a>
        
      
        
          
          
          &middot;
          <a href="/tags/channel" style="font-size:1rem">channel</a>
        
      
        
          
          
          &middot;
          <a href="/tags/chrome" style="font-size:1.0188679245283019rem">chrome</a>
        
      
        
          
          
          &middot;
          <a href="/tags/ci" style="font-size:1rem">ci</a>
        
      
        
          
          
          &middot;
          <a href="/tags/cluster" style="font-size:1.1132075471698113rem">cluster</a>
        
      
        
          
          
          &middot;
          <a href="/tags/cobra" style="font-size:1rem">cobra</a>
        
      
        
          
          
          &middot;
          <a href="/tags/coco" style="font-size:1.0377358490566038rem">coco</a>
        
      
        
          
          
          &middot;
          <a href="/tags/coding" style="font-size:1rem">coding</a>
        
      
        
          
          
          &middot;
          <a href="/tags/computer" style="font-size:1rem">computer</a>
        
      
        
          
          
          &middot;
          <a href="/tags/consul" style="font-size:1rem">consul</a>
        
      
        
          
          
          &middot;
          <a href="/tags/containerd" style="font-size:1.0188679245283019rem">containerd</a>
        
      
        
          
          
          &middot;
          <a href="/tags/coredns" style="font-size:1rem">coredns</a>
        
      
        
          
          
          &middot;
          <a href="/tags/cors" style="font-size:1rem">cors</a>
        
      
        
          
          
          &middot;
          <a href="/tags/crypto" style="font-size:1rem">crypto</a>
        
      
        
          
          
          &middot;
          <a href="/tags/curl" style="font-size:1rem">curl</a>
        
      
        
          
          
          &middot;
          <a href="/tags/dashboard" style="font-size:1rem">dashboard</a>
        
      
        
          
          
          &middot;
          <a href="/tags/dcdn" style="font-size:1rem">dcdn</a>
        
      
        
          
          
          &middot;
          <a href="/tags/debt" style="font-size:1rem">debt</a>
        
      
        
          
          
          &middot;
          <a href="/tags/devops" style="font-size:1.0188679245283019rem">devops</a>
        
      
        
          
          
          &middot;
          <a href="/tags/dingding" style="font-size:1rem">dingding</a>
        
      
        
          
          
          &middot;
          <a href="/tags/disk" style="font-size:1rem">disk</a>
        
      
        
          
          
          &middot;
          <a href="/tags/dmesg" style="font-size:1rem">dmesg</a>
        
      
        
          
          
          &middot;
          <a href="/tags/dns" style="font-size:1rem">dns</a>
        
      
        
          
          
          &middot;
          <a href="/tags/docker" style="font-size:1.2264150943396226rem">docker</a>
        
      
        
          
          
          &middot;
          <a href="/tags/doublylinkedlist" style="font-size:1rem">doublylinkedlist</a>
        
      
        
          
          
          &middot;
          <a href="/tags/elk" style="font-size:1rem">elk</a>
        
      
        
          
          
          &middot;
          <a href="/tags/error" style="font-size:1rem">error</a>
        
      
        
          
          
          &middot;
          <a href="/tags/etcd" style="font-size:1.0377358490566038rem">etcd</a>
        
      
        
          
          
          &middot;
          <a href="/tags/exec" style="font-size:1.0188679245283019rem">exec</a>
        
      
        
          
          
          &middot;
          <a href="/tags/exp" style="font-size:1rem">exp</a>
        
      
        
          
          
          &middot;
          <a href="/tags/federated" style="font-size:1rem">federated</a>
        
      
        
          
          
          &middot;
          <a href="/tags/filecoin" style="font-size:1rem">filecoin</a>
        
      
        
          
          
          &middot;
          <a href="/tags/find" style="font-size:1rem">find</a>
        
      
        
          
          
          &middot;
          <a href="/tags/firewalld" style="font-size:1rem">firewalld</a>
        
      
        
          
          
          &middot;
          <a href="/tags/fix" style="font-size:1.0377358490566038rem">fix</a>
        
      
        
          
          
          &middot;
          <a href="/tags/flag" style="font-size:1.0188679245283019rem">flag</a>
        
      
        
          
          
          &middot;
          <a href="/tags/flannel" style="font-size:1rem">flannel</a>
        
      
        
          
          
          &middot;
          <a href="/tags/food" style="font-size:1.0188679245283019rem">food</a>
        
      
        
          
          
          &middot;
          <a href="/tags/frp" style="font-size:1.0377358490566038rem">frp</a>
        
      
        
          
          
          &middot;
          <a href="/tags/ftp" style="font-size:1.0188679245283019rem">ftp</a>
        
      
        
          
          
          &middot;
          <a href="/tags/games" style="font-size:1rem">games</a>
        
      
        
          
          
          &middot;
          <a href="/tags/gin" style="font-size:1.0188679245283019rem">gin</a>
        
      
        
          
          
          &middot;
          <a href="/tags/git" style="font-size:1.2075471698113207rem">git</a>
        
      
        
          
          
          &middot;
          <a href="/tags/github" style="font-size:1.0188679245283019rem">github</a>
        
      
        
          
          
          &middot;
          <a href="/tags/gitlab" style="font-size:1rem">gitlab</a>
        
      
        
          
          
          &middot;
          <a href="/tags/go" style="font-size:1.320754716981132rem">go</a>
        
      
        
          
          
          &middot;
          <a href="/tags/go-vim" style="font-size:1rem">go-vim</a>
        
      
        
          
          
          &middot;
          <a href="/tags/gogs" style="font-size:1.0566037735849056rem">gogs</a>
        
      
        
          
          
          &middot;
          <a href="/tags/goland" style="font-size:1.0188679245283019rem">goland</a>
        
      
        
          
          
          &middot;
          <a href="/tags/golang" style="font-size:1.0377358490566038rem">golang</a>
        
      
        
          
          
          &middot;
          <a href="/tags/gorequest" style="font-size:1rem">gorequest</a>
        
      
        
          
          
          &middot;
          <a href="/tags/grafana" style="font-size:1.0188679245283019rem">grafana</a>
        
      
        
          
          
          &middot;
          <a href="/tags/grub" style="font-size:1rem">grub</a>
        
      
        
          
          
          &middot;
          <a href="/tags/hack" style="font-size:1.0188679245283019rem">hack</a>
        
      
        
          
          
          &middot;
          <a href="/tags/haproxy" style="font-size:1.0377358490566038rem">haproxy</a>
        
      
        
          
          
          &middot;
          <a href="/tags/harbor" style="font-size:1.0188679245283019rem">harbor</a>
        
      
        
          
          
          &middot;
          <a href="/tags/hash" style="font-size:1.0188679245283019rem">hash</a>
        
      
        
          
          
          &middot;
          <a href="/tags/hashmap" style="font-size:1rem">hashmap</a>
        
      
        
          
          
          &middot;
          <a href="/tags/helm" style="font-size:1.0188679245283019rem">helm</a>
        
      
        
          
          
          &middot;
          <a href="/tags/hexo" style="font-size:1.0377358490566038rem">hexo</a>
        
      
        
          
          
          &middot;
          <a href="/tags/http" style="font-size:1.0754716981132075rem">http</a>
        
      
        
          
          
          &middot;
          <a href="/tags/https" style="font-size:1rem">https</a>
        
      
        
          
          
          &middot;
          <a href="/tags/index" style="font-size:1rem">index</a>
        
      
        
          
          
          &middot;
          <a href="/tags/ingress" style="font-size:1.0377358490566038rem">ingress</a>
        
      
        
          
          
          &middot;
          <a href="/tags/inotify" style="font-size:1rem">inotify</a>
        
      
        
          
          
          &middot;
          <a href="/tags/internet" style="font-size:1.169811320754717rem">internet</a>
        
      
        
          
          
          &middot;
          <a href="/tags/interview" style="font-size:1rem">interview</a>
        
      
        
          
          
          &middot;
          <a href="/tags/iptables" style="font-size:1.0377358490566038rem">iptables</a>
        
      
        
          
          
          &middot;
          <a href="/tags/ipvs" style="font-size:1.0188679245283019rem">ipvs</a>
        
      
        
          
          
          &middot;
          <a href="/tags/java" style="font-size:1.0754716981132075rem">java</a>
        
      
        
          
          
          &middot;
          <a href="/tags/jeju" style="font-size:1rem">jeju</a>
        
      
        
          
          
          &middot;
          <a href="/tags/jenkins" style="font-size:1.0943396226415094rem">jenkins</a>
        
      
        
          
          
          &middot;
          <a href="/tags/jetbrains" style="font-size:1rem">jetbrains</a>
        
      
        
          
          
          &middot;
          <a href="/tags/jumpserver" style="font-size:1.0566037735849056rem">jumpserver</a>
        
      
        
          
          
          &middot;
          <a href="/tags/jvm" style="font-size:1rem">jvm</a>
        
      
        
          
          
          &middot;
          <a href="/tags/keepalived" style="font-size:1rem">keepalived</a>
        
      
        
          
          
          &middot;
          <a href="/tags/kernel" style="font-size:1rem">kernel</a>
        
      
        
          
          
          &middot;
          <a href="/tags/knowledge" style="font-size:1rem">knowledge</a>
        
      
        
          
          
          &middot;
          <a href="/tags/kube-proxy" style="font-size:1.0188679245283019rem">kube-proxy</a>
        
      
        
          
          
          &middot;
          <a href="/tags/kubernetes" style="font-size:1.3962264150943395rem">kubernetes</a>
        
      
        
          
          
          &middot;
          <a href="/tags/kubernetesrbac" style="font-size:1rem">kubernetesrbac</a>
        
      
        
          
          
          &middot;
          <a href="/tags/kubernetesssl" style="font-size:1.0188679245283019rem">kubernetesssl</a>
        
      
        
          
          
          &middot;
          <a href="/tags/kuboard" style="font-size:1.0566037735849056rem">kuboard</a>
        
      
        
          
          
          &middot;
          <a href="/tags/lb" style="font-size:1rem">lb</a>
        
      
        
          
          
          &middot;
          <a href="/tags/learning" style="font-size:1.0566037735849056rem">learning</a>
        
      
        
          
          
          &middot;
          <a href="/tags/leetcode" style="font-size:1.0188679245283019rem">leetcode</a>
        
      
        
          
          
          &middot;
          <a href="/tags/libcurl" style="font-size:1rem">libcurl</a>
        
      
        
          
          
          &middot;
          <a href="/tags/libssh2" style="font-size:1rem">libssh2</a>
        
      
        
          
          
          &middot;
          <a href="/tags/link" style="font-size:1rem">link</a>
        
      
        
          
          
          &middot;
          <a href="/tags/linux" style="font-size:1.9811320754716981rem">linux</a>
        
      
        
          
          
          &middot;
          <a href="/tags/living" style="font-size:1rem">living</a>
        
      
        
          
          
          &middot;
          <a href="/tags/lnux" style="font-size:1rem">lnux</a>
        
      
        
          
          
          &middot;
          <a href="/tags/log" style="font-size:1.0566037735849056rem">log</a>
        
      
        
          
          
          &middot;
          <a href="/tags/logrus" style="font-size:1rem">logrus</a>
        
      
        
          
          
          &middot;
          <a href="/tags/logs" style="font-size:1rem">logs</a>
        
      
        
          
          
          &middot;
          <a href="/tags/logstash" style="font-size:1rem">logstash</a>
        
      
        
          
          
          &middot;
          <a href="/tags/loki" style="font-size:1rem">loki</a>
        
      
        
          
          
          &middot;
          <a href="/tags/lru" style="font-size:1rem">lru</a>
        
      
        
          
          
          &middot;
          <a href="/tags/luna" style="font-size:1rem">luna</a>
        
      
        
          
          
          &middot;
          <a href="/tags/lvm" style="font-size:1rem">lvm</a>
        
      
        
          
          
          &middot;
          <a href="/tags/lvs" style="font-size:1rem">lvs</a>
        
      
        
          
          
          &middot;
          <a href="/tags/mac" style="font-size:1rem">mac</a>
        
      
        
          
          
          &middot;
          <a href="/tags/malaysia" style="font-size:1rem">malaysia</a>
        
      
        
          
          
          &middot;
          <a href="/tags/manage" style="font-size:1rem">manage</a>
        
      
        
          
          
          &middot;
          <a href="/tags/map" style="font-size:1rem">map</a>
        
      
        
          
          
          &middot;
          <a href="/tags/mariadb" style="font-size:1.0377358490566038rem">mariadb</a>
        
      
        
          
          
          &middot;
          <a href="/tags/markdown" style="font-size:1.0188679245283019rem">markdown</a>
        
      
        
          
          
          &middot;
          <a href="/tags/mfa" style="font-size:1rem">mfa</a>
        
      
        
          
          
          &middot;
          <a href="/tags/mha" style="font-size:1rem">mha</a>
        
      
        
          
          
          &middot;
          <a href="/tags/mode" style="font-size:1rem">mode</a>
        
      
        
          
          
          &middot;
          <a href="/tags/module" style="font-size:1rem">module</a>
        
      
        
          
          
          &middot;
          <a href="/tags/mount" style="font-size:1rem">mount</a>
        
      
        
          
          
          &middot;
          <a href="/tags/mysql" style="font-size:1.2452830188679245rem">mysql</a>
        
      
        
          
          
          &middot;
          <a href="/tags/navicat" style="font-size:1rem">navicat</a>
        
      
        
          
          
          &middot;
          <a href="/tags/network" style="font-size:1rem">network</a>
        
      
        
          
          
          &middot;
          <a href="/tags/nfs" style="font-size:1.0754716981132075rem">nfs</a>
        
      
        
          
          
          &middot;
          <a href="/tags/nginx" style="font-size:1.2264150943396226rem">nginx</a>
        
      
        
          
          
          &middot;
          <a href="/tags/nginxingress" style="font-size:1.0566037735849056rem">nginxingress</a>
        
      
        
          
          
          &middot;
          <a href="/tags/node_exporter" style="font-size:1.0188679245283019rem">node_exporter</a>
        
      
        
          
          
          &middot;
          <a href="/tags/numpy" style="font-size:1rem">numpy</a>
        
      
        
          
          
          &middot;
          <a href="/tags/ops" style="font-size:1.2452830188679245rem">ops</a>
        
      
        
          
          
          &middot;
          <a href="/tags/owncloud" style="font-size:1rem">owncloud</a>
        
      
        
          
          
          &middot;
          <a href="/tags/password" style="font-size:1rem">password</a>
        
      
        
          
          
          &middot;
          <a href="/tags/paxos" style="font-size:1.0188679245283019rem">paxos</a>
        
      
        
          
          
          &middot;
          <a href="/tags/php" style="font-size:1rem">php</a>
        
      
        
          
          
          &middot;
          <a href="/tags/pipeline" style="font-size:1rem">pipeline</a>
        
      
        
          
          
          &middot;
          <a href="/tags/polynomial" style="font-size:1rem">polynomial</a>
        
      
        
          
          
          &middot;
          <a href="/tags/problem" style="font-size:1rem">problem</a>
        
      
        
          
          
          &middot;
          <a href="/tags/prometheus" style="font-size:1.0943396226415094rem">prometheus</a>
        
      
        
          
          
          &middot;
          <a href="/tags/pv" style="font-size:1.0754716981132075rem">pv</a>
        
      
        
          
          
          &middot;
          <a href="/tags/pvc" style="font-size:1.0754716981132075rem">pvc</a>
        
      
        
          
          
          &middot;
          <a href="/tags/python" style="font-size:1.0943396226415094rem">python</a>
        
      
        
          
          
          &middot;
          <a href="/tags/queue" style="font-size:1rem">queue</a>
        
      
        
          
          
          &middot;
          <a href="/tags/qw3xt" style="font-size:1rem">qw3xt</a>
        
      
        
          
          
          &middot;
          <a href="/tags/rabbitmq" style="font-size:1.0188679245283019rem">rabbitmq</a>
        
      
        
          
          
          &middot;
          <a href="/tags/raft" style="font-size:1rem">raft</a>
        
      
        
          
          
          &middot;
          <a href="/tags/rebase" style="font-size:1rem">rebase</a>
        
      
        
          
          
          &middot;
          <a href="/tags/redis" style="font-size:1.0377358490566038rem">redis</a>
        
      
        
          
          
          &middot;
          <a href="/tags/resources" style="font-size:1.0188679245283019rem">resources</a>
        
      
        
          
          
          &middot;
          <a href="/tags/rsa" style="font-size:1rem">rsa</a>
        
      
        
          
          
          &middot;
          <a href="/tags/rsync" style="font-size:1.0188679245283019rem">rsync</a>
        
      
        
          
          
          &middot;
          <a href="/tags/safe" style="font-size:1.0754716981132075rem">safe</a>
        
      
        
          
          
          &middot;
          <a href="/tags/samba" style="font-size:1rem">samba</a>
        
      
        
          
          
          &middot;
          <a href="/tags/sealos" style="font-size:1rem">sealos</a>
        
      
        
          
          
          &middot;
          <a href="/tags/secure" style="font-size:1rem">secure</a>
        
      
        
          
          
          &middot;
          <a href="/tags/sed" style="font-size:1rem">sed</a>
        
      
        
          
          
          &middot;
          <a href="/tags/server" style="font-size:1.2075471698113207rem">server</a>
        
      
        
          
          
          &middot;
          <a href="/tags/sftp" style="font-size:1rem">sftp</a>
        
      
        
          
          
          &middot;
          <a href="/tags/shadowsocks" style="font-size:1.0188679245283019rem">shadowsocks</a>
        
      
        
          
          
          &middot;
          <a href="/tags/shell" style="font-size:1.0188679245283019rem">shell</a>
        
      
        
          
          
          &middot;
          <a href="/tags/slap" style="font-size:1rem">slap</a>
        
      
        
          
          
          &middot;
          <a href="/tags/slave" style="font-size:1rem">slave</a>
        
      
        
          
          
          &middot;
          <a href="/tags/slb" style="font-size:1rem">slb</a>
        
      
        
          
          
          &middot;
          <a href="/tags/slowquery" style="font-size:1rem">slowquery</a>
        
      
        
          
          
          &middot;
          <a href="/tags/sonar" style="font-size:1.0377358490566038rem">sonar</a>
        
      
        
          
          
          &middot;
          <a href="/tags/sourcetree" style="font-size:1.0188679245283019rem">sourcetree</a>
        
      
        
          
          
          &middot;
          <a href="/tags/sql" style="font-size:1.0188679245283019rem">sql</a>
        
      
        
          
          
          &middot;
          <a href="/tags/ss" style="font-size:1rem">ss</a>
        
      
        
          
          
          &middot;
          <a href="/tags/ssh" style="font-size:1.0754716981132075rem">ssh</a>
        
      
        
          
          
          &middot;
          <a href="/tags/ssl" style="font-size:1.1132075471698113rem">ssl</a>
        
      
        
          
          
          &middot;
          <a href="/tags/stack" style="font-size:1rem">stack</a>
        
      
        
          
          
          &middot;
          <a href="/tags/stress" style="font-size:1rem">stress</a>
        
      
        
          
          
          &middot;
          <a href="/tags/style" style="font-size:1rem">style</a>
        
      
        
          
          
          &middot;
          <a href="/tags/switchyomega" style="font-size:1rem">switchyomega</a>
        
      
        
          
          
          &middot;
          <a href="/tags/syncd" style="font-size:1rem">syncd</a>
        
      
        
          
          
          &middot;
          <a href="/tags/taint" style="font-size:1rem">taint</a>
        
      
        
          
          
          &middot;
          <a href="/tags/tar" style="font-size:1rem">tar</a>
        
      
        
          
          
          &middot;
          <a href="/tags/tcp" style="font-size:1.0188679245283019rem">tcp</a>
        
      
        
          
          
          &middot;
          <a href="/tags/testing" style="font-size:1rem">testing</a>
        
      
        
          
          
          &middot;
          <a href="/tags/tomcat" style="font-size:1rem">tomcat</a>
        
      
        
          
          
          &middot;
          <a href="/tags/tour" style="font-size:1.0188679245283019rem">tour</a>
        
      
        
          
          
          &middot;
          <a href="/tags/trojan" style="font-size:1rem">trojan</a>
        
      
        
          
          
          &middot;
          <a href="/tags/ubuntu" style="font-size:1.0566037735849056rem">ubuntu</a>
        
      
        
          
          
          &middot;
          <a href="/tags/udp" style="font-size:1rem">udp</a>
        
      
        
          
          
          &middot;
          <a href="/tags/uk8s" style="font-size:1rem">uk8s</a>
        
      
        
          
          
          &middot;
          <a href="/tags/unauthorized" style="font-size:1rem">unauthorized</a>
        
      
        
          
          
          &middot;
          <a href="/tags/unblockneteasemusic" style="font-size:1rem">unblockneteasemusic</a>
        
      
        
          
          
          &middot;
          <a href="/tags/upgrade" style="font-size:1.0188679245283019rem">upgrade</a>
        
      
        
          
          
          &middot;
          <a href="/tags/upstream" style="font-size:1rem">upstream</a>
        
      
        
          
          
          &middot;
          <a href="/tags/v1.18.3" style="font-size:1rem">v1.18.3</a>
        
      
        
          
          
          &middot;
          <a href="/tags/vim" style="font-size:1rem">vim</a>
        
      
        
          
          
          &middot;
          <a href="/tags/virtul" style="font-size:1rem">virtul</a>
        
      
        
          
          
          &middot;
          <a href="/tags/vpn" style="font-size:1.0754716981132075rem">vpn</a>
        
      
        
          
          
          &middot;
          <a href="/tags/vscode" style="font-size:1rem">vscode</a>
        
      
        
          
          
          &middot;
          <a href="/tags/websocket" style="font-size:1rem">websocket</a>
        
      
        
          
          
          &middot;
          <a href="/tags/wifi" style="font-size:1rem">wifi</a>
        
      
        
          
          
          &middot;
          <a href="/tags/xshell" style="font-size:1rem">xshell</a>
        
      
        
          
          
          &middot;
          <a href="/tags/xtrabackup" style="font-size:1rem">xtrabackup</a>
        
      
        
          
          
          &middot;
          <a href="/tags/yum" style="font-size:1rem">yum</a>
        
      
        
          
          
          &middot;
          <a href="/tags/zabbix" style="font-size:1rem">zabbix</a>
        
      
        
          
          
          &middot;
          <a href="/tags/%e6%95%b0%e6%8d%ae%e5%ba%93%e5%8e%9f%e7%90%86" style="font-size:1rem">æ•°æ®åº“åŸç†</a>
        
      
        
          
          
          &middot;
          <a href="/tags/%e8%b4%aa%e5%bf%83%e7%ae%97%e6%b3%95" style="font-size:1rem">è´ªå¿ƒç®—æ³•</a>
        
      
      </div>
    
  </div>

  <!-- profile -->
  <!-- toc -->
  
  <div class="bg-white px-4 py-5 box-shadow mb-5 sticky-top">
    <h4 class="mb-4">ç›®å½•</h4>
    <nav id="TableOfContents">
  <ul>
    <li><a href="#httpçŠ¶æ€ç ">httpçŠ¶æ€ç </a></li>
  </ul>

  <ul>
    <li><a href="#å®éªŒæ¨¡æ‹Ÿhttpsçš„å®ç°è¿‡ç¨‹">å®éªŒï¼šæ¨¡æ‹Ÿhttpsçš„å®ç°è¿‡ç¨‹</a></li>
    <li><a href="#http-é‡å®šå‘åˆ°-https">http é‡å®šå‘åˆ° https</a></li>
    <li><a href="#hsts">HSTS</a></li>
  </ul>
</nav>
  </div>

</aside>
<!-- /sidebar -->

    </div>
  </div>
</section>
<!-- /blog details -->



<footer>
	
	<div class="section bg-secondary">
		<div class="container">
			<div class="row justify-content-between">
				
				<div class="col-lg-5 mb-5 mb-lg-0">
					
					<a class="mb-4 d-inline-block" href="/"><img class="img-fluid"
																								src="/images/images/logo-alt.png" alt="Louis Blog" width="60%"></a>
					<p class="text-light mb-5">æ¯ä¸€ä¸ªä¸æ›¾èµ·èˆçš„æ—¥å­éƒ½æ˜¯å¯¹ç”Ÿå‘½çš„è¾œè´Ÿ.</p>
					<h4 class="text-white mb-4">å…³æ³¨æˆ‘</h4>
					
					<ul class="list-inline social-icon-alt">
						
						<li class="list-inline-item">
							<a class="hover-ripple" href="https://twitter.com/louishong17"><i class="fa fa-twitter"></i></a>
						</li>
						
						<li class="list-inline-item">
							<a class="hover-ripple" href="https://github.com/oldthreefeng"><i class="fa fa-github"></i></a>
						</li>
						
						<li class="list-inline-item">
							<a class="hover-ripple" href="/contact"><i class="fa fa-wechat"></i></a>
						</li>
						
						<li class="list-inline-item">
							<a class="hover-ripple" href="mailto:992165098@qq.com"><i class="fa fa-envelope"></i></a>
						</li>
						
						<li class="list-inline-item">
							<a class="hover-ripple" href="https://www.fenghong.tech/blog/index.xml"><i class="fa fa-rss"></i></a>
						</li>
						
					</ul>
				</div>
				<div class="col-lg-5 mb-5 mb-lg-0">
					
					
					
					
					
					<div class="mb-5">
						<h4 class="text-white mb-4">è”ç³»ä¿¡æ¯</h4>
						<p class="text-light mb-3">ä¸Šæµ· Â· æµ¦ä¸œæ–°åŒº</p>
						<p class="text-light mb-3"></p>
						<p class="text-light mb-3">å¾®ä¿¡è”ç³»æ–¹å¼</p>
						<p class="text-light mb-3"><img src="/images/images/wechat-qrcode.png" width="356px"></p>
					</div>
					
					
				</div>
			</div>
		</div>
	</div>
	
	<div class="bg-secondary-darken py-4">
		<div class="container">
			<div class="row">
				<div class="col-md-6 text-center text-md-left mb-3 mb-md-0">
					<p class="mb-0 text-white">Copyright Â© 2020 Louis</p>
				</div>
				<div class="col-md-6 text-center text-md-right">
					<ul class="list-inline">
						
						<li class="list-inline-item mx-0"><a class="d-inline-block px-3 text-white" href="https://beian.miit.gov.cn/"
																									class="text-white">é„‚ICPå¤‡18027870å·-1</a></li>
						<p class="list-inline-item mx-0 text-white">æœ¬ç½‘ç«™ç”±</p>
						<a target="_blank" rel="nofollow noopener" href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral"><img src="https://pic.fenghong.tech/images/180803_logo30.png" style="margin-bottom:5px;height: 25px;"></a>
						<p class="list-inline-item mx-0 text-white">æä¾›CDNåŠ é€Ÿ/äº‘å­˜å‚¨æœåŠ¡</p>
						
					</ul>
				</div>
			</div>
		</div>
	</div>
</footer>



<script>
	var indexURL = "/index.json"
</script>


<!-- JS Plugins -->

<script src="/plugins/jQuery/jquery.min.js"></script>

<script src="/plugins/bootstrap/bootstrap.min.js"></script>

<script src="/plugins/slick/slick.min.js"></script>

<script src="/plugins/google-map/gmap.js"></script>

<script src="/plugins/venobox/venobox.min.js"></script>

<script src="/plugins/filterizr/jquery.filterizr.min.js"></script>

<script src="/plugins/search/fuse.min.js"></script>

<script src="/plugins/search/mark.js"></script>

<script src="/plugins/search/search.js"></script>

<script src="/plugins/bigPicture/bigPicture.js"></script>

<script src="/plugins/hex_md5/hex_md5.js"></script>


<!-- Main Script -->

<script src="/js/script.min.js"></script>

<!-- Algolia -->
<script src="https://cdn.jsdelivr.net/npm/docsearch.js@2.6.3/dist/cdn/docsearch.min.js"></script>
<script>
	docsearch({
		apiKey: 'b4d47f0c039a84d4035305be829404dd',
		indexName: 'DocSearch',
		appId: 'CTH4P282IZ',
		inputSelector: '#js-algolia-btn',
		debug: false,
	});
</script>

<!-- google analitycs -->

<script>
	(function (i, s, o, g, r, a, m) {
		i['GoogleAnalyticsObject'] = r;
		i[r] = i[r] || function () {
			(i[r].q = i[r].q || []).push(arguments)
		}, i[r].l = 1 * new Date();
		a = s.createElement(o),
			m = s.getElementsByTagName(o)[0];
		a.async = 1;
		a.src = g;
		m.parentNode.insertBefore(a, m)
	})(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
ga('create', 'UA-130595069-1', 'auto');
ga('send', 'pageview');
</script>


<script>
	(function(){
		var bp = document.createElement('script');
		var curProtocol = window.location.protocol.split(':')[0];
		if (curProtocol === 'https'){
			bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
		}
		else{
			bp.src = 'http://push.zhanzhang.baidu.com/push.js';
		}
		var s = document.getElementsByTagName("script")[0];
		s.parentNode.insertBefore(bp, s);
	})();
</script>
</body>

</html>