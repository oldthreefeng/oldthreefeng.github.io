<!DOCTYPE html>

<html lang="zh-cn"><head>
  <meta charset="utf-8">
  <title>syncd-cli 介绍及用法 | Louis Blog</title>

  <!-- mobile responsive meta -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="有技术 有温度 有情怀">
  
  <meta name="author" content="Louis ">
  <meta name="generator" content="Hugo 0.73.0" />

  <!-- plugins -->
  
  <link rel="stylesheet" href="/plugins/bootstrap/bootstrap.min.css">
  
  <link rel="stylesheet" href="/plugins/slick/slick.css">
  
  <link rel="stylesheet" href="/plugins/fontawesome/font-awesome.min.css">
  
  <link rel="stylesheet" href="/plugins/animate/animate.css">
  
  <link rel="stylesheet" href="/plugins/venobox/venobox.css">
  

  <!-- Main Stylesheet -->
  
  <link rel="stylesheet" href="/scss/style.min.css" media="screen">

  <!--Favicon-->
  <link rel="shortcut icon" href="/images/images/favicon.png " type="image/x-icon">
  <link rel="icon" href="/images/images/favicon.png " type="image/x-icon">

  <!--Algolia-->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2.6.3/dist/cdn/docsearch.min.css">
</head>
<body>
<!-- header -->
<header>
  

  <!-- navigation -->
  <div class="navigation bg-white position-relative">
    <div class="container">
      <nav class="navbar navbar-expand-lg navbar-light bg-white">
        <a class="navbar-brand" href="/"><img class="img-fluid pb-lg-3" src="/images/images/logo.png" width="189px" alt="Louis Blog"></a>
        <button class="navbar-toggler border-0" type="button" data-toggle="collapse" data-target="#navigation"
          aria-controls="navigation" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse text-center" id="navigation">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item">
              <a class="nav-link" href="/"></a>
            </li>
            
            
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-haspopup="true"
                aria-expanded="false">
                博客
              </a>
              <div class="dropdown-menu" >
                
                <a class="dropdown-item" href="/categories/kubernetes">Kubernetes</a>
                
                <a class="dropdown-item" href="/categories/sealos">sealos</a>
                
                <a class="dropdown-item" href="/categories/ops">运维相关</a>
                
                <a class="dropdown-item" href="/categories/golang">golang</a>
                
                <a class="dropdown-item" href="/categories/algorithm">algorithm</a>
                
                <a class="dropdown-item" href="/categories/tools">tools</a>
                
                <a class="dropdown-item" href="/blog">全部</a>
                
              </div>
            </li>
            
            
            
            <li class="nav-item">
              <a class="nav-link" href="/team">友情链接</a>
            </li>
            
            
            
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-haspopup="true"
                aria-expanded="false">
                关于我
              </a>
              <div class="dropdown-menu" >
                
                <a class="dropdown-item" href="/contact">about</a>
                
                <a class="dropdown-item" href="https://github.com/oldthreefeng">github</a>
                
              </div>
            </li>
            
            
          </ul>

          
          

          
          <!-- search -->
          <div class="search px-4">
            <button id="searchOpen" class="search-btn"><i class="fa fa-search text-dark"></i></button>
            <div class="search-wrapper">
              <form action="/search">
                <input class="search-box form-control" id="js-algolia-btn" name="s" type="search" placeholder="输入搜索词">
              </form>
              <button id="searchClose" class="search-close"><i class="fa fa-close text-dark"></i></button>
            </div>
          </div>
          
          
          <!-- get start btn -->
          <a href="/contact" class="btn btn-primary hover-ripple">联系我</a>
          
        </div>
      </nav>
    </div>
  </div>
  <!-- /navigation -->
</header>
<!-- /header -->


<!-- page title -->
<section class="section bg-cover overlay" style="background-image: url('/'),url('/'),url('/images/images/backgrounds/page-title.jpg');">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <h2 class="text-white mb-3">syncd-cli 介绍及用法</h2>
        <!-- breadcrumb -->
        
        <p class="text-white"></p>
      </div>
    </div>
  </div>
</section>
<!-- /page title -->


<!-- blog details -->
<section class="section">
  <div class="container blog">
    <div class="row">
      <div class="col-lg-8">
        <!-- post thumb -->
        <div class="position-relative mb-5">
          <img src="/"  onerror="this.src='https:\/\/pic.fenghong.tech\/proto\/portrait-804062__340.jpg'" alt="post thumb" class="img-fluid w-100">
           <div class="card-type">Syncd</div>
        </div>
        <div class="card-meta text-uppercase mb-2">作者  <strong class="text-dark"></strong>
          
            发表于 <strong class="text-dark">2019年10月20日</strong></div>
        <hr>
        <div class="content">
          <h2 id="介绍">介绍</h2>
<blockquote>
<p>syncd-cli 是自动化部署工具 <a href="https://github.com/dreamans/syncd">syncd</a> 的一个命令行客户端，用于批量添加server，实现一键自动添加，提高开发效率。</p>
</blockquote>
<blockquote>
<p><a href="https://github.com/dreamans/syncd">Syncd</a>是一款开源的代码部署工具，它具有简单、高效、易用等特点，可以提高团队的工作效率。</p>
</blockquote>
<h2 id="安装">安装</h2>
<p>required要求</p>
<ul>
<li><input checked="" disabled="" type="checkbox"> go1.8+</li>
<li><input checked="" disabled="" type="checkbox"> syncd2.0+</li>
</ul>
<p><code>go get</code> 方式</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ go get gogs.wangke.co/go/syncd-cli
$ syncd-cli -h
</code></pre></div><p><code>git clone</code> 方式</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ git clone https://gogs.wangke.co/go/syncd-cli.git
$ cd syncd-cli <span style="color:#f92672">&amp;&amp;</span> go build -o syncd-cli syncd-cli.go
$ ./syncd-cli -h
</code></pre></div><h2 id="usage">Usage</h2>
<h3 id="v100">@v1.0.0</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#75715e"># ./syncd-cli -h                                                                                                  [12:18:53]</span>
syncd-cli version:1.0.0
Usage syncd-cli &lt;command&gt; <span style="color:#f92672">[</span>-aupginsh<span style="color:#f92672">]</span>

command <span style="color:#f92672">[</span>--add<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>--list<span style="color:#f92672">]</span>  <span style="color:#f92672">[</span>user|server<span style="color:#f92672">]</span>

add server example:
        1<span style="color:#f92672">)</span> syncd-cli -d server -g <span style="color:#ae81ff">2</span> -i 192.168.1.1,test.example.com -n test01,test02 -s 9527,22
        2<span style="color:#f92672">)</span> syncd-cli --add server  --roleGroupId <span style="color:#ae81ff">2</span> --ipEmail 192.168.1.1 --names test01 --sshPort <span style="color:#ae81ff">9527</span>
add user example:
        1<span style="color:#f92672">)</span> syncd-cli --add user  --ipEmail text@wangke.co --names test01
        2<span style="color:#f92672">)</span> syncd-cli  -d user  -i text@wangke.co -n test01
list server and user example:
        1<span style="color:#f92672">)</span> syncd-cli -l user
        2<span style="color:#f92672">)</span> syncd-cli -l server 
        3<span style="color:#f92672">)</span> syncd-cli --list 
        4<span style="color:#f92672">)</span> syncd-cli --list server 

Options:
  -d, --add string        add user or server
  -h, --help              this help
  -a, --hostApi string    sycnd server addr api <span style="color:#f92672">(</span>default <span style="color:#e6db74">&#34;http//127.0.0.1:8878/&#34;</span><span style="color:#f92672">)</span>
  -i, --ipEmail strings   set ip/hostname to the cluster with names // or email <span style="color:#66d9ef">for</span> add user, use <span style="color:#e6db74">&#39;,&#39;</span> to split
  -l, --list string       list server or user
  -n, --names strings     set names to the cluster with ips, use <span style="color:#e6db74">&#39;,&#39;</span> to split
  -p, --password string   password <span style="color:#66d9ef">for</span> syncd tools <span style="color:#f92672">(</span>default <span style="color:#e6db74">&#34;111111&#34;</span><span style="color:#f92672">)</span>
  -g, --roleGroupId int   group_id <span style="color:#66d9ef">for</span> cluster // or role_id <span style="color:#66d9ef">for</span> user, must be needed <span style="color:#f92672">(</span>default 1<span style="color:#f92672">)</span>
  -s, --sshPort ints      set sshPort to the cluster server, use <span style="color:#e6db74">&#39;,&#39;</span> to split
  -u, --user string       user <span style="color:#66d9ef">for</span> syncd tools <span style="color:#f92672">(</span>default <span style="color:#e6db74">&#34;syncd&#34;</span><span style="color:#f92672">)</span>

</code></pre></div><h3 id="v110">@v1.1.0</h3>
<p>从命令行读取批量文件的信息,感觉太冗余了, 不方便创建,还是以文件的方式创建批量容易一点,
所用想了一个从文件里面读取信息,然后根据信息创建相应资源的方法.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ ./syncd-cli -h
syncd-cli version:1.1.0
Usage syncd-cli &lt;command&gt; <span style="color:#f92672">[</span>-afhpu<span style="color:#f92672">]</span>

command &lt;apply&gt;|&lt;get&gt;  <span style="color:#f92672">[</span>user|server<span style="color:#f92672">]</span> &lt;?-f files&gt;

add server example:
        1<span style="color:#f92672">)</span> syncd-cli apply user -f files
        2<span style="color:#f92672">)</span> syncd-cli apply server -f files
list server and user example:
        1<span style="color:#f92672">)</span> syncd-cli get user
        2<span style="color:#f92672">)</span> syncd-cli get server

Options:
  -f, --file string       add server/user from files
  -h, --help              this help
  -a, --hostApi string    sycnd server addr api <span style="color:#f92672">(</span>default <span style="color:#e6db74">&#34;http://127.0.0.1:8878/&#34;</span><span style="color:#f92672">)</span>
  -p, --password string   password <span style="color:#66d9ef">for</span> syncd tools <span style="color:#f92672">(</span>default <span style="color:#e6db74">&#34;111111&#34;</span><span style="color:#f92672">)</span>
  -u, --user string       user <span style="color:#66d9ef">for</span> syncd tools <span style="color:#f92672">(</span>default <span style="color:#e6db74">&#34;syncd&#34;</span><span style="color:#f92672">)</span>

</code></pre></div><p><strong>file文件的格式</strong></p>
<p><code>testserver</code>,<code>testuser</code>等文件名称无要求, 但是对文件的格式要求.以一个空格进行分割.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#75715e"># 第一列是groupid,对应的集群id;</span>
<span style="color:#75715e"># 第二列是name, 对应的是server的名字</span>
<span style="color:#75715e"># 第三列是ip/hostname, 对应server的ip或者域名</span>
<span style="color:#75715e"># 第四列是sshport, 对应的是server的ssh端口</span>
$ cat testserver
<span style="color:#ae81ff">1</span> test01 test.wangke.co <span style="color:#ae81ff">22</span>
<span style="color:#ae81ff">1</span> test02 test01.wangke.co <span style="color:#ae81ff">9527</span>
<span style="color:#ae81ff">1</span> test03 test02.wangke.co <span style="color:#ae81ff">6822</span>
</code></pre></div><p><code>testuser</code>文件内容以空格区分,共四列.(后续可以添加至6列,源码的user还有电话号码,真实姓名等,非必须 批量创建的默认密码为<code>111111</code>)</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#75715e"># 第一列是role_id, 对应的是角色, 比如1是管理员</span>
<span style="color:#75715e"># 第二列是name, 对应的是用户名</span>
<span style="color:#75715e"># 第三列是email, 对应的是用户的邮箱</span>
<span style="color:#75715e"># 第四列是status, 对应的是用户能否登陆.</span>
$ cat testuser
<span style="color:#ae81ff">1</span> test01 test01@wangke.co <span style="color:#ae81ff">1</span>
<span style="color:#ae81ff">1</span> test02 test02@wangke.co <span style="color:#ae81ff">1</span>

</code></pre></div><p>因为<code>testuser</code>和<code>testserver</code>的的文件格式和数据类型是一样的, 所用到的方法是一样的, 唯一的区分就是利用<code>apply user</code>还是<code>apply server</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">server</span> <span style="color:#66d9ef">struct</span> {
    <span style="color:#a6e22e">id</span> <span style="color:#66d9ef">int</span>
    <span style="color:#a6e22e">name</span> <span style="color:#66d9ef">string</span>
    <span style="color:#a6e22e">ip</span> <span style="color:#66d9ef">string</span>
    <span style="color:#a6e22e">port</span> <span style="color:#66d9ef">int</span>
}

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">user</span> <span style="color:#66d9ef">struct</span> {
	<span style="color:#a6e22e">id</span> <span style="color:#66d9ef">int</span>
	<span style="color:#a6e22e">name</span> <span style="color:#66d9ef">string</span>
	<span style="color:#a6e22e">email</span> <span style="color:#66d9ef">string</span>
	<span style="color:#a6e22e">status</span> <span style="color:#66d9ef">int</span>
}

</code></pre></div><h3 id="重要提醒">重要提醒</h3>
<pre><code>
方法是一样的. 所以标志位很重要, 不然创建错了就是连环错误了.

$ syncd-cli apply user -f testuser
$ syncd-cli apply server -f testserver
</code></pre><h2 id="example">Example</h2>
<pre><code>root@master-louis: ~/go/src/github.com/oldthreefeng/syncd-cli master ⚡
# ./syncd-cli -i 192.168.1.2,text.example.com -n test1,texte -s 9527,22              [12:18:58]
INFO[0000] your token is under .syncd-token             
INFO[0000] group_id=1&amp;name=test1&amp;ip=192.168.1.2&amp;ssh_port=9527  
INFO[0000] {&quot;code&quot;:0,&quot;message&quot;:&quot;success&quot;}               
INFO[0000] group_id=1&amp;name=texte&amp;ip=text.example.com&amp;ssh_port=22  
INFO[0000] {&quot;code&quot;:0,&quot;message&quot;:&quot;success&quot;}

# 将test01邮箱为text@wangke.co加入管理员,默认密码为111111
$./syncd-cli -d user -i text@wangke.co -n test01   
time=&quot;2019-10-20T17:59:08+08:00&quot; level=info msg=&quot;your token is under .syncd-token\n&quot;
time=&quot;2019-10-20T17:59:08+08:00&quot; level=info msg=&quot;role_id=1&amp;username=test01&amp;password=1111111&amp;email=text@wangke.co&amp;status=1&quot;
time=&quot;2019-10-20T17:59:08+08:00&quot; level=info msg=&quot;{\&quot;code\&quot;:0,\&quot;message\&quot;:\&quot;success\&quot;}&quot;

</code></pre><p>添加如下:
<img src="https://pic.fenghong.tech/others/syncd-cli.png" alt="">
<img src="https://pic.fenghong.tech/others/syncd-cli-add-user.png" alt=""></p>
<h2 id="算法思路-">算法思路</h2>
<p>本来想开发和<code>kubectl</code>,<code>go</code>,<code>kubeadm</code>等类似的管理cli. 奈何时间水平有限.</p>
<p>脑子里想的是这样的</p>
<pre><code class="language-cgo" data-lang="cgo">$ syncd get user 
$ syncd get server 
$ syncd apply -f adduser.yaml
</code></pre><p>实际上&hellip;</p>
<pre><code class="language-cgo" data-lang="cgo">$ syncd-cli --list user
$ syncd-cli --list server

$ syncd-cli --add user -i test@wangke.co -n test01 
</code></pre><blockquote>
<p>整体上, 利用<code>http</code>的<code>GET</code>还有<code>POST</code>完成显示和添加动作的. <a href="https://github.com/parnurzeal/gorequest">gorequest</a>的<code>GET/POST</code>的确好用,可以试试.</p>
<p>记录日志当然是用的<a href="https://github.com/sirupsen/logrus">logrus</a>, 当时用的<code>go mod</code>学习教程就是用的这个模板, 日志的格式也可以.</p>
<p>命令行的开发主要就是用的<a href="https://github.com/spf13/pflag">pflag</a>, 看了<code>kubernetes</code>和<code>docker</code>源码相关, <code>kubectl</code>等命令行管理工具也是基于这个开发的.</p>
</blockquote>
<p>首先, 登录验证, 获取token, 将token存入当前目录下的<code>.syncd-token</code>, 其次, 获取user/server列表或者添加user/server, 逻辑都是一样的,发送<code>POST</code>请求, 同时携带cookie, 将cookie的<code>name</code>和<code>value</code>封装成<code>http.cookie</code>, 每次需要用到,直接调用即可.</p>
<h2 id="代码-">代码</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#75715e">/*
</span><span style="color:#75715e">Copyright 2019 louis.
</span><span style="color:#75715e">@Time : 2019/10/20 10:00
</span><span style="color:#75715e">@Author : louis
</span><span style="color:#75715e">@File : syncd-cli
</span><span style="color:#75715e">@Software: GoLand
</span><span style="color:#75715e">
</span><span style="color:#75715e">*/</span>

<span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> (
	<span style="color:#e6db74">&#34;bufio&#34;</span>
	<span style="color:#e6db74">&#34;crypto/md5&#34;</span>
	<span style="color:#e6db74">&#34;encoding/hex&#34;</span>
	<span style="color:#e6db74">&#34;encoding/json&#34;</span>
	<span style="color:#e6db74">&#34;errors&#34;</span>
	<span style="color:#e6db74">&#34;fmt&#34;</span>
	<span style="color:#e6db74">&#34;github.com/parnurzeal/gorequest&#34;</span>
	<span style="color:#a6e22e">log</span> <span style="color:#e6db74">&#34;github.com/sirupsen/logrus&#34;</span>
	<span style="color:#a6e22e">flag</span> <span style="color:#e6db74">&#34;github.com/spf13/pflag&#34;</span>
	<span style="color:#e6db74">&#34;io/ioutil&#34;</span>
	<span style="color:#e6db74">&#34;net/http&#34;</span>
	<span style="color:#e6db74">&#34;os&#34;</span>
)

<span style="color:#66d9ef">const</span> (
	<span style="color:#a6e22e">tokenFile</span> = <span style="color:#e6db74">&#34;.syncd-token&#34;</span>
	<span style="color:#a6e22e">agent</span>     = <span style="color:#e6db74">&#34;Mozilla/5.0 (Macintosh; Intel Mac OS X 10.14; rv:68.0) Gecko/20100101 Firefox/68.0&#34;</span>
)

<span style="color:#66d9ef">var</span> (
	<span style="color:#75715e">//host     = &#34;https://syncd.fenghong.tech/&#34;
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">host</span>     <span style="color:#66d9ef">string</span>
	<span style="color:#a6e22e">list</span>     <span style="color:#66d9ef">string</span>
	<span style="color:#a6e22e">user</span>     <span style="color:#66d9ef">string</span>
	<span style="color:#a6e22e">password</span> <span style="color:#66d9ef">string</span>
	<span style="color:#a6e22e">GroupId</span>  <span style="color:#66d9ef">int</span>
	<span style="color:#a6e22e">Names</span>    []<span style="color:#66d9ef">string</span>
	<span style="color:#a6e22e">Ips</span>      []<span style="color:#66d9ef">string</span>
	<span style="color:#a6e22e">SSHPort</span>  []<span style="color:#66d9ef">int</span>
	<span style="color:#a6e22e">add</span>      <span style="color:#66d9ef">string</span>
	<span style="color:#a6e22e">files</span>    <span style="color:#66d9ef">string</span>
	<span style="color:#a6e22e">h</span>        <span style="color:#66d9ef">bool</span>
)

<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">_token</span> <span style="color:#66d9ef">string</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">TokenFail</span>() {
	<span style="color:#a6e22e">RemoveToken</span>()
	panic(<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Sprintf</span>(<span style="color:#e6db74">&#34;login faild, please set the right password&#34;</span>))
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">RemoveToken</span>() {
	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">Remove</span>(<span style="color:#a6e22e">tokenFile</span>); <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
		<span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Infoln</span>(<span style="color:#e6db74">&#34;remove .token failed&#34;</span>)
	}
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">SetToken</span>(<span style="color:#a6e22e">token</span> <span style="color:#66d9ef">string</span>) {
	<span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">ioutil</span>.<span style="color:#a6e22e">WriteFile</span>(<span style="color:#a6e22e">tokenFile</span>, []byte(<span style="color:#a6e22e">token</span>), <span style="color:#ae81ff">0644</span>)
	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
		<span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Fatalln</span>(<span style="color:#a6e22e">err</span>)
	}
	<span style="color:#a6e22e">_token</span> = <span style="color:#a6e22e">token</span>
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">GetToken</span>() <span style="color:#66d9ef">string</span> {
	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">_token</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;&#34;</span> {
		<span style="color:#a6e22e">tokenByte</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">ioutil</span>.<span style="color:#a6e22e">ReadFile</span>(<span style="color:#a6e22e">tokenFile</span>)
		<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
			<span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Fatalln</span>(<span style="color:#e6db74">&#34;need login&#34;</span>)
		}

		<span style="color:#a6e22e">_token</span> = string(<span style="color:#a6e22e">tokenByte</span>)
	}
	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">_token</span>
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">md5s</span>(<span style="color:#a6e22e">s</span> <span style="color:#66d9ef">string</span>) <span style="color:#66d9ef">string</span> {
	<span style="color:#a6e22e">h</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">md5</span>.<span style="color:#a6e22e">New</span>()
	<span style="color:#a6e22e">h</span>.<span style="color:#a6e22e">Write</span>([]byte(<span style="color:#a6e22e">s</span>))
	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">hex</span>.<span style="color:#a6e22e">EncodeToString</span>(<span style="color:#a6e22e">h</span>.<span style="color:#a6e22e">Sum</span>(<span style="color:#66d9ef">nil</span>))
}

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">RespData</span> <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">interface</span>{}

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Response</span> <span style="color:#66d9ef">struct</span> {
	<span style="color:#a6e22e">Code</span>    <span style="color:#66d9ef">int</span>      <span style="color:#e6db74">`json:&#34;code&#34;`</span>
	<span style="color:#a6e22e">Message</span> <span style="color:#66d9ef">string</span>   <span style="color:#e6db74">`json:&#34;message&#34;`</span>
	<span style="color:#a6e22e">Data</span>    <span style="color:#a6e22e">RespData</span> <span style="color:#e6db74">`json:&#34;data&#34;`</span>
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">listServerDetail</span>(<span style="color:#a6e22e">res</span> <span style="color:#a6e22e">RespData</span>) {
	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">res</span> {
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">v</span>)
	}
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">ParseResponse</span>(<span style="color:#a6e22e">respBody</span> <span style="color:#66d9ef">string</span>) (<span style="color:#a6e22e">RespData</span>, <span style="color:#66d9ef">error</span>) {
	<span style="color:#a6e22e">response</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">Response</span>{}
	<span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">json</span>.<span style="color:#a6e22e">Unmarshal</span>([]byte(<span style="color:#a6e22e">respBody</span>), <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">response</span>)
	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
		panic(<span style="color:#a6e22e">err</span>)
	}

	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">Code</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">1005</span> {
		<span style="color:#a6e22e">TokenFail</span>()
	}

	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">Code</span> <span style="color:#f92672">!=</span> <span style="color:#ae81ff">0</span> {
		<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>, <span style="color:#a6e22e">errors</span>.<span style="color:#a6e22e">New</span>(<span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">Message</span>)
	}

	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">Data</span>, <span style="color:#66d9ef">nil</span>
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">login</span>(<span style="color:#a6e22e">user</span>, <span style="color:#a6e22e">password</span> <span style="color:#66d9ef">string</span>) {
	<span style="color:#a6e22e">url</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">host</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;api/login&#34;</span>
	<span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">errs</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">gorequest</span>.<span style="color:#a6e22e">New</span>().
		<span style="color:#a6e22e">Post</span>(<span style="color:#a6e22e">url</span>).
		<span style="color:#a6e22e">Type</span>(<span style="color:#e6db74">&#34;form&#34;</span>).
		<span style="color:#a6e22e">AppendHeader</span>(<span style="color:#e6db74">&#34;Accept&#34;</span>, <span style="color:#e6db74">&#34;application/json&#34;</span>).
		<span style="color:#a6e22e">Send</span>(<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Sprintf</span>(<span style="color:#e6db74">&#34;username=%s&amp;password=%s&#34;</span>, <span style="color:#a6e22e">user</span>, <span style="color:#a6e22e">md5s</span>(<span style="color:#a6e22e">password</span>))).
		<span style="color:#a6e22e">End</span>(<span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">response</span> <span style="color:#a6e22e">gorequest</span>.<span style="color:#a6e22e">Response</span>, <span style="color:#a6e22e">body</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">errs</span> []<span style="color:#66d9ef">error</span>) {
			<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">StatusCode</span> <span style="color:#f92672">!=</span> <span style="color:#ae81ff">200</span> {
				panic(<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Sprintf</span>(<span style="color:#e6db74">&#34;%s&#34;</span>, <span style="color:#a6e22e">errs</span>))
			}

			<span style="color:#a6e22e">respData</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">ParseResponse</span>(<span style="color:#a6e22e">body</span>)
			<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
				panic(<span style="color:#a6e22e">err</span>)
			}

			<span style="color:#75715e">//respData
</span><span style="color:#75715e"></span>			<span style="color:#a6e22e">SetToken</span>(<span style="color:#a6e22e">respData</span>[<span style="color:#e6db74">&#34;token&#34;</span>].(<span style="color:#66d9ef">string</span>))
		})

	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">errs</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
		<span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Fatalf</span>(<span style="color:#e6db74">&#34;%s&#34;</span>, <span style="color:#a6e22e">errs</span>)
	}
	<span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Infof</span>(<span style="color:#e6db74">&#34;your token is under %s\n&#34;</span>, <span style="color:#a6e22e">tokenFile</span>)
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">userAdd</span>(<span style="color:#a6e22e">roleId</span> <span style="color:#66d9ef">int</span>, <span style="color:#a6e22e">userName</span>, <span style="color:#a6e22e">email</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">status</span> <span style="color:#66d9ef">int</span>) {
	<span style="color:#a6e22e">url</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">host</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;api/user/add&#34;</span>
	<span style="color:#a6e22e">pass</span> <span style="color:#f92672">:=</span> <span style="color:#e6db74">&#34;111111&#34;</span>
	<span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">body</span>, <span style="color:#a6e22e">errs</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">gorequest</span>.<span style="color:#a6e22e">New</span>().<span style="color:#a6e22e">Post</span>(<span style="color:#a6e22e">url</span>).
		<span style="color:#a6e22e">AppendHeader</span>(<span style="color:#e6db74">&#34;Accept&#34;</span>, <span style="color:#e6db74">&#34;application/json&#34;</span>).
		<span style="color:#a6e22e">AppendHeader</span>(<span style="color:#e6db74">&#34;User-Agent&#34;</span>, <span style="color:#a6e22e">agent</span>).
		<span style="color:#a6e22e">AddCookie</span>(<span style="color:#a6e22e">authCookie</span>()).
		<span style="color:#a6e22e">Send</span>(<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Sprintf</span>(<span style="color:#e6db74">&#34;role_id=%d&amp;username=%s&amp;password=%s&amp;email=%s&amp;status=%d&#34;</span>,
			<span style="color:#a6e22e">roleId</span>, <span style="color:#a6e22e">userName</span>, <span style="color:#a6e22e">md5s</span>(<span style="color:#a6e22e">pass</span>), <span style="color:#a6e22e">email</span>, <span style="color:#a6e22e">status</span>)).
		<span style="color:#a6e22e">End</span>(<span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">response</span> <span style="color:#a6e22e">gorequest</span>.<span style="color:#a6e22e">Response</span>, <span style="color:#a6e22e">body</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">errs</span> []<span style="color:#66d9ef">error</span>) {
			<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">StatusCode</span> <span style="color:#f92672">!=</span> <span style="color:#ae81ff">200</span> {
				panic(<span style="color:#a6e22e">errs</span>)
			}
		})
	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">errs</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
		<span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Fatalln</span>(<span style="color:#a6e22e">errs</span>)
	}
	<span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Infof</span>(<span style="color:#e6db74">&#34;role_id=%d&amp;username=%s&amp;password=%s&amp;email=%s&amp;status=%d&#34;</span>,
		<span style="color:#a6e22e">roleId</span>, <span style="color:#a6e22e">userName</span>, <span style="color:#a6e22e">pass</span>, <span style="color:#a6e22e">email</span>, <span style="color:#a6e22e">status</span>)
	<span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Infoln</span>(<span style="color:#a6e22e">body</span>)
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">serverAdd</span>(<span style="color:#a6e22e">groupId</span> <span style="color:#66d9ef">int</span>, <span style="color:#a6e22e">name</span>, <span style="color:#a6e22e">ip</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">sshPort</span> <span style="color:#66d9ef">int</span>) {
	<span style="color:#a6e22e">url</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">host</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;api/server/add&#34;</span>
	<span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">body</span>, <span style="color:#a6e22e">errs</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">gorequest</span>.<span style="color:#a6e22e">New</span>().<span style="color:#a6e22e">Post</span>(<span style="color:#a6e22e">url</span>).
		<span style="color:#a6e22e">AppendHeader</span>(<span style="color:#e6db74">&#34;Accept&#34;</span>, <span style="color:#e6db74">&#34;application/json&#34;</span>).
		<span style="color:#a6e22e">AppendHeader</span>(<span style="color:#e6db74">&#34;User-Agent&#34;</span>, <span style="color:#a6e22e">agent</span>).
		<span style="color:#a6e22e">AddCookie</span>(<span style="color:#a6e22e">authCookie</span>()).
		<span style="color:#a6e22e">Send</span>(<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Sprintf</span>(<span style="color:#e6db74">&#34;group_id=%d&amp;name=%s&amp;ip=%s&amp;ssh_port=%d&#34;</span>,
			<span style="color:#a6e22e">groupId</span>, <span style="color:#a6e22e">name</span>, <span style="color:#a6e22e">ip</span>, <span style="color:#a6e22e">sshPort</span>)).
		<span style="color:#a6e22e">End</span>(<span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">response</span> <span style="color:#a6e22e">gorequest</span>.<span style="color:#a6e22e">Response</span>, <span style="color:#a6e22e">body</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">errs</span> []<span style="color:#66d9ef">error</span>) {
			<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">StatusCode</span> <span style="color:#f92672">!=</span> <span style="color:#ae81ff">200</span> {
				panic(<span style="color:#a6e22e">errs</span>)
			}
		})
	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">errs</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
		<span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Fatalln</span>(<span style="color:#a6e22e">errs</span>)
	}
	<span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Infof</span>(<span style="color:#e6db74">&#34;group_id=%d&amp;name=%s&amp;ip=%s&amp;ssh_port=%d\n&#34;</span>,
		<span style="color:#a6e22e">groupId</span>, <span style="color:#a6e22e">name</span>, <span style="color:#a6e22e">ip</span>, <span style="color:#a6e22e">sshPort</span>)
	<span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Infoln</span>(<span style="color:#a6e22e">body</span>)
}

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">QueryBind</span> <span style="color:#66d9ef">struct</span> {
	<span style="color:#a6e22e">Keyword</span> <span style="color:#66d9ef">string</span> <span style="color:#e6db74">`form:&#34;keyword&#34;`</span>
	<span style="color:#a6e22e">Offset</span>  <span style="color:#66d9ef">int</span>    <span style="color:#e6db74">`form:&#34;offset&#34;`</span>
	<span style="color:#a6e22e">Limit</span>   <span style="color:#66d9ef">int</span>    <span style="color:#e6db74">`form:&#34;limit&#34; binding:&#34;required,gte=1,lte=999&#34;`</span>
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">List</span>(<span style="color:#a6e22e">api</span> <span style="color:#66d9ef">string</span>) {
	<span style="color:#a6e22e">url</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">host</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">api</span>
	<span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">body</span>, <span style="color:#a6e22e">errs</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">gorequest</span>.<span style="color:#a6e22e">New</span>().<span style="color:#a6e22e">Get</span>(<span style="color:#a6e22e">url</span>).<span style="color:#a6e22e">Query</span>(<span style="color:#a6e22e">QueryBind</span>{<span style="color:#a6e22e">Keyword</span>: <span style="color:#e6db74">&#34;&#34;</span>, <span style="color:#a6e22e">Offset</span>: <span style="color:#ae81ff">0</span>, <span style="color:#a6e22e">Limit</span>: <span style="color:#ae81ff">7</span>}).
		<span style="color:#a6e22e">AppendHeader</span>(<span style="color:#e6db74">&#34;Accept&#34;</span>, <span style="color:#e6db74">&#34;application/json&#34;</span>).
		<span style="color:#a6e22e">AppendHeader</span>(<span style="color:#e6db74">&#34;User-Agent&#34;</span>, <span style="color:#a6e22e">agent</span>).
		<span style="color:#a6e22e">AddCookie</span>(<span style="color:#a6e22e">authCookie</span>()).
		<span style="color:#a6e22e">End</span>()
	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">errs</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
		<span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Fatalln</span>(<span style="color:#a6e22e">errs</span>)
	}
	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">serverBody</span> <span style="color:#a6e22e">Response</span>
	<span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">json</span>.<span style="color:#a6e22e">Unmarshal</span>([]byte(<span style="color:#a6e22e">body</span>), <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">serverBody</span>)
	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
		<span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Fatalln</span>(<span style="color:#a6e22e">err</span>)
	}
	<span style="color:#75715e">//log.Infoln(serverBody)
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">listServerDetail</span>(<span style="color:#a6e22e">serverBody</span>.<span style="color:#a6e22e">Data</span>)
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">authCookie</span>() <span style="color:#f92672">*</span><span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">Cookie</span> {
	<span style="color:#a6e22e">cookie</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">Cookie</span>{}
	<span style="color:#a6e22e">cookie</span>.<span style="color:#a6e22e">Name</span> = <span style="color:#e6db74">&#34;_syd_identity&#34;</span>
	<span style="color:#a6e22e">cookie</span>.<span style="color:#a6e22e">Value</span> = <span style="color:#a6e22e">GetToken</span>()
	<span style="color:#66d9ef">return</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">cookie</span>
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">usages</span>() {
	<span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">_</span> = <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Fprintf</span>(<span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">Stderr</span>, <span style="color:#e6db74">`syncd-cli version:1.1.0
</span><span style="color:#e6db74">Usage syncd-cli &lt;command&gt; [-afhpu] 
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">command &lt;apply|get&gt;  &lt;user|server&gt; [?-f files]
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">add server example: 
</span><span style="color:#e6db74">	1) syncd-cli apply user -f files
</span><span style="color:#e6db74">	2) syncd-cli apply server -f files
</span><span style="color:#e6db74">list server and user example:
</span><span style="color:#e6db74">	1) syncd-cli get user
</span><span style="color:#e6db74">	2) syncd-cli get server
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">Options:
</span><span style="color:#e6db74">`</span>)
	<span style="color:#a6e22e">flag</span>.<span style="color:#a6e22e">PrintDefaults</span>()
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">init</span>() {
	<span style="color:#a6e22e">flag</span>.<span style="color:#a6e22e">StringVarP</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">host</span>, <span style="color:#e6db74">&#34;hostApi&#34;</span>, <span style="color:#e6db74">&#34;a&#34;</span>, <span style="color:#e6db74">&#34;http://127.0.0.1:8878/&#34;</span>, <span style="color:#e6db74">&#34;sycnd server addr api&#34;</span>)
	<span style="color:#75715e">//flag.StringVarP(&amp;host, &#34;hostApi&#34;, &#34;a&#34;, &#34;https://syncd.fenghong.tech/&#34;, &#34;sycnd server addr api&#34;)
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">flag</span>.<span style="color:#a6e22e">StringVarP</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">user</span>, <span style="color:#e6db74">&#34;user&#34;</span>, <span style="color:#e6db74">&#34;u&#34;</span>, <span style="color:#e6db74">&#34;syncd&#34;</span>, <span style="color:#e6db74">&#34;user for syncd tools&#34;</span>)
	<span style="color:#a6e22e">flag</span>.<span style="color:#a6e22e">StringVarP</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">password</span>, <span style="color:#e6db74">&#34;password&#34;</span>, <span style="color:#e6db74">&#34;p&#34;</span>, <span style="color:#e6db74">&#34;111111&#34;</span>, <span style="color:#e6db74">&#34;password for syncd tools&#34;</span>)

	<span style="color:#a6e22e">flag</span>.<span style="color:#a6e22e">StringVarP</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">add</span>, <span style="color:#e6db74">&#34;add&#34;</span>, <span style="color:#e6db74">&#34;d&#34;</span>, <span style="color:#e6db74">&#34;&#34;</span>, <span style="color:#e6db74">&#34;add user or server(deprecated)&#34;</span>)
	<span style="color:#a6e22e">flag</span>.<span style="color:#a6e22e">StringVarP</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">files</span>, <span style="color:#e6db74">&#34;file&#34;</span>, <span style="color:#e6db74">&#34;f&#34;</span>, <span style="color:#e6db74">&#34;&#34;</span>, <span style="color:#e6db74">&#34;add server/user from files&#34;</span>)
	<span style="color:#a6e22e">flag</span>.<span style="color:#a6e22e">StringVarP</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">list</span>, <span style="color:#e6db74">&#34;list&#34;</span>, <span style="color:#e6db74">&#34;l&#34;</span>, <span style="color:#e6db74">&#34;&#34;</span>, <span style="color:#e6db74">&#34;list server and user(deprecated)&#34;</span>)
	<span style="color:#a6e22e">flag</span>.<span style="color:#a6e22e">IntVarP</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">GroupId</span>, <span style="color:#e6db74">&#34;roleGroupId&#34;</span>, <span style="color:#e6db74">&#34;g&#34;</span>, <span style="color:#ae81ff">1</span>, <span style="color:#e6db74">&#34;group_id for cluster // or role_id for user, must be needed(deprecated)&#34;</span>)
	<span style="color:#a6e22e">flag</span>.<span style="color:#a6e22e">StringSliceVarP</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">Ips</span>, <span style="color:#e6db74">&#34;ipEmail&#34;</span>, <span style="color:#e6db74">&#34;i&#34;</span>, []<span style="color:#66d9ef">string</span>{<span style="color:#e6db74">&#34;&#34;</span>}, <span style="color:#e6db74">&#34;set ip/hostname to the cluster with names // or email for add user, use &#39;,&#39; to split(deprecated)&#34;</span>)
	<span style="color:#a6e22e">flag</span>.<span style="color:#a6e22e">StringSliceVarP</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">Names</span>, <span style="color:#e6db74">&#34;names&#34;</span>, <span style="color:#e6db74">&#34;n&#34;</span>, []<span style="color:#66d9ef">string</span>{<span style="color:#e6db74">&#34;&#34;</span>}, <span style="color:#e6db74">&#34;set names to the cluster with ips, use &#39;,&#39; to split(deprecated)&#34;</span>)
	<span style="color:#a6e22e">flag</span>.<span style="color:#a6e22e">IntSliceVarP</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">SSHPort</span>, <span style="color:#e6db74">&#34;sshPort&#34;</span>, <span style="color:#e6db74">&#34;s&#34;</span>, []<span style="color:#66d9ef">int</span>{}, <span style="color:#e6db74">&#34;set sshPort to the cluster, use &#39;,&#39; to split(deprecated)&#34;</span>)
	<span style="color:#a6e22e">flag</span>.<span style="color:#a6e22e">BoolVarP</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">h</span>, <span style="color:#e6db74">&#34;help&#34;</span>, <span style="color:#e6db74">&#34;h&#34;</span>, <span style="color:#66d9ef">false</span>, <span style="color:#e6db74">&#34;this help&#34;</span>)
	<span style="color:#a6e22e">flag</span>.<span style="color:#a6e22e">Usage</span> = <span style="color:#a6e22e">usages</span>
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">useV100</span>() {
	<span style="color:#75715e">//是否列出server,user
</span><span style="color:#75715e"></span>
	<span style="color:#66d9ef">switch</span> <span style="color:#a6e22e">list</span> {
	<span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#34;user&#34;</span>:
		<span style="color:#a6e22e">List</span>(<span style="color:#e6db74">&#34;api/user/list&#34;</span>)
	<span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#34;server&#34;</span>:
		<span style="color:#a6e22e">List</span>(<span style="color:#e6db74">&#34;api/server/list&#34;</span>)
	<span style="color:#66d9ef">default</span>:
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;use `syncd-cli get [user | server]` instead&#34;</span>)
	}

	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">Ips</span>[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;&#34;</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">Names</span>[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;&#34;</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">SSHPort</span>[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> {
		<span style="color:#66d9ef">return</span>
	}
	<span style="color:#66d9ef">switch</span> <span style="color:#a6e22e">add</span> {
	<span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#34;user&#34;</span>:
		<span style="color:#75715e">// userAdd() //easy to add
</span><span style="color:#75715e"></span>		<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">k</span>, <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">Ips</span> {
			<span style="color:#a6e22e">userAdd</span>(<span style="color:#a6e22e">GroupId</span>, <span style="color:#a6e22e">Names</span>[<span style="color:#a6e22e">k</span>], <span style="color:#a6e22e">v</span>, <span style="color:#ae81ff">1</span>)
		}
	<span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#34;server&#34;</span>:
		<span style="color:#75715e">// Ips未指定,则返回
</span><span style="color:#75715e"></span>		<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">k</span>, <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">Ips</span> {
			<span style="color:#a6e22e">serverAdd</span>(<span style="color:#a6e22e">GroupId</span>, <span style="color:#a6e22e">Names</span>[<span style="color:#a6e22e">k</span>], <span style="color:#a6e22e">v</span>, <span style="color:#a6e22e">SSHPort</span>[<span style="color:#a6e22e">k</span>])
		}
	}
}

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">server</span> <span style="color:#66d9ef">struct</span> {
	<span style="color:#a6e22e">gid</span>  <span style="color:#66d9ef">int</span>
	<span style="color:#a6e22e">name</span> <span style="color:#66d9ef">string</span>
	<span style="color:#a6e22e">ip</span>   <span style="color:#66d9ef">string</span>
	<span style="color:#a6e22e">port</span> <span style="color:#66d9ef">int</span>
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">readFromServerFile</span>(<span style="color:#a6e22e">file</span> <span style="color:#66d9ef">string</span>) []<span style="color:#a6e22e">server</span> {
	<span style="color:#a6e22e">openFile</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">Open</span>(<span style="color:#a6e22e">file</span>)
	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
		<span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Fatalf</span>(<span style="color:#e6db74">&#34;%v&#34;</span>,<span style="color:#a6e22e">err</span>)
	}
	<span style="color:#66d9ef">defer</span> <span style="color:#a6e22e">openFile</span>.<span style="color:#a6e22e">Close</span>()
	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">newserver</span> []<span style="color:#a6e22e">server</span>
	<span style="color:#a6e22e">scanner</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">bufio</span>.<span style="color:#a6e22e">NewScanner</span>(<span style="color:#a6e22e">openFile</span>)
	<span style="color:#a6e22e">scanner</span>.<span style="color:#a6e22e">Split</span>(<span style="color:#a6e22e">bufio</span>.<span style="color:#a6e22e">ScanLines</span>)
	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">scanner</span>.<span style="color:#a6e22e">Scan</span>() {
		<span style="color:#a6e22e">line</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">scanner</span>.<span style="color:#a6e22e">Text</span>()

		<span style="color:#66d9ef">if</span> len(<span style="color:#a6e22e">line</span>) <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> {
			<span style="color:#66d9ef">break</span>
		}
		<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">gid</span>, <span style="color:#a6e22e">port</span> <span style="color:#66d9ef">int</span>
		<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">name</span>, <span style="color:#a6e22e">ip</span> <span style="color:#66d9ef">string</span>
		<span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Sscanf</span>(<span style="color:#a6e22e">line</span>, <span style="color:#e6db74">&#34;%d %s %s %d&#34;</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">gid</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">name</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">ip</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">port</span>)
		<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
			<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>
		}
		<span style="color:#a6e22e">newserver</span> = append(<span style="color:#a6e22e">newserver</span>, <span style="color:#a6e22e">server</span>{
			<span style="color:#a6e22e">gid</span>:  <span style="color:#a6e22e">gid</span>,
			<span style="color:#a6e22e">name</span>: <span style="color:#a6e22e">name</span>,
			<span style="color:#a6e22e">ip</span>:   <span style="color:#a6e22e">ip</span>,
			<span style="color:#a6e22e">port</span>: <span style="color:#a6e22e">port</span>,
		})
	}
	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">newserver</span>
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">flag</span>.<span style="color:#a6e22e">Parse</span>()
	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">h</span> {
		<span style="color:#a6e22e">flag</span>.<span style="color:#a6e22e">Usage</span>()
		<span style="color:#66d9ef">return</span>
	}

	<span style="color:#75715e">// 登录认证
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">login</span>(<span style="color:#a6e22e">user</span>, <span style="color:#a6e22e">password</span>)

	<span style="color:#75715e">// 使用v1.0.0
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">list</span> <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;&#34;</span> {
		<span style="color:#a6e22e">useV100</span>()
	}

	<span style="color:#66d9ef">switch</span> <span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">Args</span>[<span style="color:#ae81ff">1</span>] {
	<span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#34;apply&#34;</span>:
		<span style="color:#66d9ef">switch</span> <span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">Args</span>[<span style="color:#ae81ff">2</span>] {
		<span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#34;server&#34;</span>:
			<span style="color:#a6e22e">ser</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">readFromServerFile</span>(<span style="color:#a6e22e">files</span>)
			<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">ser</span> {
				<span style="color:#a6e22e">serverAdd</span>(<span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">gid</span>, <span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">name</span>, <span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">ip</span>, <span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">port</span>)
			}
		<span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#34;user&#34;</span>:
			<span style="color:#a6e22e">usr</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">readFromServerFile</span>(<span style="color:#a6e22e">files</span>)
			<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">usr</span> {
				<span style="color:#75715e">// 偷个懒, 数据类型一样,结构一样, 所以从文件读取的是一样的
</span><span style="color:#75715e"></span>				<span style="color:#75715e">// v.gid ==&gt; roleId
</span><span style="color:#75715e"></span>				<span style="color:#75715e">// v.name==&gt; username
</span><span style="color:#75715e"></span>				<span style="color:#75715e">// v.ip  ==&gt; email
</span><span style="color:#75715e"></span>				<span style="color:#75715e">// v.port==&gt; status
</span><span style="color:#75715e"></span>				<span style="color:#a6e22e">userAdd</span>(<span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">gid</span>, <span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">name</span>, <span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">ip</span>, <span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">port</span>)
			}
		<span style="color:#66d9ef">default</span>:
			<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;syncd-cli apply [user|server] -f files&#34;</span>)
		}

	<span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#34;get&#34;</span>:
		<span style="color:#66d9ef">switch</span> <span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">Args</span>[<span style="color:#ae81ff">2</span>] {
		<span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#34;user&#34;</span>:
			<span style="color:#a6e22e">List</span>(<span style="color:#e6db74">&#34;api/user/list&#34;</span>)
		<span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#34;server&#34;</span>:
			<span style="color:#a6e22e">List</span>(<span style="color:#e6db74">&#34;api/server/list&#34;</span>)
		<span style="color:#66d9ef">default</span>:
			<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;syncd-cli get [user | server]&#34;</span>)
		}
	<span style="color:#66d9ef">default</span>:
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>()
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;	Use syncd-cli@v1.1.0 instead&#34;</span>)
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;syncd-cli &lt;get|apply&gt; &lt;user|server&gt; [?-f filename&gt;]&#34;</span>)
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;syncd-cli &lt;get|apply&gt; &lt;user|server&gt; [?--file filename]&#34;</span>)
	}

}

</code></pre></div>
        </div>
        <!-- tags -->
        <div class="mb-3">
          <h5 class="d-inline-block mr-3">Tags:</h5>
          <ul class="list-inline d-inline-block">
            <a>
            <li class="list-inline-item"><a class="text-color" href="/tags/go"> 
            Go</a>
            <a>
            <li class="list-inline-item"><a class="text-color" href="/tags/gin"> , 
            Gin</a>
            <a>
            <li class="list-inline-item"><a class="text-color" href="/tags/flag"> , 
            Flag</a>
            <a>
            <li class="list-inline-item"><a class="text-color" href="/tags/syncd"> , 
            Syncd</a>
            <a>
            <li class="list-inline-item"><a class="text-color" href="/tags/gorequest"> , 
            Gorequest</a>
            <a>
            <li class="list-inline-item"><a class="text-color" href="/tags/logrus"> , 
            Logrus</a>
            
          </ul>
        </div>
        <!-- previous -->
        <div class="mb-3 link-article">
    <div class="pre-article">
        
            <div><i class="fa fa-arrow-left"></i> 上一篇</div>
            <a href="https://www.fenghong.tech/blog/algorithm/lrucache/">LRU 算法</a>
        
    </div>
    <div class="next-article">
        
            <div>下一篇 <i class="fa fa-arrow-right"></i></div>
            <a href="https://www.fenghong.tech/blog/kubernetes/kubernetes-uk8s-ci-cd/">基于uk8s部署的CI/CD</a>
        
    </div>
</div>
        <!-- previous -->

        <!-- recommend -->
        

<div class="mb-3">
  <h2>文章推荐</h2>
  <ul class="related">
  
    <li><a href="/blog/go/go-flag/">go flag</a></li>
  
    <li><a href="/blog/go/gin-use-in-webhook/">gin实现webhook</a></li>
  
    <li><a href="/blog/go/go-ssh/">go ssh实现</a></li>
  
    <li><a href="/blog/algorithm/paxos/">go Paxos</a></li>
  
    <li><a href="/blog/go/go-filemode/">go filemode 源码理解</a></li>
  
  </ul>
</div>


        <!-- comments -->

        
        <div id="gitalk-container"></div>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
        <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
        <script>
          window.onload = function() {
              const gitalk = new Gitalk({
              clientID: 'a0a546df858aafb5300e',
              clientSecret: '67d7b40de25c072fc38840ffb9c06ceab7ef5080',
              repo: 'oldthreefeng.github.io',
              owner: 'oldthreefeng',
              admin: ['oldthreefeng'],
              id: hex_md5(hex_md5(window.location.pathname + window.location.hash)), 
              distractionFreeMode: false 
            });
            (function() {
              if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
                document.getElementById('gitalk-container').innerHTML = 'Gitalk comments not available by default when the website is previewed locally.';
                return;
              }
              gitalk.render('gitalk-container');
            })();
          }
        </script>
        
      </div>
      <!-- sidebar -->
<aside class="col-lg-4 order-1 order-lg-2">
  <!-- tags -->
  <div class="bg-white px-4 py-5 box-shadow mb-5 word-cloud">
    <h4 class="mb-4">标签</h4>
    
      
      
      
      
      
      
      
      
      
      
      
      <div id="tag-cloud" style="padding: 5px 15px">
      
        
          
          
          
          <a href="/tags/acme" style="font-size:1.0188679245283019rem">acme</a>
        
      
        
          
          
          &middot;
          <a href="/tags/acmetiny" style="font-size:1.0188679245283019rem">acmetiny</a>
        
      
        
          
          
          &middot;
          <a href="/tags/alertmanager" style="font-size:1rem">alertmanager</a>
        
      
        
          
          
          &middot;
          <a href="/tags/algorithm" style="font-size:1.1132075471698113rem">algorithm</a>
        
      
        
          
          
          &middot;
          <a href="/tags/aliyun" style="font-size:1rem">aliyun</a>
        
      
        
          
          
          &middot;
          <a href="/tags/ansible" style="font-size:1.0754716981132075rem">ansible</a>
        
      
        
          
          
          &middot;
          <a href="/tags/apisix" style="font-size:1rem">apisix</a>
        
      
        
          
          
          &middot;
          <a href="/tags/arm64" style="font-size:1.0188679245283019rem">arm64</a>
        
      
        
          
          
          &middot;
          <a href="/tags/authorization" style="font-size:1rem">authorization</a>
        
      
        
          
          
          &middot;
          <a href="/tags/backup" style="font-size:1.0377358490566038rem">backup</a>
        
      
        
          
          
          &middot;
          <a href="/tags/binarysearch" style="font-size:1.0188679245283019rem">binarysearch</a>
        
      
        
          
          
          &middot;
          <a href="/tags/binlog" style="font-size:1rem">binlog</a>
        
      
        
          
          
          &middot;
          <a href="/tags/bit" style="font-size:1.0188679245283019rem">bit</a>
        
      
        
          
          
          &middot;
          <a href="/tags/bug" style="font-size:1.0188679245283019rem">bug</a>
        
      
        
          
          
          &middot;
          <a href="/tags/cache" style="font-size:1rem">cache</a>
        
      
        
          
          
          &middot;
          <a href="/tags/certbot" style="font-size:1rem">certbot</a>
        
      
        
          
          
          &middot;
          <a href="/tags/channel" style="font-size:1rem">channel</a>
        
      
        
          
          
          &middot;
          <a href="/tags/chrome" style="font-size:1.0188679245283019rem">chrome</a>
        
      
        
          
          
          &middot;
          <a href="/tags/ci" style="font-size:1rem">ci</a>
        
      
        
          
          
          &middot;
          <a href="/tags/cluster" style="font-size:1.1132075471698113rem">cluster</a>
        
      
        
          
          
          &middot;
          <a href="/tags/cobra" style="font-size:1rem">cobra</a>
        
      
        
          
          
          &middot;
          <a href="/tags/coco" style="font-size:1.0377358490566038rem">coco</a>
        
      
        
          
          
          &middot;
          <a href="/tags/coding" style="font-size:1rem">coding</a>
        
      
        
          
          
          &middot;
          <a href="/tags/computer" style="font-size:1rem">computer</a>
        
      
        
          
          
          &middot;
          <a href="/tags/consul" style="font-size:1rem">consul</a>
        
      
        
          
          
          &middot;
          <a href="/tags/containerd" style="font-size:1.0188679245283019rem">containerd</a>
        
      
        
          
          
          &middot;
          <a href="/tags/coredns" style="font-size:1rem">coredns</a>
        
      
        
          
          
          &middot;
          <a href="/tags/cors" style="font-size:1rem">cors</a>
        
      
        
          
          
          &middot;
          <a href="/tags/crypto" style="font-size:1rem">crypto</a>
        
      
        
          
          
          &middot;
          <a href="/tags/curl" style="font-size:1rem">curl</a>
        
      
        
          
          
          &middot;
          <a href="/tags/dashboard" style="font-size:1rem">dashboard</a>
        
      
        
          
          
          &middot;
          <a href="/tags/dcdn" style="font-size:1rem">dcdn</a>
        
      
        
          
          
          &middot;
          <a href="/tags/debt" style="font-size:1rem">debt</a>
        
      
        
          
          
          &middot;
          <a href="/tags/devops" style="font-size:1.0188679245283019rem">devops</a>
        
      
        
          
          
          &middot;
          <a href="/tags/dingding" style="font-size:1rem">dingding</a>
        
      
        
          
          
          &middot;
          <a href="/tags/disk" style="font-size:1rem">disk</a>
        
      
        
          
          
          &middot;
          <a href="/tags/dmesg" style="font-size:1rem">dmesg</a>
        
      
        
          
          
          &middot;
          <a href="/tags/dns" style="font-size:1rem">dns</a>
        
      
        
          
          
          &middot;
          <a href="/tags/docker" style="font-size:1.2264150943396226rem">docker</a>
        
      
        
          
          
          &middot;
          <a href="/tags/doublylinkedlist" style="font-size:1rem">doublylinkedlist</a>
        
      
        
          
          
          &middot;
          <a href="/tags/elk" style="font-size:1rem">elk</a>
        
      
        
          
          
          &middot;
          <a href="/tags/error" style="font-size:1rem">error</a>
        
      
        
          
          
          &middot;
          <a href="/tags/etcd" style="font-size:1.0377358490566038rem">etcd</a>
        
      
        
          
          
          &middot;
          <a href="/tags/exec" style="font-size:1.0188679245283019rem">exec</a>
        
      
        
          
          
          &middot;
          <a href="/tags/exp" style="font-size:1rem">exp</a>
        
      
        
          
          
          &middot;
          <a href="/tags/federated" style="font-size:1rem">federated</a>
        
      
        
          
          
          &middot;
          <a href="/tags/filecoin" style="font-size:1rem">filecoin</a>
        
      
        
          
          
          &middot;
          <a href="/tags/find" style="font-size:1rem">find</a>
        
      
        
          
          
          &middot;
          <a href="/tags/firewalld" style="font-size:1rem">firewalld</a>
        
      
        
          
          
          &middot;
          <a href="/tags/fix" style="font-size:1.0377358490566038rem">fix</a>
        
      
        
          
          
          &middot;
          <a href="/tags/flag" style="font-size:1.0188679245283019rem">flag</a>
        
      
        
          
          
          &middot;
          <a href="/tags/flannel" style="font-size:1rem">flannel</a>
        
      
        
          
          
          &middot;
          <a href="/tags/food" style="font-size:1.0188679245283019rem">food</a>
        
      
        
          
          
          &middot;
          <a href="/tags/frp" style="font-size:1.0377358490566038rem">frp</a>
        
      
        
          
          
          &middot;
          <a href="/tags/ftp" style="font-size:1.0188679245283019rem">ftp</a>
        
      
        
          
          
          &middot;
          <a href="/tags/games" style="font-size:1rem">games</a>
        
      
        
          
          
          &middot;
          <a href="/tags/gin" style="font-size:1.0188679245283019rem">gin</a>
        
      
        
          
          
          &middot;
          <a href="/tags/git" style="font-size:1.2075471698113207rem">git</a>
        
      
        
          
          
          &middot;
          <a href="/tags/github" style="font-size:1.0188679245283019rem">github</a>
        
      
        
          
          
          &middot;
          <a href="/tags/gitlab" style="font-size:1rem">gitlab</a>
        
      
        
          
          
          &middot;
          <a href="/tags/go" style="font-size:1.320754716981132rem">go</a>
        
      
        
          
          
          &middot;
          <a href="/tags/go-vim" style="font-size:1rem">go-vim</a>
        
      
        
          
          
          &middot;
          <a href="/tags/gogs" style="font-size:1.0566037735849056rem">gogs</a>
        
      
        
          
          
          &middot;
          <a href="/tags/goland" style="font-size:1.0188679245283019rem">goland</a>
        
      
        
          
          
          &middot;
          <a href="/tags/golang" style="font-size:1.0377358490566038rem">golang</a>
        
      
        
          
          
          &middot;
          <a href="/tags/gorequest" style="font-size:1rem">gorequest</a>
        
      
        
          
          
          &middot;
          <a href="/tags/grafana" style="font-size:1.0188679245283019rem">grafana</a>
        
      
        
          
          
          &middot;
          <a href="/tags/grub" style="font-size:1rem">grub</a>
        
      
        
          
          
          &middot;
          <a href="/tags/hack" style="font-size:1.0188679245283019rem">hack</a>
        
      
        
          
          
          &middot;
          <a href="/tags/haproxy" style="font-size:1.0377358490566038rem">haproxy</a>
        
      
        
          
          
          &middot;
          <a href="/tags/harbor" style="font-size:1.0188679245283019rem">harbor</a>
        
      
        
          
          
          &middot;
          <a href="/tags/hash" style="font-size:1.0188679245283019rem">hash</a>
        
      
        
          
          
          &middot;
          <a href="/tags/hashmap" style="font-size:1rem">hashmap</a>
        
      
        
          
          
          &middot;
          <a href="/tags/helm" style="font-size:1.0188679245283019rem">helm</a>
        
      
        
          
          
          &middot;
          <a href="/tags/hexo" style="font-size:1.0377358490566038rem">hexo</a>
        
      
        
          
          
          &middot;
          <a href="/tags/http" style="font-size:1.0754716981132075rem">http</a>
        
      
        
          
          
          &middot;
          <a href="/tags/https" style="font-size:1rem">https</a>
        
      
        
          
          
          &middot;
          <a href="/tags/index" style="font-size:1rem">index</a>
        
      
        
          
          
          &middot;
          <a href="/tags/ingress" style="font-size:1.0377358490566038rem">ingress</a>
        
      
        
          
          
          &middot;
          <a href="/tags/inotify" style="font-size:1rem">inotify</a>
        
      
        
          
          
          &middot;
          <a href="/tags/internet" style="font-size:1.169811320754717rem">internet</a>
        
      
        
          
          
          &middot;
          <a href="/tags/interview" style="font-size:1rem">interview</a>
        
      
        
          
          
          &middot;
          <a href="/tags/iptables" style="font-size:1.0377358490566038rem">iptables</a>
        
      
        
          
          
          &middot;
          <a href="/tags/ipvs" style="font-size:1.0188679245283019rem">ipvs</a>
        
      
        
          
          
          &middot;
          <a href="/tags/java" style="font-size:1.0754716981132075rem">java</a>
        
      
        
          
          
          &middot;
          <a href="/tags/jeju" style="font-size:1rem">jeju</a>
        
      
        
          
          
          &middot;
          <a href="/tags/jenkins" style="font-size:1.0943396226415094rem">jenkins</a>
        
      
        
          
          
          &middot;
          <a href="/tags/jetbrains" style="font-size:1rem">jetbrains</a>
        
      
        
          
          
          &middot;
          <a href="/tags/jumpserver" style="font-size:1.0566037735849056rem">jumpserver</a>
        
      
        
          
          
          &middot;
          <a href="/tags/jvm" style="font-size:1rem">jvm</a>
        
      
        
          
          
          &middot;
          <a href="/tags/keepalived" style="font-size:1rem">keepalived</a>
        
      
        
          
          
          &middot;
          <a href="/tags/kernel" style="font-size:1rem">kernel</a>
        
      
        
          
          
          &middot;
          <a href="/tags/knowledge" style="font-size:1rem">knowledge</a>
        
      
        
          
          
          &middot;
          <a href="/tags/kube-proxy" style="font-size:1.0188679245283019rem">kube-proxy</a>
        
      
        
          
          
          &middot;
          <a href="/tags/kubernetes" style="font-size:1.3962264150943395rem">kubernetes</a>
        
      
        
          
          
          &middot;
          <a href="/tags/kubernetesrbac" style="font-size:1rem">kubernetesrbac</a>
        
      
        
          
          
          &middot;
          <a href="/tags/kubernetesssl" style="font-size:1.0188679245283019rem">kubernetesssl</a>
        
      
        
          
          
          &middot;
          <a href="/tags/kuboard" style="font-size:1.0566037735849056rem">kuboard</a>
        
      
        
          
          
          &middot;
          <a href="/tags/lb" style="font-size:1rem">lb</a>
        
      
        
          
          
          &middot;
          <a href="/tags/learning" style="font-size:1.0566037735849056rem">learning</a>
        
      
        
          
          
          &middot;
          <a href="/tags/leetcode" style="font-size:1.0188679245283019rem">leetcode</a>
        
      
        
          
          
          &middot;
          <a href="/tags/libcurl" style="font-size:1rem">libcurl</a>
        
      
        
          
          
          &middot;
          <a href="/tags/libssh2" style="font-size:1rem">libssh2</a>
        
      
        
          
          
          &middot;
          <a href="/tags/link" style="font-size:1rem">link</a>
        
      
        
          
          
          &middot;
          <a href="/tags/linux" style="font-size:1.9811320754716981rem">linux</a>
        
      
        
          
          
          &middot;
          <a href="/tags/living" style="font-size:1rem">living</a>
        
      
        
          
          
          &middot;
          <a href="/tags/lnux" style="font-size:1rem">lnux</a>
        
      
        
          
          
          &middot;
          <a href="/tags/log" style="font-size:1.0566037735849056rem">log</a>
        
      
        
          
          
          &middot;
          <a href="/tags/logrus" style="font-size:1rem">logrus</a>
        
      
        
          
          
          &middot;
          <a href="/tags/logs" style="font-size:1rem">logs</a>
        
      
        
          
          
          &middot;
          <a href="/tags/logstash" style="font-size:1rem">logstash</a>
        
      
        
          
          
          &middot;
          <a href="/tags/loki" style="font-size:1rem">loki</a>
        
      
        
          
          
          &middot;
          <a href="/tags/lru" style="font-size:1rem">lru</a>
        
      
        
          
          
          &middot;
          <a href="/tags/luna" style="font-size:1rem">luna</a>
        
      
        
          
          
          &middot;
          <a href="/tags/lvm" style="font-size:1rem">lvm</a>
        
      
        
          
          
          &middot;
          <a href="/tags/lvs" style="font-size:1rem">lvs</a>
        
      
        
          
          
          &middot;
          <a href="/tags/mac" style="font-size:1rem">mac</a>
        
      
        
          
          
          &middot;
          <a href="/tags/malaysia" style="font-size:1rem">malaysia</a>
        
      
        
          
          
          &middot;
          <a href="/tags/manage" style="font-size:1rem">manage</a>
        
      
        
          
          
          &middot;
          <a href="/tags/map" style="font-size:1rem">map</a>
        
      
        
          
          
          &middot;
          <a href="/tags/mariadb" style="font-size:1.0377358490566038rem">mariadb</a>
        
      
        
          
          
          &middot;
          <a href="/tags/markdown" style="font-size:1.0188679245283019rem">markdown</a>
        
      
        
          
          
          &middot;
          <a href="/tags/mfa" style="font-size:1rem">mfa</a>
        
      
        
          
          
          &middot;
          <a href="/tags/mha" style="font-size:1rem">mha</a>
        
      
        
          
          
          &middot;
          <a href="/tags/mode" style="font-size:1rem">mode</a>
        
      
        
          
          
          &middot;
          <a href="/tags/module" style="font-size:1rem">module</a>
        
      
        
          
          
          &middot;
          <a href="/tags/mount" style="font-size:1rem">mount</a>
        
      
        
          
          
          &middot;
          <a href="/tags/mysql" style="font-size:1.2452830188679245rem">mysql</a>
        
      
        
          
          
          &middot;
          <a href="/tags/navicat" style="font-size:1rem">navicat</a>
        
      
        
          
          
          &middot;
          <a href="/tags/network" style="font-size:1rem">network</a>
        
      
        
          
          
          &middot;
          <a href="/tags/nfs" style="font-size:1.0754716981132075rem">nfs</a>
        
      
        
          
          
          &middot;
          <a href="/tags/nginx" style="font-size:1.2264150943396226rem">nginx</a>
        
      
        
          
          
          &middot;
          <a href="/tags/nginxingress" style="font-size:1.0566037735849056rem">nginxingress</a>
        
      
        
          
          
          &middot;
          <a href="/tags/node_exporter" style="font-size:1.0188679245283019rem">node_exporter</a>
        
      
        
          
          
          &middot;
          <a href="/tags/numpy" style="font-size:1rem">numpy</a>
        
      
        
          
          
          &middot;
          <a href="/tags/ops" style="font-size:1.2452830188679245rem">ops</a>
        
      
        
          
          
          &middot;
          <a href="/tags/owncloud" style="font-size:1rem">owncloud</a>
        
      
        
          
          
          &middot;
          <a href="/tags/password" style="font-size:1rem">password</a>
        
      
        
          
          
          &middot;
          <a href="/tags/paxos" style="font-size:1.0188679245283019rem">paxos</a>
        
      
        
          
          
          &middot;
          <a href="/tags/php" style="font-size:1rem">php</a>
        
      
        
          
          
          &middot;
          <a href="/tags/pipeline" style="font-size:1rem">pipeline</a>
        
      
        
          
          
          &middot;
          <a href="/tags/polynomial" style="font-size:1rem">polynomial</a>
        
      
        
          
          
          &middot;
          <a href="/tags/problem" style="font-size:1rem">problem</a>
        
      
        
          
          
          &middot;
          <a href="/tags/prometheus" style="font-size:1.0943396226415094rem">prometheus</a>
        
      
        
          
          
          &middot;
          <a href="/tags/pv" style="font-size:1.0754716981132075rem">pv</a>
        
      
        
          
          
          &middot;
          <a href="/tags/pvc" style="font-size:1.0754716981132075rem">pvc</a>
        
      
        
          
          
          &middot;
          <a href="/tags/python" style="font-size:1.0943396226415094rem">python</a>
        
      
        
          
          
          &middot;
          <a href="/tags/queue" style="font-size:1rem">queue</a>
        
      
        
          
          
          &middot;
          <a href="/tags/qw3xt" style="font-size:1rem">qw3xt</a>
        
      
        
          
          
          &middot;
          <a href="/tags/rabbitmq" style="font-size:1.0188679245283019rem">rabbitmq</a>
        
      
        
          
          
          &middot;
          <a href="/tags/raft" style="font-size:1rem">raft</a>
        
      
        
          
          
          &middot;
          <a href="/tags/rebase" style="font-size:1rem">rebase</a>
        
      
        
          
          
          &middot;
          <a href="/tags/redis" style="font-size:1.0377358490566038rem">redis</a>
        
      
        
          
          
          &middot;
          <a href="/tags/resources" style="font-size:1.0188679245283019rem">resources</a>
        
      
        
          
          
          &middot;
          <a href="/tags/rsa" style="font-size:1rem">rsa</a>
        
      
        
          
          
          &middot;
          <a href="/tags/rsync" style="font-size:1.0188679245283019rem">rsync</a>
        
      
        
          
          
          &middot;
          <a href="/tags/safe" style="font-size:1.0754716981132075rem">safe</a>
        
      
        
          
          
          &middot;
          <a href="/tags/samba" style="font-size:1rem">samba</a>
        
      
        
          
          
          &middot;
          <a href="/tags/sealos" style="font-size:1rem">sealos</a>
        
      
        
          
          
          &middot;
          <a href="/tags/secure" style="font-size:1rem">secure</a>
        
      
        
          
          
          &middot;
          <a href="/tags/sed" style="font-size:1rem">sed</a>
        
      
        
          
          
          &middot;
          <a href="/tags/server" style="font-size:1.2075471698113207rem">server</a>
        
      
        
          
          
          &middot;
          <a href="/tags/sftp" style="font-size:1rem">sftp</a>
        
      
        
          
          
          &middot;
          <a href="/tags/shadowsocks" style="font-size:1.0188679245283019rem">shadowsocks</a>
        
      
        
          
          
          &middot;
          <a href="/tags/shell" style="font-size:1.0188679245283019rem">shell</a>
        
      
        
          
          
          &middot;
          <a href="/tags/slap" style="font-size:1rem">slap</a>
        
      
        
          
          
          &middot;
          <a href="/tags/slave" style="font-size:1rem">slave</a>
        
      
        
          
          
          &middot;
          <a href="/tags/slb" style="font-size:1rem">slb</a>
        
      
        
          
          
          &middot;
          <a href="/tags/slowquery" style="font-size:1rem">slowquery</a>
        
      
        
          
          
          &middot;
          <a href="/tags/sonar" style="font-size:1.0377358490566038rem">sonar</a>
        
      
        
          
          
          &middot;
          <a href="/tags/sourcetree" style="font-size:1.0188679245283019rem">sourcetree</a>
        
      
        
          
          
          &middot;
          <a href="/tags/sql" style="font-size:1.0188679245283019rem">sql</a>
        
      
        
          
          
          &middot;
          <a href="/tags/ss" style="font-size:1rem">ss</a>
        
      
        
          
          
          &middot;
          <a href="/tags/ssh" style="font-size:1.0754716981132075rem">ssh</a>
        
      
        
          
          
          &middot;
          <a href="/tags/ssl" style="font-size:1.1132075471698113rem">ssl</a>
        
      
        
          
          
          &middot;
          <a href="/tags/stack" style="font-size:1rem">stack</a>
        
      
        
          
          
          &middot;
          <a href="/tags/stress" style="font-size:1rem">stress</a>
        
      
        
          
          
          &middot;
          <a href="/tags/style" style="font-size:1rem">style</a>
        
      
        
          
          
          &middot;
          <a href="/tags/switchyomega" style="font-size:1rem">switchyomega</a>
        
      
        
          
          
          &middot;
          <a href="/tags/syncd" style="font-size:1rem">syncd</a>
        
      
        
          
          
          &middot;
          <a href="/tags/taint" style="font-size:1rem">taint</a>
        
      
        
          
          
          &middot;
          <a href="/tags/tar" style="font-size:1rem">tar</a>
        
      
        
          
          
          &middot;
          <a href="/tags/tcp" style="font-size:1.0188679245283019rem">tcp</a>
        
      
        
          
          
          &middot;
          <a href="/tags/testing" style="font-size:1rem">testing</a>
        
      
        
          
          
          &middot;
          <a href="/tags/tomcat" style="font-size:1rem">tomcat</a>
        
      
        
          
          
          &middot;
          <a href="/tags/tour" style="font-size:1.0188679245283019rem">tour</a>
        
      
        
          
          
          &middot;
          <a href="/tags/trojan" style="font-size:1rem">trojan</a>
        
      
        
          
          
          &middot;
          <a href="/tags/ubuntu" style="font-size:1.0566037735849056rem">ubuntu</a>
        
      
        
          
          
          &middot;
          <a href="/tags/udp" style="font-size:1rem">udp</a>
        
      
        
          
          
          &middot;
          <a href="/tags/uk8s" style="font-size:1rem">uk8s</a>
        
      
        
          
          
          &middot;
          <a href="/tags/unauthorized" style="font-size:1rem">unauthorized</a>
        
      
        
          
          
          &middot;
          <a href="/tags/unblockneteasemusic" style="font-size:1rem">unblockneteasemusic</a>
        
      
        
          
          
          &middot;
          <a href="/tags/upgrade" style="font-size:1.0188679245283019rem">upgrade</a>
        
      
        
          
          
          &middot;
          <a href="/tags/upstream" style="font-size:1rem">upstream</a>
        
      
        
          
          
          &middot;
          <a href="/tags/v1.18.3" style="font-size:1rem">v1.18.3</a>
        
      
        
          
          
          &middot;
          <a href="/tags/vim" style="font-size:1rem">vim</a>
        
      
        
          
          
          &middot;
          <a href="/tags/virtul" style="font-size:1rem">virtul</a>
        
      
        
          
          
          &middot;
          <a href="/tags/vpn" style="font-size:1.0754716981132075rem">vpn</a>
        
      
        
          
          
          &middot;
          <a href="/tags/vscode" style="font-size:1rem">vscode</a>
        
      
        
          
          
          &middot;
          <a href="/tags/websocket" style="font-size:1rem">websocket</a>
        
      
        
          
          
          &middot;
          <a href="/tags/wifi" style="font-size:1rem">wifi</a>
        
      
        
          
          
          &middot;
          <a href="/tags/xshell" style="font-size:1rem">xshell</a>
        
      
        
          
          
          &middot;
          <a href="/tags/xtrabackup" style="font-size:1rem">xtrabackup</a>
        
      
        
          
          
          &middot;
          <a href="/tags/yum" style="font-size:1rem">yum</a>
        
      
        
          
          
          &middot;
          <a href="/tags/zabbix" style="font-size:1rem">zabbix</a>
        
      
        
          
          
          &middot;
          <a href="/tags/%e6%95%b0%e6%8d%ae%e5%ba%93%e5%8e%9f%e7%90%86" style="font-size:1rem">数据库原理</a>
        
      
        
          
          
          &middot;
          <a href="/tags/%e8%b4%aa%e5%bf%83%e7%ae%97%e6%b3%95" style="font-size:1rem">贪心算法</a>
        
      
      </div>
    
  </div>

  <!-- profile -->
  <!-- toc -->
  
  <div class="bg-white px-4 py-5 box-shadow mb-5 sticky-top">
    <h4 class="mb-4">目录</h4>
    <nav id="TableOfContents">
  <ul>
    <li><a href="#介绍">介绍</a></li>
    <li><a href="#安装">安装</a></li>
    <li><a href="#usage">Usage</a>
      <ul>
        <li><a href="#v100">@v1.0.0</a></li>
        <li><a href="#v110">@v1.1.0</a></li>
        <li><a href="#重要提醒">重要提醒</a></li>
      </ul>
    </li>
    <li><a href="#example">Example</a></li>
    <li><a href="#算法思路-">算法思路</a></li>
    <li><a href="#代码-">代码</a></li>
  </ul>
</nav>
  </div>

</aside>
<!-- /sidebar -->

    </div>
  </div>
</section>
<!-- /blog details -->



<footer>
	
	<div class="section bg-secondary">
		<div class="container">
			<div class="row justify-content-between">
				
				<div class="col-lg-5 mb-5 mb-lg-0">
					
					<a class="mb-4 d-inline-block" href="/"><img class="img-fluid"
																								src="/images/images/logo-alt.png" alt="Louis Blog" width="60%"></a>
					<p class="text-light mb-5">每一个不曾起舞的日子都是对生命的辜负.</p>
					<h4 class="text-white mb-4">关注我</h4>
					
					<ul class="list-inline social-icon-alt">
						
						<li class="list-inline-item">
							<a class="hover-ripple" href="https://twitter.com/louishong17"><i class="fa fa-twitter"></i></a>
						</li>
						
						<li class="list-inline-item">
							<a class="hover-ripple" href="https://github.com/oldthreefeng"><i class="fa fa-github"></i></a>
						</li>
						
						<li class="list-inline-item">
							<a class="hover-ripple" href="/contact"><i class="fa fa-wechat"></i></a>
						</li>
						
						<li class="list-inline-item">
							<a class="hover-ripple" href="mailto:992165098@qq.com"><i class="fa fa-envelope"></i></a>
						</li>
						
						<li class="list-inline-item">
							<a class="hover-ripple" href="https://www.fenghong.tech/blog/index.xml"><i class="fa fa-rss"></i></a>
						</li>
						
					</ul>
				</div>
				<div class="col-lg-5 mb-5 mb-lg-0">
					
					
					
					
					
					<div class="mb-5">
						<h4 class="text-white mb-4">联系信息</h4>
						<p class="text-light mb-3">上海 · 浦东新区</p>
						<p class="text-light mb-3"></p>
						<p class="text-light mb-3">微信联系方式</p>
						<p class="text-light mb-3"><img src="/images/images/wechat-qrcode.png" width="356px"></p>
					</div>
					
					
				</div>
			</div>
		</div>
	</div>
	
	<div class="bg-secondary-darken py-4">
		<div class="container">
			<div class="row">
				<div class="col-md-6 text-center text-md-left mb-3 mb-md-0">
					<p class="mb-0 text-white">Copyright © 2020 Louis</p>
				</div>
				<div class="col-md-6 text-center text-md-right">
					<ul class="list-inline">
						
						<li class="list-inline-item mx-0"><a class="d-inline-block px-3 text-white" href="https://beian.miit.gov.cn/"
																									class="text-white">鄂ICP备18027870号-1</a></li>
						<p class="list-inline-item mx-0 text-white">本网站由</p>
						<a target="_blank" rel="nofollow noopener" href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral"><img src="https://pic.fenghong.tech/images/180803_logo30.png" style="margin-bottom:5px;height: 25px;"></a>
						<p class="list-inline-item mx-0 text-white">提供CDN加速/云存储服务</p>
						
					</ul>
				</div>
			</div>
		</div>
	</div>
</footer>



<script>
	var indexURL = "/index.json"
</script>


<!-- JS Plugins -->

<script src="/plugins/jQuery/jquery.min.js"></script>

<script src="/plugins/bootstrap/bootstrap.min.js"></script>

<script src="/plugins/slick/slick.min.js"></script>

<script src="/plugins/google-map/gmap.js"></script>

<script src="/plugins/venobox/venobox.min.js"></script>

<script src="/plugins/filterizr/jquery.filterizr.min.js"></script>

<script src="/plugins/search/fuse.min.js"></script>

<script src="/plugins/search/mark.js"></script>

<script src="/plugins/search/search.js"></script>

<script src="/plugins/bigPicture/bigPicture.js"></script>

<script src="/plugins/hex_md5/hex_md5.js"></script>


<!-- Main Script -->

<script src="/js/script.min.js"></script>

<!-- Algolia -->
<script src="https://cdn.jsdelivr.net/npm/docsearch.js@2.6.3/dist/cdn/docsearch.min.js"></script>
<script>
	docsearch({
		apiKey: 'b4d47f0c039a84d4035305be829404dd',
		indexName: 'DocSearch',
		appId: 'CTH4P282IZ',
		inputSelector: '#js-algolia-btn',
		debug: false,
	});
</script>

<!-- google analitycs -->

<script>
	(function (i, s, o, g, r, a, m) {
		i['GoogleAnalyticsObject'] = r;
		i[r] = i[r] || function () {
			(i[r].q = i[r].q || []).push(arguments)
		}, i[r].l = 1 * new Date();
		a = s.createElement(o),
			m = s.getElementsByTagName(o)[0];
		a.async = 1;
		a.src = g;
		m.parentNode.insertBefore(a, m)
	})(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
ga('create', 'UA-130595069-1', 'auto');
ga('send', 'pageview');
</script>


<script>
	(function(){
		var bp = document.createElement('script');
		var curProtocol = window.location.protocol.split(':')[0];
		if (curProtocol === 'https'){
			bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
		}
		else{
			bp.src = 'http://push.zhanzhang.baidu.com/push.js';
		}
		var s = document.getElementsByTagName("script")[0];
		s.parentNode.insertBefore(bp, s);
	})();
</script>
</body>

</html>